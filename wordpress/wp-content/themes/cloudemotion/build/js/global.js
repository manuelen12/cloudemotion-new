/*!
Waypoints - 3.1.1
Copyright Â© 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
/*!
 * Masonry PACKAGED v3.2.2
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
function setCarousel(t,e,i){var e=e||{loop:!1,margin:10,nav:!0,autoplay:!0,responsiveClass:!0,items:1,animateOut:"fadeOut",animateIn:"fadeIn",onTranslate:function(){console.log("moviendome")}};i&&(e=Object.assign(e,i)),$(t).owlCarousel(e)}!function(){"use strict";function t(n){if(!n)throw new Error("No options passed to Waypoint constructor");if(!n.element)throw new Error("No element option passed to Waypoint constructor");if(!n.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,n),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=n.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var n in i)e.push(i[n]);for(var o=0,r=e.length;r>o;o++)e[o][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=o.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,n[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,n={},o=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete n[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,o.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||o.isTouch)&&(e.didScroll=!0,o.requestAnimationFrame(t))})},e.prototype.handleResize=function(){o.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var n=e[i],o=n.newScroll>n.oldScroll,r=o?n.forward:n.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s],l=n.oldScroll<a.triggerPoint,u=n.newScroll>=a.triggerPoint,h=l&&u,c=!l&&!u;(h||c)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(var d in t)t[d].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?o.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?o.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var n=0,o=t.length;o>n;n++)t[n].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=this.adapter.offset(),n={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var o in t){var r=t[o];for(var s in this.waypoints[o]){var a,l,u,h,c,d=this.waypoints[o][s],p=d.options.offset,f=d.triggerPoint,m=0,y=null==f;d.element!==d.element.window&&(m=d.adapter.offset()[r.offsetProp]),"function"==typeof p?p=p.apply(d):"string"==typeof p&&(p=parseFloat(p),d.options.offset.indexOf("%")>-1&&(p=Math.ceil(r.contextDimension*p/100))),a=r.contextScroll-r.contextOffset,d.triggerPoint=m+a-p,l=f<r.oldScroll,u=d.triggerPoint>=r.oldScroll,h=l&&u,c=!l&&!u,!y&&h?(d.queueTrigger(r.backward),n[d.group.id]=d.group):!y&&c?(d.queueTrigger(r.forward),n[d.group.id]=d.group):y&&r.oldScroll>=d.triggerPoint&&(d.queueTrigger(r.forward),n[d.group.id]=d.group)}}for(var g in n)n[g].flushTriggers();return this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in n)n[t].refresh()},e.findByElement=function(t){return n[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},o.requestAnimationFrame=function(e){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t).call(window,e)},o.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}var n={vertical:{},horizontal:{}},o=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var n=this.triggerQueues[i],o="up"===i||"left"===i;n.sort(o?e:t);for(var r=0,s=n.length;s>r;r+=1){var a=n[r];(a.options.continuous||r===n.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints);return i===this.waypoints.length-1?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=o.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return n[t.axis][t.name]||new i(t)},o.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,n){t[n]=e[n]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],n=arguments[0];return t.isFunction(arguments[0])&&(n=t.extend({},arguments[1]),n.handler=arguments[0]),this.each(function(){var o=t.extend({},n,{element:this});"string"==typeof o.context&&(o.context=t(this).closest(o.context)[0]),i.push(new e(o))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}(),function(t){function e(){}function i(t){function i(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function o(e,i){t.fn[e]=function(o){if("string"==typeof o){for(var s=n.call(arguments,1),a=0,l=this.length;l>a;a++){var u=this[a],h=t.data(u,e);if(h)if(t.isFunction(h[o])&&"_"!==o.charAt(0)){var c=h[o].apply(h,s);if(void 0!==c)return c}else r("no such method '"+o+"' for "+e+" instance");else r("cannot call methods on "+e+" prior to initialization; attempted to call '"+o+"'")}return this}return this.each(function(){var n=t.data(this,e);n?(n.option(o),n._init()):(n=new i(this,o),t.data(this,e,n))})}}if(t){var r="undefined"==typeof console?e:function(t){console.error(t)};return t.bridget=function(t,e){i(e),o(t,e)},t.bridget}}var n=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i("object"==typeof exports?require("jquery"):t.jQuery)}(window),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var o=function(){};i.removeEventListener?o=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(o=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var r={bind:n,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",r):"object"==typeof exports?module.exports=r:t.eventie=r}(this),function(t){function e(t){"function"==typeof t&&(e.isReady?t():s.push(t))}function i(t){var i="readystatechange"===t.type&&"complete"!==r.readyState;e.isReady||i||n()}function n(){e.isReady=!0;for(var t=0,i=s.length;i>t;t++){(0,s[t])()}}function o(o){return"complete"===r.readyState?n():(o.bind(r,"DOMContentLoaded",i),o.bind(r,"readystatechange",i),o.bind(t,"load",i)),e}var r=t.document,s=[];e.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],o):"object"==typeof exports?module.exports=o(require("eventie")):t.docReady=o(t.eventie)}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,o=this,r=o.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,o=this.getListenersAsObject(t),r="object"==typeof i;for(n in o)o.hasOwnProperty(n)&&-1===e(o[n],i)&&o[n].push(r?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,o,r=this.getListenersAsObject(t);for(o in r)r.hasOwnProperty(o)&&-1!==(n=e(r[o],i))&&r[o].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)r.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?r.call(this,n,o):s.call(this,n,o));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,o,r=this.getListenersAsObject(t);for(o in r)if(r.hasOwnProperty(o))for(n=r[o].length;n--;)i=r[o][n],!0===i.once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:o.EventEmitter=t}.call(this),function(t){function e(t){if(t){if("string"==typeof n[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,o=0,r=i.length;r>o;o++)if(e=i[o]+t,"string"==typeof n[e])return e}}var i="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:t.getStyleProperty=e}(window),function(t){function e(t){var e=parseFloat(t);return-1===t.indexOf("%")&&!isNaN(e)&&e}function i(){}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,i=s.length;i>e;e++){t[s[e]]=0}return t}function o(i){function o(){if(!d){d=!0;var n=t.getComputedStyle;if(u=function(){var t=n?function(t){return n(t,null)}:function(t){return t.currentStyle};return function(e){var i=t(e);return i||r("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}}(),h=i("boxSizing")){var o=document.createElement("div");o.style.width="200px",o.style.padding="1px 2px 3px 4px",o.style.borderStyle="solid",o.style.borderWidth="1px 2px 3px 4px",o.style[h]="border-box";var s=document.body||document.documentElement;s.appendChild(o);var a=u(o);c=200===e(a.width),s.removeChild(o)}}}function a(t){if(o(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=u(t);if("none"===i.display)return n();var r={};r.width=t.offsetWidth,r.height=t.offsetHeight;for(var a=r.isBorderBox=!(!h||!i[h]||"border-box"!==i[h]),d=0,p=s.length;p>d;d++){var f=s[d],m=i[f];m=l(t,m);var y=parseFloat(m);r[f]=isNaN(y)?0:y}var g=r.paddingLeft+r.paddingRight,v=r.paddingTop+r.paddingBottom,w=r.marginLeft+r.marginRight,b=r.marginTop+r.marginBottom,T=r.borderLeftWidth+r.borderRightWidth,$=r.borderTopWidth+r.borderBottomWidth,x=a&&c,C=e(i.width);!1!==C&&(r.width=C+(x?0:g+T));var E=e(i.height);return!1!==E&&(r.height=E+(x?0:v+$)),r.innerWidth=r.width-(g+T),r.innerHeight=r.height-(v+$),r.outerWidth=r.width+w,r.outerHeight=r.height+b,r}}function l(e,i){if(t.getComputedStyle||-1===i.indexOf("%"))return i;var n=e.style,o=n.left,r=e.runtimeStyle,s=r&&r.left;return s&&(r.left=e.currentStyle.left),n.left=i,i=n.pixelLeft,n.left=o,s&&(r.left=s),i}var u,h,c,d=!1;return a}var r="undefined"==typeof console?i:function(t){console.error(t)},s=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],o):"object"==typeof exports?module.exports=o(require("desandro-get-style-property")):t.getSize=o(t.getStyleProperty)}(window),function(t){function e(t,e){return t[s](e)}function i(t){if(!t.parentNode){document.createDocumentFragment().appendChild(t)}}function n(t,e){i(t);for(var n=t.parentNode.querySelectorAll(e),o=0,r=n.length;r>o;o++)if(n[o]===t)return!0;return!1}function o(t,n){return i(t),e(t,n)}var r,s=function(){if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0,n=e.length;n>i;i++){var o=e[i],r=o+"MatchesSelector";if(t[r])return r}}();if(s){var a=document.createElement("div"),l=e(a,"div");r=l?e:o}else r=n;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return r}):"object"==typeof exports?module.exports=r:window.matchesSelector=r}(Element.prototype),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){for(var e in t)return!1;return null,!0}function n(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function o(t,o,r){function a(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var l=r("transition"),u=r("transform"),h=l&&u,c=!!r("perspective"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[l],p=["transform","transition","transitionDuration","transitionProperty"],f=function(){for(var t={},e=0,i=p.length;i>e;e++){var n=p[e],o=r(n);o&&o!==n&&(t[n]=o)}return t}();e(a.prototype,t.prototype),a.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},a.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},a.prototype.getSize=function(){this.size=o(this.element)},a.prototype.css=function(t){var e=this.element.style;for(var i in t){e[f[i]||i]=t[i]}},a.prototype.getPosition=function(){var t=s(this.element),e=this.layout.options,i=e.isOriginLeft,n=e.isOriginTop,o=parseInt(t[i?"left":"right"],10),r=parseInt(t[n?"top":"bottom"],10);o=isNaN(o)?0:o,r=isNaN(r)?0:r;var a=this.layout.size;o-=i?a.paddingLeft:a.paddingRight,r-=n?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=r},a.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,i={};e.isOriginLeft?(i.left=this.position.x+t.paddingLeft+"px",i.right=""):(i.right=this.position.x+t.paddingRight+"px",i.left=""),e.isOriginTop?(i.top=this.position.y+t.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+t.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var m=c?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};a.prototype._transitionTo=function(t,e){this.getPosition();var i=this.position.x,n=this.position.y,o=parseInt(t,10),r=parseInt(e,10),s=o===this.position.x&&r===this.position.y;if(this.setPosition(t,e),s&&!this.isTransitioning)return void this.layoutPosition();var a=t-i,l=e-n,u={},h=this.layout.options;a=h.isOriginLeft?a:-a,l=h.isOriginTop?l:-l,u.transform=m(a,l),this.transition({to:u,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},a.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},a.prototype.moveTo=h?a.prototype._transitionTo:a.prototype.goTo,a.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},a.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},a.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transn;for(var i in t.onTransitionEnd)e.onEnd[i]=t.onTransitionEnd[i];for(i in t.to)e.ingProperties[i]=!0,t.isCleaning&&(e.clean[i]=!0);if(t.from){this.css(t.from);this.element.offsetHeight;null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var y=u&&n(u)+",opacity";a.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:y,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(d,this,!1))},a.prototype.transition=a.prototype[l?"_transition":"_nonTransition"],a.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},a.prototype.onotransitionend=function(t){this.ontransitionend(t)};var g={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};a.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,n=g[t.propertyName]||t.propertyName;if(delete e.ingProperties[n],i(e.ingProperties)&&this.disableTransition(),n in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[n]),n in e.onEnd){e.onEnd[n].call(this),delete e.onEnd[n]}this.emitEvent("transitionEnd",[this])}},a.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(d,this,!1),this.isTransitioning=!1},a.prototype._removeStyles=function(t){var e={};for(var i in t)e[i]="";this.css(e)};var v={transitionProperty:"",transitionDuration:""};return a.prototype.removeTransitionStyles=function(){this.css(v)},a.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},a.prototype.remove=function(){if(!l||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},a.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},a.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},a.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}var r=t.getComputedStyle,s=r?function(t){return r(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],o):"object"==typeof exports?module.exports=o(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(t.Outlayer={},t.Outlayer.Item=o(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){function e(t,e){for(var i in e)t[i]=e[i];return t}function i(t){return"[object Array]"===c.call(t)}function n(t){var e=[];if(i(t))e=t;else if(t&&"number"==typeof t.length)for(var n=0,o=t.length;o>n;n++)e.push(t[n]);else e.push(t);return e}function o(t,e){var i=p(e,t);-1!==i&&e.splice(i,1)}function r(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}function s(i,s,c,p,f,m){function y(t,i){if("string"==typeof t&&(t=a.querySelector(t)),!t||!d(t))return void(l&&l.error("Bad "+this.constructor.namespace+" element: "+t));this.element=t,this.options=e({},this.constructor.defaults),this.option(i);var n=++g;this.element.outlayerGUID=n,v[n]=this,this._create(),this.options.isInitLayout&&this.layout()}var g=0,v={};return y.namespace="outlayer",y.Item=m,y.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(y.prototype,c.prototype),y.prototype.option=function(t){e(this.options,t)},y.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},y.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},y.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),i=this.constructor.Item,n=[],o=0,r=e.length;r>o;o++){var s=e[o],a=new i(s,this);n.push(a)}return n},y.prototype._filterFindItemElements=function(t){t=n(t);for(var e=this.options.itemSelector,i=[],o=0,r=t.length;r>o;o++){var s=t[o];if(d(s))if(e){f(s,e)&&i.push(s);for(var a=s.querySelectorAll(e),l=0,u=a.length;u>l;l++)i.push(a[l])}else i.push(s)}return i},y.prototype.getItemElements=function(){for(var t=[],e=0,i=this.items.length;i>e;e++)t.push(this.items[e].element);return t},y.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},y.prototype._init=y.prototype.layout,y.prototype._resetLayout=function(){this.getSize()},y.prototype.getSize=function(){this.size=p(this.element)},y.prototype._getMeasurement=function(t,e){var i,n=this.options[t];n?("string"==typeof n?i=this.element.querySelector(n):d(n)&&(i=n),this[t]=i?p(i)[e]:n):this[t]=0},y.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},y.prototype._getItemsForLayout=function(t){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i];o.isIgnored||e.push(o)}return e},y.prototype._layoutItems=function(t,e){function i(){n.emitEvent("layoutComplete",[n,t])}var n=this;if(!t||!t.length)return void i();this._itemsOn(t,"layout",i);for(var o=[],r=0,s=t.length;s>r;r++){var a=t[r],l=this._getItemLayoutPosition(a);l.item=a,l.isInstant=e||a.isLayoutInstant,o.push(l)}this._processLayoutQueue(o)},y.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},y.prototype._processLayoutQueue=function(t){for(var e=0,i=t.length;i>e;e++){var n=t[e];this._positionItem(n.item,n.x,n.y,n.isInstant)}},y.prototype._positionItem=function(t,e,i,n){n?t.goTo(e,i):t.moveTo(e,i)},y.prototype._postLayout=function(){this.resizeContainer()},y.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))}},y.prototype._getContainerSize=h,y.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var i=this.size;i.isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},y.prototype._itemsOn=function(t,e,i){function n(){return o++,o===r&&i.call(s),!0}for(var o=0,r=t.length,s=this,a=0,l=t.length;l>a;a++){t[a].on(e,n)}},y.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},y.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},y.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,i=t.length;i>e;e++){var n=t[e];this.ignore(n)}}},y.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,i=t.length;i>e;e++){var n=t[e];o(n,this.stamps),this.unignore(n)}},y.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=n(t)):void 0},y.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var i=this.stamps[t];this._manageStamp(i)}}},y.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},y.prototype._manageStamp=h,y.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect,n=p(t);return{left:e.left-i.left-n.marginLeft,top:e.top-i.top-n.marginTop,right:i.right-e.right-n.marginRight,bottom:i.bottom-e.bottom-n.marginBottom}},y.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},y.prototype.bindResize=function(){this.isResizeBound||(i.bind(t,"resize",this),this.isResizeBound=!0)},y.prototype.unbindResize=function(){this.isResizeBound&&i.unbind(t,"resize",this),this.isResizeBound=!1},y.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},y.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},y.prototype.needsResizeLayout=function(){var t=p(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},y.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},y.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},y.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var i=this.items.slice(0);this.items=e.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(i)}},y.prototype.reveal=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var n=t[i];n.reveal()}},y.prototype.hide=function(t){var e=t&&t.length;if(e)for(var i=0;e>i;i++){var n=t[i];n.hide()}},y.prototype.getItem=function(t){for(var e=0,i=this.items.length;i>e;e++){var n=this.items[e];if(n.element===t)return n}},y.prototype.getItems=function(t){if(t&&t.length){for(var e=[],i=0,n=t.length;n>i;i++){var o=t[i],r=this.getItem(o);r&&e.push(r)}return e}},y.prototype.remove=function(t){t=n(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var i=0,r=e.length;r>i;i++){var s=e[i];s.remove(),o(s,this.items)}}},y.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,i=this.items.length;i>e;e++){this.items[e].destroy()}this.unbindResize();var n=this.element.outlayerGUID;delete v[n],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},y.data=function(t){var e=t&&t.outlayerGUID;return e&&v[e]},y.create=function(t,i){function n(){y.apply(this,arguments)}return Object.create?n.prototype=Object.create(y.prototype):e(n.prototype,y.prototype),n.prototype.constructor=n,n.defaults=e({},y.defaults),e(n.defaults,i),n.prototype.settings={},n.namespace=t,n.data=y.data,n.Item=function(){m.apply(this,arguments)},n.Item.prototype=new m,s(function(){for(var e=r(t),i=a.querySelectorAll(".js-"+e),o="data-"+e+"-options",s=0,h=i.length;h>s;s++){var c,d=i[s],p=d.getAttribute(o);try{c=p&&JSON.parse(p)}catch(t){l&&l.error("Error parsing "+o+" on "+d.nodeName.toLowerCase()+(d.id?"#"+d.id:"")+": "+t);continue}var f=new n(d,c);u&&u.data(d,t,f)}}),u&&u.bridget&&u.bridget(t,n),n},y.Item=m,y}var a=t.document,l=t.console,u=t.jQuery,h=function(){},c=Object.prototype.toString,d="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},p=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1}
;"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],s):"object"==typeof exports?module.exports=s(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):t.Outlayer=s(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){function e(t,e){var n=t.create("masonry");return n.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},n.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],i=t&&t.element;this.columnWidth=i&&e(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},n.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,i=e(t);this.containerWidth=i&&i.innerWidth},n.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,n=e&&1>e?"round":"ceil",o=Math[n](t.size.outerWidth/this.columnWidth);o=Math.min(o,this.cols);for(var r=this._getColGroup(o),s=Math.min.apply(Math,r),a=i(r,s),l={x:this.columnWidth*a,y:s},u=s+t.size.outerHeight,h=this.cols+1-r.length,c=0;h>c;c++)this.colYs[a+c]=u;return l},n.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],i=this.cols+1-t,n=0;i>n;n++){var o=this.colYs.slice(n,n+t);e[n]=Math.max.apply(Math,o)}return e},n.prototype._manageStamp=function(t){var i=e(t),n=this._getElementOffset(t),o=this.options.isOriginLeft?n.left:n.right,r=o+i.outerWidth,s=Math.floor(o/this.columnWidth);s=Math.max(0,s);var a=Math.floor(r/this.columnWidth);a-=r%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var l=(this.options.isOriginTop?n.top:n.bottom)+i.outerHeight,u=s;a>=u;u++)this.colYs[u]=Math.max(l,this.colYs[u])},n.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},n.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},n.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!==this.containerWidth},n}var i=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var i=0,n=t.length;n>i;i++){if(t[i]===e)return i}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==typeof exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,o=this,r=o.EventEmitter;n.getListeners=function(t){var e,i,n=this._getEvents();if("object"==typeof t){e={};for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,i=[];for(e=0;t.length>e;e+=1)i.push(t[e].listener);return i},n.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},n.addListener=function(t,i){var n,o=this.getListenersAsObject(t),r="object"==typeof i;for(n in o)o.hasOwnProperty(n)&&-1===e(o[n],i)&&o[n].push(r?i:{listener:i,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,i){var n,o,r=this.getListenersAsObject(t);for(o in r)r.hasOwnProperty(o)&&-1!==(n=e(r[o],i))&&r[o].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,i){var n,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)r.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?r.call(this,n,o):s.call(this,n,o));return this},n.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if("object"===i)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var i,n,o,r=this.getListenersAsObject(t);for(o in r)if(r.hasOwnProperty(o))for(n=r[o].length;n--;)i=r[o][n],!0===i.once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return o.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,n=function(){};i.addEventListener?n=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(n=function(t,i,n){t[i+n]=n.handleEvent?function(){var i=e(t);n.handleEvent.call(n,i)}:function(){var i=e(t);n.call(t,i)},t.attachEvent("on"+i,t[i+n])});var o=function(){};i.removeEventListener?o=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(o=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(n){t[e+i]=void 0}});var r={bind:n,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",r):t.eventie=r}(this),function(t,e){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,n){return e(t,i,n)}):"object"==typeof exports?module.exports=e(t,require("wolfy87-eventemitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(window,function(t,e,i){function n(t,e){for(var i in e)t[i]=e[i];return t}function o(t){return"[object Array]"===d.call(t)}function r(t){var e=[];if(o(t))e=t;else if("number"==typeof t.length)for(var i=0,n=t.length;n>i;i++)e.push(t[i]);else e.push(t);return e}function s(t,e,i){if(!(this instanceof s))return new s(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=r(t),this.options=n({},this.options),"function"==typeof e?i=e:n(this.options,e),i&&this.on("always",i),this.getImages(),u&&(this.jqDeferred=new u.Deferred);var o=this;setTimeout(function(){o.check()})}function a(t){this.img=t}function l(t){this.src=t,p[t]=this}var u=t.jQuery,h=t.console,c=void 0!==h,d=Object.prototype.toString;s.prototype=new e,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);var n=i.nodeType;if(n&&(1===n||9===n||11===n))for(var o=i.querySelectorAll("img"),r=0,s=o.length;s>r;r++){var a=o[r];this.addImage(a)}}},s.prototype.addImage=function(t){var e=new a(t);this.images.push(e)},s.prototype.check=function(){function t(t,o){return e.options.debug&&c&&h.log("confirm",t,o),e.progress(t),i++,i===n&&e.complete(),!0}var e=this,i=0,n=this.images.length;if(this.hasAnyBroken=!1,!n)return void this.complete();for(var o=0;n>o;o++){var r=this.images[o];r.on("confirm",t),r.check()}},s.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},s.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},u&&(u.fn.imagesLoaded=function(t,e){return new s(this,t,e).jqDeferred.promise(u(this))}),a.prototype=new e,a.prototype.check=function(){var t=p[this.img.src]||new l(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,i){return e.confirm(t.isLoaded,i),!0}),t.check()},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var p={};return l.prototype=new e,l.prototype.check=function(){if(!this.isChecked){var t=new Image;i.bind(t,"load",this),i.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},l.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},l.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},l.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},l.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},l.prototype.unbindProxyEvents=function(t){i.unbind(t.target,"load",this),i.unbind(t.target,"error",this)},s});var Sukces;!function($){function setNavProps(){navigationHeight=$navigation.height(),navigationOuterHeight=$navigation.outerHeight(),navPadding=2*parseFloat($navWrap.css("padding-top")),navMenuItemHeight=2*$navMenuItem.outerHeight(),idealNavHeight=navPadding+navMenuItemHeight,navIsNotTooTall=navigationHeight<=idealNavHeight}function setTestimonial(){$(document).width()<769&&$(".qodef-testimonials-slider-item").css("width","100%")}function handlerAnimation(){}function adjustScrollClass(){"none"===$menuToggle.css("display")&&(navIsNotTooTall?(headerOffset=isFrontPage&&($body.hasClass("has-header-image")||$body.hasClass("has-header-video"))?$customHeader.innerHeight()-navigationOuterHeight:$customHeader.innerHeight(),$(window).scrollTop()>=headerOffset?$navigation.addClass(navigationFixedClass):$navigation.removeClass(navigationFixedClass)):$navigation.removeClass(navigationFixedClass))}function adjustHeaderHeight(){"none"===$menuToggle.css("display")?isFrontPage?$branding.css("margin-bottom",navigationOuterHeight):$customHeader.css("margin-bottom",navigationOuterHeight):($customHeader.css("margin-bottom","0"),$branding.css("margin-bottom","0"))}function belowEntryMetaClass(t){var e,i;!$body.hasClass("has-sidebar")||$body.hasClass("search")||$body.hasClass("single-attachment")||$body.hasClass("error404")||$body.hasClass("twentyseventeen-front-page")||(e=$sidebar.offset(),i=e.top+($sidebar.height()+28),$entryContent.find(t).each(function(){var t=$(this);t.offset().top>i?t.addClass("below-entry-meta"):t.removeClass("below-entry-meta")}))}function supportsInlineSVG(){var t=document.createElement("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"===("undefined"!=typeof SVGRect&&t.firstChild&&t.firstChild.namespaceURI)}function checkiOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function supportsFixedBackground(){var t=document.createElement("div");try{return"backgroundAttachment"in t.style&&!checkiOS()&&(t.style.backgroundAttachment="fixed","fixed"===t.style.backgroundAttachment)}catch(t){return!1}}function triggerParallaxCl(t){$target=$(t),$target.length&&($(".qodef-page-header").removeClass("opened"),$("html,body").animate({scrollTop:$target.offset().top-100+"px"},2e3))}var $body=$("body"),$customHeader=$body.find(".custom-header"),$branding=$customHeader.find(".site-branding"),$navigation=$body.find(".navigation-top"),$navWrap=$navigation.find(".wrap"),$navMenuItem=$navigation.find(".menu-item"),$menuToggle=$navigation.find(".menu-toggle"),$menuScrollDown=$body.find(".menu-scroll-down"),$sidebar=$body.find("#secondary"),$entryContent=$body.find(".entry-content"),$formatQuote=$body.find(".format-quote blockquote"),isFrontPage=$body.hasClass("twentyseventeen-front-page")||$body.hasClass("home blog"),navigationFixedClass="site-navigation-fixed",navigationHeight,navigationOuterHeight,navPadding,blazy,navMenuItemHeight,idealNavHeight,navIsNotTooTall,headerOffset,menuTop=0,resizeTimer;$("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex], [contenteditable]",".site-content-contain").filter(":visible").focus(function(){if($navigation.hasClass("site-navigation-fixed")){var t=$(window).scrollTop(),e=$navigation.height(),i=$(this).offset().top,n=i-t;$("#wpadminbar").length&&(n-=$("#wpadminbar").height()),n<e&&$(window).scrollTo(i-(e+50),0)}}),$(document).ready(function(){$("*[parallax-cl]").on("click",function(t){var e=$(this).attr("href"),i=$(this).parent();if(i.is(":last-child"))return!1;$(".menu-item").removeClass("qodef-active-item"),i.addClass("qodef-active-item"),event.preventDefault(),triggerParallaxCl(e)});var t=$(".hamburger-menu"),e=$(".qodef-page-header");t.on("click",function(t){e.toggleClass("opened")}),$(".loader").removeClass("in"),triggerParallaxCl(window.location.hash),$navigation.length&&(setNavProps(),adjustScrollClass()),$menuScrollDown.length&&($("body").hasClass("admin-bar")&&(menuTop-=32),$("body").hasClass("blog")&&(menuTop-=30),$navigation.length||(navigationOuterHeight=0),$menuScrollDown.click(function(t){t.preventDefault(),$(window).scrollTo("#primary",{duration:600,offset:{top:menuTop-navigationOuterHeight}})})),adjustHeaderHeight(),!0===supportsInlineSVG()&&(document.documentElement.className=document.documentElement.className.replace(/(\s*)no-svg(\s*)/,"$1svg$2")),!0===supportsFixedBackground()&&(document.documentElement.className+=" background-fixed")}),$navigation.length&&($(window).on("scroll",function(){adjustScrollClass(),adjustHeaderHeight()}),$(window).on("resize",function(){setNavProps(),setTimeout(adjustScrollClass,500)})),$(window).on("resize",function(){clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){belowEntryMetaClass("blockquote.alignleft, blockquote.alignright")},300),setTestimonial(),setTimeout(adjustHeaderHeight,1e3)}),$(document).on("wp-custom-header-video-loaded",function(){$body.addClass("has-header-video")});var $body=$("body"),$html=$("html"),$pageLoader=$("#page-loader"),$header=$("#header"),scrolledBarrier=$(window).height()/2,scrolled=0,setHeader=function(){scrolled=$(window).scrollTop(),scrolled>=scrolledBarrier?$header.addClass("scrolled"):$header.removeClass("scrolled")};Sukces={init:function(){this.Basic.init(),this.Component.init()},Basic:{init:function(){this.mobileDetector(),this.masonry(),this.map(),this.filter()},blazy:function(){return new Blazy({selector:"img.b-lazy",loadInvisible:!0,success:function(t){console.log("cpoono"),$(t).animate({opacity:1})},error:function(t,e){console.log($(t)),console.log($(t).hasClass("team-img")),$(t).hasClass("team-img")&&(console.log(static+"/assets/img/default_p.png"),$(t).animate({opacity:1}),$(t).attr("src",static+"/assets/img/default_p.png"))}})},mobileDetector:function(){var t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}};window.trueMobile=t.any()},masonry:function(){var t=$(".masonry","#content");t.masonry({columnWidth:".masonry-sizer",itemSelector:".masonry-item",percentPosition:!0}),t.imagesLoaded().progress(function(){t.masonry("layout")}),t.on("layoutComplete",Waypoint.refreshAll())},filter:function(){var t,e,i,n=$(".filter");n.on("click","a",function(){return i=$(this).parents(".filter").data("filter-list"),t=$(i),e=$(this).attr("data-filter"),t.children().filter(".not-matched").removeClass("not-matched"),"*"!=e&&t.children().not(e).addClass("not-matched"),t.children().length==t.children().not(e).length?$(i+" p").removeClass("no-data"):$(i+" p").addClass("no-data"),$(i+" p").removeClass("no-matched"),$(this).parents("ul").find(".active").removeClass("active"),$(this).parent("li").addClass("active"),!1})},map:function(){var $googleMap=$("#google-map");if($googleMap.length>0)var yourLatitude=$googleMap.data("latitude"),yourLongitude=$googleMap.data("longitude"),pickedStyle=$googleMap.data("style"),dark=[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}],light=[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}],dream=[{featureType:"landscape",stylers:[{hue:"#FFBB00"},{saturation:43.400000000000006},{lightness:37.599999999999994},{gamma:1}]},{featureType:"road.highway",stylers:[{hue:"#FFC200"},{saturation:-61.8},{lightness:45.599999999999994},{gamma:1}]},{featureType:"road.arterial",stylers:[{hue:"#FF0300"},{saturation:-100},{lightness:51.19999999999999},{gamma:1}]},{featureType:"road.local",stylers:[{hue:"#FF0300"},{saturation:-100},{lightness:52},{gamma:1}]},{featureType:"water",stylers:[{hue:"#0078FF"},{saturation:-13.200000000000003},{lightness:2.4000000000000057},{gamma:1}]},{featureType:"poi",stylers:[{hue:"#00FF6A"},{saturation:-1.0989010989011234},{lightness:11.200000000000017},{gamma:1}]}],paper=[{featureType:"administrative",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#0066ff"},{saturation:74},{lightness:100}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"off"},{weight:.6},{saturation:-85},{lightness:61}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"road.arterial",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"simplified"},{color:"#5f94ff"},{lightness:26},{gamma:5.86}]}],pickedStyle=$googleMap.data("style"),myOptions={zoom:14,center:new google.maps.LatLng(yourLatitude,yourLongitude),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,panControl:!1,zoomControl:!0,scaleControl:!1,streetViewControl:!1,scrollwheel:!1,styles:eval(pickedStyle)},map=new google.maps.Map(document.getElementById("google-map"),myOptions),image="dark"==pickedStyle?"assets/img/location-pin-light.png":"assets/img/location-pin.png",myLatLng=new google.maps.LatLng(yourLatitude,yourLongitude),myLocation=new google.maps.Marker({position:myLatLng,map:map,icon:image})}},Component:{init:function(){this.ajaxModal(),this.carousel(),this.forms(),this.modal(),this.tabs(),$(".contact-toggle").on("click",function(){var t=$(this);return t.parent(".contact-box").toggleClass("not-visible"),t.siblings(".contact-box-content").stop().fadeToggle(500),!1}),$('*[data-toggle="mobile-nav"]').on("click",function(){return $(this).toggleClass("active"),$body.toggleClass("mobile-nav-open"),!1}),$("#header-toggle").on("click",function(){return $header.toggleClass("uncollapsed"),$(this).toggleClass("active"),setTimeout(function(){Sukces.Component.tabs(),$(".masonry","#content").masonry("layout"),Waypoint.refreshAll()},500),!1})},ajaxModal:function(){function t(){s.load(i+" #content",function(){r.show(0).addClass("loading-started"),o.fadeIn(200).css("display","inline-block"),$(this).waitForImages({finished:function(){r.html(s.html()),setTimeout(function(){$("html").addClass("locked-scrolling"),r.addClass("loading-finished").children("#content"),$body.addClass("ajax-modal-loaded"),o.fadeOut(400),s.html("")},1200)},waitForAll:!0})})}function e(){$("html").removeClass("locked-scrolling"),$(document).scrollTop(n),r.fadeOut(200,function(){$(this).removeClass("loading-started loading-finished")}),$body.removeClass("ajax-modal-loaded")}$body.append('<div id="ajax-tmp"></div>');var i,n,o=$("#ajax-loader"),r=$("#ajax-modal"),s=$("#ajax-tmp");$body.delegate('*[data-toggle="ajax-modal"]',"click",function(){return n=$(document).scrollTop(),i=$(this).attr("href"),t(),!1}),$body.delegate('*[data-dismiss="ajax-modal"]',"click",function(){return e(),!1})},carousel:function(){$(".carousel").each(function(){var t,e,i,n,o,r,s,a;t=$(this).data("items"),e=$(this).data("single-item"),i=$(this).data("autoplay"),n=!!$(this).data("transition")&&$(this).data("transition"),a=!!$(this).data("pagination"),s=!!$(this).data("navigation"),o="fade"!=n,r="fade"!=n&&0!=a&&0!=s,$(this).owlCarousel({items:t,itemsDesktop:[1199,Math.ceil(.6*t)],itemsDesktopSmall:[991,Math.ceil(.5*t)],itemsTablet:[768,Math.ceil(.4*t)],itemsMobile:[479,Math.ceil(.2*t)],singleItem:e,autoPlay:i,pagination:a,navigation:s,navigationText:!1,slideSpeed:800,stopOnHover:r,transitionStyle:n,mouseDrag:o,touchDrag:o,addClassActive:!0})})},forms:function(){var t=$("#notification-bar");$("#notification-bar").find(".close-it");$body.delegate("#notification-bar .close-it","click",function(){return e(),!1});var e=function(){t.removeClass("visible")};$(".validate-form").each(function(){$(this).validate({validClass:"valid",errorClass:"error",onfocusout:function(t,e){$(t).valid()},errorPlacement:function(t,e){return!0},rules:{email:{required:!0,email:!0}}})});var i=$("#contact-form"),n=$("#contact-popup"),o=0,r=null;if($('[data-toggle="contact-popup"]').on("click",function(){return $body.hasClass("contact-popup-open")?(clearTimeout(r),$html.removeClass("locked-scrolling"),$(document).scrollTop(o),$body.toggleClass("contact-popup-open"),r=setTimeout(function(){n.hide()},900)):(clearTimeout(r),n.show(function(){$body.toggleClass("contact-popup-open")}),o=$(window).scrollTop(),r=setTimeout(function(){$html.addClass("locked-scrolling")},900)),!1}),i.length>0){var s,a=i.find(".step.active"),l=a.next(),u=null,h=i.find(".form-status"),c=i.find("#sender"),d=i.find(".g-recaptcha");a.show(),l.addClass("next"),$('[data-target="form-next-step"]').on("click",function(){return i.valid()&&(c.html($("#name").val()+" ("+$("#email").val()+")&#x200E;"),a.removeClass("active"),setTimeout(function(){a.hide(0,function(){u=a,a=l,l.show(0).addClass("active")})},500),h.text("2/2")),!1}),$('[data-target="form-prev-step"]').on("click",function(){return a.removeClass("active"),setTimeout(function(){a.hide(0,function(){l=a,a=u,u.show(0).addClass("active")})},500),h.text("1/2"),!1}),i.submit(function(){var t,e=$(this).find(".btn-submit"),i=$(this);return d.length>0?0!=grecaptcha.getResponse().length?(s=!0,d.removeClass("error")):(s=!1,d.addClass("error"),setTimeout(function(){d.removeClass("error")},1e3)):s=!0,!!i.valid()&&(e.addClass("loading"),$.ajax({type:"POST",url:"assets/php/contact-form.php",data:i.serialize(),error:function(t){setTimeout(function(){e.addClass("error")},1200)},success:function(i){t="success"!=i?"error":"success",setTimeout(function(){e.addClass(t)},400)},complete:function(t){setTimeout(function(){e.removeClass("loading error success")},1e4)}}),!1)})}},modal:function(){$('[data-toggle="video-modal"]').on("click",function(){var t=$(this).data("target"),e=$(this).data("video");return $(t+" iframe").attr("src",e+"?autoplay=1"),$(t).modal("show"),$(t).on("hidden.bs.modal",function(){$(t+" iframe").removeAttr("src")}),!1})},tabs:function(){window.setTabs=function(){$(".tabs-wrapper").each(function(){var t=$(this).children(".selector"),e=$(this).find(".active"),i=$(this).offset().left,n=e.offset().left,o=n-i,r=e.outerWidth();t.css({width:r+"px",left:o+"px"})})},$(".tabs-wrapper .nav-tabs li a").on("click",function(){var t=$(this).parents(".tabs-wrapper").children(".selector"),e=$(this).parents(".tabs-wrapper").offset().left,i=$(this).offset().left,n=i-e,o=$(this).outerWidth();t.css({width:o+"px",left:n+"px"})})},tooltip:function(){$("[data-toggle='tooltip']").tooltip()}}},$(window).scroll(function(){setHeader()}),$(window).resize(function(){$header.removeClass("uncollapsed"),$body.removeClass("mobile-nav-open"),$(".nav-toggle").each(function(){$(this).removeClass("active")}),setTabs()})}(jQuery);var arrows={navText:["<i class='fa fa-chevron-left'></i>","<i class='fa fa-chevron-right'></i>"]};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJnbG9iYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG4vKiFcbldheXBvaW50cyAtIDMuMS4xXG5Db3B5cmlnaHQgwqkgMjAxMS0yMDE1IENhbGViIFRyb3VnaHRvblxuTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuaHR0cHM6Ly9naXRodWIuY29tL2ltYWtld2VidGhpbmdzL3dheXBvaW50cy9ibG9nL21hc3Rlci9saWNlbnNlcy50eHRcbiovXG4hZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KG8pe2lmKCFvKXRocm93IG5ldyBFcnJvcihcIk5vIG9wdGlvbnMgcGFzc2VkIHRvIFdheXBvaW50IGNvbnN0cnVjdG9yXCIpO2lmKCFvLmVsZW1lbnQpdGhyb3cgbmV3IEVycm9yKFwiTm8gZWxlbWVudCBvcHRpb24gcGFzc2VkIHRvIFdheXBvaW50IGNvbnN0cnVjdG9yXCIpO2lmKCFvLmhhbmRsZXIpdGhyb3cgbmV3IEVycm9yKFwiTm8gaGFuZGxlciBvcHRpb24gcGFzc2VkIHRvIFdheXBvaW50IGNvbnN0cnVjdG9yXCIpO3RoaXMua2V5PVwid2F5cG9pbnQtXCIrZSx0aGlzLm9wdGlvbnM9dC5BZGFwdGVyLmV4dGVuZCh7fSx0LmRlZmF1bHRzLG8pLHRoaXMuZWxlbWVudD10aGlzLm9wdGlvbnMuZWxlbWVudCx0aGlzLmFkYXB0ZXI9bmV3IHQuQWRhcHRlcih0aGlzLmVsZW1lbnQpLHRoaXMuY2FsbGJhY2s9by5oYW5kbGVyLHRoaXMuYXhpcz10aGlzLm9wdGlvbnMuaG9yaXpvbnRhbD9cImhvcml6b250YWxcIjpcInZlcnRpY2FsXCIsdGhpcy5lbmFibGVkPXRoaXMub3B0aW9ucy5lbmFibGVkLHRoaXMudHJpZ2dlclBvaW50PW51bGwsdGhpcy5ncm91cD10Lkdyb3VwLmZpbmRPckNyZWF0ZSh7bmFtZTp0aGlzLm9wdGlvbnMuZ3JvdXAsYXhpczp0aGlzLmF4aXN9KSx0aGlzLmNvbnRleHQ9dC5Db250ZXh0LmZpbmRPckNyZWF0ZUJ5RWxlbWVudCh0aGlzLm9wdGlvbnMuY29udGV4dCksdC5vZmZzZXRBbGlhc2VzW3RoaXMub3B0aW9ucy5vZmZzZXRdJiYodGhpcy5vcHRpb25zLm9mZnNldD10Lm9mZnNldEFsaWFzZXNbdGhpcy5vcHRpb25zLm9mZnNldF0pLHRoaXMuZ3JvdXAuYWRkKHRoaXMpLHRoaXMuY29udGV4dC5hZGQodGhpcyksaVt0aGlzLmtleV09dGhpcyxlKz0xfXZhciBlPTAsaT17fTt0LnByb3RvdHlwZS5xdWV1ZVRyaWdnZXI9ZnVuY3Rpb24odCl7dGhpcy5ncm91cC5xdWV1ZVRyaWdnZXIodGhpcyx0KX0sdC5wcm90b3R5cGUudHJpZ2dlcj1mdW5jdGlvbih0KXt0aGlzLmVuYWJsZWQmJnRoaXMuY2FsbGJhY2smJnRoaXMuY2FsbGJhY2suYXBwbHkodGhpcyx0KX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuY29udGV4dC5yZW1vdmUodGhpcyksdGhpcy5ncm91cC5yZW1vdmUodGhpcyksZGVsZXRlIGlbdGhpcy5rZXldfSx0LnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZD0hMSx0aGlzfSx0LnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0LnJlZnJlc2goKSx0aGlzLmVuYWJsZWQ9ITAsdGhpc30sdC5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdyb3VwLm5leHQodGhpcyl9LHQucHJvdG90eXBlLnByZXZpb3VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3JvdXAucHJldmlvdXModGhpcyl9LHQuaW52b2tlQWxsPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Zvcih2YXIgbyBpbiBpKWUucHVzaChpW29dKTtmb3IodmFyIG49MCxyPWUubGVuZ3RoO3I+bjtuKyspZVtuXVt0XSgpfSx0LmRlc3Ryb3lBbGw9ZnVuY3Rpb24oKXt0Lmludm9rZUFsbChcImRlc3Ryb3lcIil9LHQuZGlzYWJsZUFsbD1mdW5jdGlvbigpe3QuaW52b2tlQWxsKFwiZGlzYWJsZVwiKX0sdC5lbmFibGVBbGw9ZnVuY3Rpb24oKXt0Lmludm9rZUFsbChcImVuYWJsZVwiKX0sdC5yZWZyZXNoQWxsPWZ1bmN0aW9uKCl7dC5Db250ZXh0LnJlZnJlc2hBbGwoKX0sdC52aWV3cG9ydEhlaWdodD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaW5uZXJIZWlnaHR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHR9LHQudmlld3BvcnRXaWR0aD1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGh9LHQuYWRhcHRlcnM9W10sdC5kZWZhdWx0cz17Y29udGV4dDp3aW5kb3csY29udGludW91czohMCxlbmFibGVkOiEwLGdyb3VwOlwiZGVmYXVsdFwiLGhvcml6b250YWw6ITEsb2Zmc2V0OjB9LHQub2Zmc2V0QWxpYXNlcz17XCJib3R0b20taW4tdmlld1wiOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dC5pbm5lckhlaWdodCgpLXRoaXMuYWRhcHRlci5vdXRlckhlaWdodCgpfSxcInJpZ2h0LWluLXZpZXdcIjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRleHQuaW5uZXJXaWR0aCgpLXRoaXMuYWRhcHRlci5vdXRlcldpZHRoKCl9fSx3aW5kb3cuV2F5cG9pbnQ9dH0oKSxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7d2luZG93LnNldFRpbWVvdXQodCwxZTMvNjApfWZ1bmN0aW9uIGUodCl7dGhpcy5lbGVtZW50PXQsdGhpcy5BZGFwdGVyPW4uQWRhcHRlcix0aGlzLmFkYXB0ZXI9bmV3IHRoaXMuQWRhcHRlcih0KSx0aGlzLmtleT1cIndheXBvaW50LWNvbnRleHQtXCIraSx0aGlzLmRpZFNjcm9sbD0hMSx0aGlzLmRpZFJlc2l6ZT0hMSx0aGlzLm9sZFNjcm9sbD17eDp0aGlzLmFkYXB0ZXIuc2Nyb2xsTGVmdCgpLHk6dGhpcy5hZGFwdGVyLnNjcm9sbFRvcCgpfSx0aGlzLndheXBvaW50cz17dmVydGljYWw6e30saG9yaXpvbnRhbDp7fX0sdC53YXlwb2ludENvbnRleHRLZXk9dGhpcy5rZXksb1t0LndheXBvaW50Q29udGV4dEtleV09dGhpcyxpKz0xLHRoaXMuY3JlYXRlVGhyb3R0bGVkU2Nyb2xsSGFuZGxlcigpLHRoaXMuY3JlYXRlVGhyb3R0bGVkUmVzaXplSGFuZGxlcigpfXZhciBpPTAsbz17fSxuPXdpbmRvdy5XYXlwb2ludCxyPXdpbmRvdy5vbmxvYWQ7ZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3ZhciBlPXQub3B0aW9ucy5ob3Jpem9udGFsP1wiaG9yaXpvbnRhbFwiOlwidmVydGljYWxcIjt0aGlzLndheXBvaW50c1tlXVt0LmtleV09dCx0aGlzLnJlZnJlc2goKX0sZS5wcm90b3R5cGUuY2hlY2tFbXB0eT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuQWRhcHRlci5pc0VtcHR5T2JqZWN0KHRoaXMud2F5cG9pbnRzLmhvcml6b250YWwpLGU9dGhpcy5BZGFwdGVyLmlzRW1wdHlPYmplY3QodGhpcy53YXlwb2ludHMudmVydGljYWwpO3QmJmUmJih0aGlzLmFkYXB0ZXIub2ZmKFwiLndheXBvaW50c1wiKSxkZWxldGUgb1t0aGlzLmtleV0pfSxlLnByb3RvdHlwZS5jcmVhdGVUaHJvdHRsZWRSZXNpemVIYW5kbGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe2UuaGFuZGxlUmVzaXplKCksZS5kaWRSZXNpemU9ITF9dmFyIGU9dGhpczt0aGlzLmFkYXB0ZXIub24oXCJyZXNpemUud2F5cG9pbnRzXCIsZnVuY3Rpb24oKXtlLmRpZFJlc2l6ZXx8KGUuZGlkUmVzaXplPSEwLG4ucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQpKX0pfSxlLnByb3RvdHlwZS5jcmVhdGVUaHJvdHRsZWRTY3JvbGxIYW5kbGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe2UuaGFuZGxlU2Nyb2xsKCksZS5kaWRTY3JvbGw9ITF9dmFyIGU9dGhpczt0aGlzLmFkYXB0ZXIub24oXCJzY3JvbGwud2F5cG9pbnRzXCIsZnVuY3Rpb24oKXsoIWUuZGlkU2Nyb2xsfHxuLmlzVG91Y2gpJiYoZS5kaWRTY3JvbGw9ITAsbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodCkpfSl9LGUucHJvdG90eXBlLmhhbmRsZVJlc2l6ZT1mdW5jdGlvbigpe24uQ29udGV4dC5yZWZyZXNoQWxsKCl9LGUucHJvdG90eXBlLmhhbmRsZVNjcm9sbD1mdW5jdGlvbigpe3ZhciB0PXt9LGU9e2hvcml6b250YWw6e25ld1Njcm9sbDp0aGlzLmFkYXB0ZXIuc2Nyb2xsTGVmdCgpLG9sZFNjcm9sbDp0aGlzLm9sZFNjcm9sbC54LGZvcndhcmQ6XCJyaWdodFwiLGJhY2t3YXJkOlwibGVmdFwifSx2ZXJ0aWNhbDp7bmV3U2Nyb2xsOnRoaXMuYWRhcHRlci5zY3JvbGxUb3AoKSxvbGRTY3JvbGw6dGhpcy5vbGRTY3JvbGwueSxmb3J3YXJkOlwiZG93blwiLGJhY2t3YXJkOlwidXBcIn19O2Zvcih2YXIgaSBpbiBlKXt2YXIgbz1lW2ldLG49by5uZXdTY3JvbGw+by5vbGRTY3JvbGwscj1uP28uZm9yd2FyZDpvLmJhY2t3YXJkO2Zvcih2YXIgcyBpbiB0aGlzLndheXBvaW50c1tpXSl7dmFyIGE9dGhpcy53YXlwb2ludHNbaV1bc10sbD1vLm9sZFNjcm9sbDxhLnRyaWdnZXJQb2ludCxoPW8ubmV3U2Nyb2xsPj1hLnRyaWdnZXJQb2ludCxwPWwmJmgsdT0hbCYmIWg7KHB8fHUpJiYoYS5xdWV1ZVRyaWdnZXIociksdFthLmdyb3VwLmlkXT1hLmdyb3VwKX19Zm9yKHZhciBjIGluIHQpdFtjXS5mbHVzaFRyaWdnZXJzKCk7dGhpcy5vbGRTY3JvbGw9e3g6ZS5ob3Jpem9udGFsLm5ld1Njcm9sbCx5OmUudmVydGljYWwubmV3U2Nyb2xsfX0sZS5wcm90b3R5cGUuaW5uZXJIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50PT10aGlzLmVsZW1lbnQud2luZG93P24udmlld3BvcnRIZWlnaHQoKTp0aGlzLmFkYXB0ZXIuaW5uZXJIZWlnaHQoKX0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLndheXBvaW50c1t0LmF4aXNdW3Qua2V5XSx0aGlzLmNoZWNrRW1wdHkoKX0sZS5wcm90b3R5cGUuaW5uZXJXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQ9PXRoaXMuZWxlbWVudC53aW5kb3c/bi52aWV3cG9ydFdpZHRoKCk6dGhpcy5hZGFwdGVyLmlubmVyV2lkdGgoKX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PVtdO2Zvcih2YXIgZSBpbiB0aGlzLndheXBvaW50cylmb3IodmFyIGkgaW4gdGhpcy53YXlwb2ludHNbZV0pdC5wdXNoKHRoaXMud2F5cG9pbnRzW2VdW2ldKTtmb3IodmFyIG89MCxuPXQubGVuZ3RoO24+bztvKyspdFtvXS5kZXN0cm95KCl9LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuZWxlbWVudD09dGhpcy5lbGVtZW50LndpbmRvdyxpPXRoaXMuYWRhcHRlci5vZmZzZXQoKSxvPXt9O3RoaXMuaGFuZGxlU2Nyb2xsKCksdD17aG9yaXpvbnRhbDp7Y29udGV4dE9mZnNldDplPzA6aS5sZWZ0LGNvbnRleHRTY3JvbGw6ZT8wOnRoaXMub2xkU2Nyb2xsLngsY29udGV4dERpbWVuc2lvbjp0aGlzLmlubmVyV2lkdGgoKSxvbGRTY3JvbGw6dGhpcy5vbGRTY3JvbGwueCxmb3J3YXJkOlwicmlnaHRcIixiYWNrd2FyZDpcImxlZnRcIixvZmZzZXRQcm9wOlwibGVmdFwifSx2ZXJ0aWNhbDp7Y29udGV4dE9mZnNldDplPzA6aS50b3AsY29udGV4dFNjcm9sbDplPzA6dGhpcy5vbGRTY3JvbGwueSxjb250ZXh0RGltZW5zaW9uOnRoaXMuaW5uZXJIZWlnaHQoKSxvbGRTY3JvbGw6dGhpcy5vbGRTY3JvbGwueSxmb3J3YXJkOlwiZG93blwiLGJhY2t3YXJkOlwidXBcIixvZmZzZXRQcm9wOlwidG9wXCJ9fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTtmb3IodmFyIHMgaW4gdGhpcy53YXlwb2ludHNbbl0pe3ZhciBhLGwsaCxwLHUsYz10aGlzLndheXBvaW50c1tuXVtzXSxkPWMub3B0aW9ucy5vZmZzZXQsZj1jLnRyaWdnZXJQb2ludCx3PTAseT1udWxsPT1mO2MuZWxlbWVudCE9PWMuZWxlbWVudC53aW5kb3cmJih3PWMuYWRhcHRlci5vZmZzZXQoKVtyLm9mZnNldFByb3BdKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkP2Q9ZC5hcHBseShjKTpcInN0cmluZ1wiPT10eXBlb2YgZCYmKGQ9cGFyc2VGbG9hdChkKSxjLm9wdGlvbnMub2Zmc2V0LmluZGV4T2YoXCIlXCIpPi0xJiYoZD1NYXRoLmNlaWwoci5jb250ZXh0RGltZW5zaW9uKmQvMTAwKSkpLGE9ci5jb250ZXh0U2Nyb2xsLXIuY29udGV4dE9mZnNldCxjLnRyaWdnZXJQb2ludD13K2EtZCxsPWY8ci5vbGRTY3JvbGwsaD1jLnRyaWdnZXJQb2ludD49ci5vbGRTY3JvbGwscD1sJiZoLHU9IWwmJiFoLCF5JiZwPyhjLnF1ZXVlVHJpZ2dlcihyLmJhY2t3YXJkKSxvW2MuZ3JvdXAuaWRdPWMuZ3JvdXApOiF5JiZ1PyhjLnF1ZXVlVHJpZ2dlcihyLmZvcndhcmQpLG9bYy5ncm91cC5pZF09Yy5ncm91cCk6eSYmci5vbGRTY3JvbGw+PWMudHJpZ2dlclBvaW50JiYoYy5xdWV1ZVRyaWdnZXIoci5mb3J3YXJkKSxvW2MuZ3JvdXAuaWRdPWMuZ3JvdXApfX1mb3IodmFyIGcgaW4gbylvW2ddLmZsdXNoVHJpZ2dlcnMoKTtyZXR1cm4gdGhpc30sZS5maW5kT3JDcmVhdGVCeUVsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUuZmluZEJ5RWxlbWVudCh0KXx8bmV3IGUodCl9LGUucmVmcmVzaEFsbD1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiBvKW9bdF0ucmVmcmVzaCgpfSxlLmZpbmRCeUVsZW1lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG9bdC53YXlwb2ludENvbnRleHRLZXldfSx3aW5kb3cub25sb2FkPWZ1bmN0aW9uKCl7ciYmcigpLGUucmVmcmVzaEFsbCgpfSxuLnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbihlKXt2YXIgaT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0O2kuY2FsbCh3aW5kb3csZSl9LG4uQ29udGV4dD1lfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0LGUpe3JldHVybiB0LnRyaWdnZXJQb2ludC1lLnRyaWdnZXJQb2ludH1mdW5jdGlvbiBlKHQsZSl7cmV0dXJuIGUudHJpZ2dlclBvaW50LXQudHJpZ2dlclBvaW50fWZ1bmN0aW9uIGkodCl7dGhpcy5uYW1lPXQubmFtZSx0aGlzLmF4aXM9dC5heGlzLHRoaXMuaWQ9dGhpcy5uYW1lK1wiLVwiK3RoaXMuYXhpcyx0aGlzLndheXBvaW50cz1bXSx0aGlzLmNsZWFyVHJpZ2dlclF1ZXVlcygpLG9bdGhpcy5heGlzXVt0aGlzLm5hbWVdPXRoaXN9dmFyIG89e3ZlcnRpY2FsOnt9LGhvcml6b250YWw6e319LG49d2luZG93LldheXBvaW50O2kucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt0aGlzLndheXBvaW50cy5wdXNoKHQpfSxpLnByb3RvdHlwZS5jbGVhclRyaWdnZXJRdWV1ZXM9ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXJRdWV1ZXM9e3VwOltdLGRvd246W10sbGVmdDpbXSxyaWdodDpbXX19LGkucHJvdG90eXBlLmZsdXNoVHJpZ2dlcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGkgaW4gdGhpcy50cmlnZ2VyUXVldWVzKXt2YXIgbz10aGlzLnRyaWdnZXJRdWV1ZXNbaV0sbj1cInVwXCI9PT1pfHxcImxlZnRcIj09PWk7by5zb3J0KG4/ZTp0KTtmb3IodmFyIHI9MCxzPW8ubGVuZ3RoO3M+cjtyKz0xKXt2YXIgYT1vW3JdOyhhLm9wdGlvbnMuY29udGludW91c3x8cj09PW8ubGVuZ3RoLTEpJiZhLnRyaWdnZXIoW2ldKX19dGhpcy5jbGVhclRyaWdnZXJRdWV1ZXMoKX0saS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihlKXt0aGlzLndheXBvaW50cy5zb3J0KHQpO3ZhciBpPW4uQWRhcHRlci5pbkFycmF5KGUsdGhpcy53YXlwb2ludHMpLG89aT09PXRoaXMud2F5cG9pbnRzLmxlbmd0aC0xO3JldHVybiBvP251bGw6dGhpcy53YXlwb2ludHNbaSsxXX0saS5wcm90b3R5cGUucHJldmlvdXM9ZnVuY3Rpb24oZSl7dGhpcy53YXlwb2ludHMuc29ydCh0KTt2YXIgaT1uLkFkYXB0ZXIuaW5BcnJheShlLHRoaXMud2F5cG9pbnRzKTtyZXR1cm4gaT90aGlzLndheXBvaW50c1tpLTFdOm51bGx9LGkucHJvdG90eXBlLnF1ZXVlVHJpZ2dlcj1mdW5jdGlvbih0LGUpe3RoaXMudHJpZ2dlclF1ZXVlc1tlXS5wdXNoKHQpfSxpLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dmFyIGU9bi5BZGFwdGVyLmluQXJyYXkodCx0aGlzLndheXBvaW50cyk7ZT4tMSYmdGhpcy53YXlwb2ludHMuc3BsaWNlKGUsMSl9LGkucHJvdG90eXBlLmZpcnN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2F5cG9pbnRzWzBdfSxpLnByb3RvdHlwZS5sYXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2F5cG9pbnRzW3RoaXMud2F5cG9pbnRzLmxlbmd0aC0xXX0saS5maW5kT3JDcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG9bdC5heGlzXVt0Lm5hbWVdfHxuZXcgaSh0KX0sbi5Hcm91cD1pfSgpLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXt0aGlzLiRlbGVtZW50PWUodCl9dmFyIGU9d2luZG93LmpRdWVyeSxpPXdpbmRvdy5XYXlwb2ludDtlLmVhY2goW1wiaW5uZXJIZWlnaHRcIixcImlubmVyV2lkdGhcIixcIm9mZlwiLFwib2Zmc2V0XCIsXCJvblwiLFwib3V0ZXJIZWlnaHRcIixcIm91dGVyV2lkdGhcIixcInNjcm9sbExlZnRcIixcInNjcm9sbFRvcFwiXSxmdW5jdGlvbihlLGkpe3QucHJvdG90eXBlW2ldPWZ1bmN0aW9uKCl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gdGhpcy4kZWxlbWVudFtpXS5hcHBseSh0aGlzLiRlbGVtZW50LHQpfX0pLGUuZWFjaChbXCJleHRlbmRcIixcImluQXJyYXlcIixcImlzRW1wdHlPYmplY3RcIl0sZnVuY3Rpb24oaSxvKXt0W29dPWVbb119KSxpLmFkYXB0ZXJzLnB1c2goe25hbWU6XCJqcXVlcnlcIixBZGFwdGVyOnR9KSxpLkFkYXB0ZXI9dH0oKSxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGk9W10sbz1hcmd1bWVudHNbMF07cmV0dXJuIHQuaXNGdW5jdGlvbihhcmd1bWVudHNbMF0pJiYobz10LmV4dGVuZCh7fSxhcmd1bWVudHNbMV0pLG8uaGFuZGxlcj1hcmd1bWVudHNbMF0pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBuPXQuZXh0ZW5kKHt9LG8se2VsZW1lbnQ6dGhpc30pO1wic3RyaW5nXCI9PXR5cGVvZiBuLmNvbnRleHQmJihuLmNvbnRleHQ9dCh0aGlzKS5jbG9zZXN0KG4uY29udGV4dClbMF0pLGkucHVzaChuZXcgZShuKSl9KSxpfX12YXIgZT13aW5kb3cuV2F5cG9pbnQ7d2luZG93LmpRdWVyeSYmKHdpbmRvdy5qUXVlcnkuZm4ud2F5cG9pbnQ9dCh3aW5kb3cualF1ZXJ5KSksd2luZG93LlplcHRvJiYod2luZG93LlplcHRvLmZuLndheXBvaW50PXQod2luZG93LlplcHRvKSl9KCk7XG5cbi8qIVxuICogTWFzb25yeSBQQUNLQUdFRCB2My4yLjJcbiAqIENhc2NhZGluZyBncmlkIGxheW91dCBsaWJyYXJ5XG4gKiBodHRwOi8vbWFzb25yeS5kZXNhbmRyby5jb21cbiAqIE1JVCBMaWNlbnNlXG4gKiBieSBEYXZpZCBEZVNhbmRyb1xuICovXG4gIWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt9ZnVuY3Rpb24gYyhhKXtmdW5jdGlvbiBjKGIpe2IucHJvdG90eXBlLm9wdGlvbnx8KGIucHJvdG90eXBlLm9wdGlvbj1mdW5jdGlvbihiKXthLmlzUGxhaW5PYmplY3QoYikmJih0aGlzLm9wdGlvbnM9YS5leHRlbmQoITAsdGhpcy5vcHRpb25zLGIpKX0pfWZ1bmN0aW9uIGUoYixjKXthLmZuW2JdPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtmb3IodmFyIGc9ZC5jYWxsKGFyZ3VtZW50cywxKSxoPTAsaT10aGlzLmxlbmd0aDtpPmg7aCsrKXt2YXIgaj10aGlzW2hdLGs9YS5kYXRhKGosYik7aWYoaylpZihhLmlzRnVuY3Rpb24oa1tlXSkmJlwiX1wiIT09ZS5jaGFyQXQoMCkpe3ZhciBsPWtbZV0uYXBwbHkoayxnKTtpZih2b2lkIDAhPT1sKXJldHVybiBsfWVsc2UgZihcIm5vIHN1Y2ggbWV0aG9kICdcIitlK1wiJyBmb3IgXCIrYitcIiBpbnN0YW5jZVwiKTtlbHNlIGYoXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiK2IrXCIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IGF0dGVtcHRlZCB0byBjYWxsICdcIitlK1wiJ1wiKX1yZXR1cm4gdGhpc31yZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YS5kYXRhKHRoaXMsYik7ZD8oZC5vcHRpb24oZSksZC5faW5pdCgpKTooZD1uZXcgYyh0aGlzLGUpLGEuZGF0YSh0aGlzLGIsZCkpfSl9fWlmKGEpe3ZhciBmPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlP2I6ZnVuY3Rpb24oYSl7Y29uc29sZS5lcnJvcihhKX07cmV0dXJuIGEuYnJpZGdldD1mdW5jdGlvbihhLGIpe2MoYiksZShhLGIpfSxhLmJyaWRnZXR9fXZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwianF1ZXJ5LWJyaWRnZXQvanF1ZXJ5LmJyaWRnZXRcIixbXCJqcXVlcnlcIl0sYyk6YyhcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9yZXF1aXJlKFwianF1ZXJ5XCIpOmEualF1ZXJ5KX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3ZhciBjPWEuZXZlbnQ7cmV0dXJuIGMudGFyZ2V0PWMudGFyZ2V0fHxjLnNyY0VsZW1lbnR8fGIsY312YXIgYz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZD1mdW5jdGlvbigpe307Yy5hZGRFdmVudExpc3RlbmVyP2Q9ZnVuY3Rpb24oYSxiLGMpe2EuYWRkRXZlbnRMaXN0ZW5lcihiLGMsITEpfTpjLmF0dGFjaEV2ZW50JiYoZD1mdW5jdGlvbihhLGMsZCl7YVtjK2RdPWQuaGFuZGxlRXZlbnQ/ZnVuY3Rpb24oKXt2YXIgYz1iKGEpO2QuaGFuZGxlRXZlbnQuY2FsbChkLGMpfTpmdW5jdGlvbigpe3ZhciBjPWIoYSk7ZC5jYWxsKGEsYyl9LGEuYXR0YWNoRXZlbnQoXCJvblwiK2MsYVtjK2RdKX0pO3ZhciBlPWZ1bmN0aW9uKCl7fTtjLnJlbW92ZUV2ZW50TGlzdGVuZXI/ZT1mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9OmMuZGV0YWNoRXZlbnQmJihlPWZ1bmN0aW9uKGEsYixjKXthLmRldGFjaEV2ZW50KFwib25cIitiLGFbYitjXSk7dHJ5e2RlbGV0ZSBhW2IrY119Y2F0Y2goZCl7YVtiK2NdPXZvaWQgMH19KTt2YXIgZj17YmluZDpkLHVuYmluZDplfTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZXZlbnRpZS9ldmVudGllXCIsZik6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZjphLmV2ZW50aWU9Zn0odGhpcyksZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiYoYi5pc1JlYWR5P2EoKTpnLnB1c2goYSkpfWZ1bmN0aW9uIGMoYSl7dmFyIGM9XCJyZWFkeXN0YXRlY2hhbmdlXCI9PT1hLnR5cGUmJlwiY29tcGxldGVcIiE9PWYucmVhZHlTdGF0ZTtiLmlzUmVhZHl8fGN8fGQoKX1mdW5jdGlvbiBkKCl7Yi5pc1JlYWR5PSEwO2Zvcih2YXIgYT0wLGM9Zy5sZW5ndGg7Yz5hO2ErKyl7dmFyIGQ9Z1thXTtkKCl9fWZ1bmN0aW9uIGUoZSl7cmV0dXJuXCJjb21wbGV0ZVwiPT09Zi5yZWFkeVN0YXRlP2QoKTooZS5iaW5kKGYsXCJET01Db250ZW50TG9hZGVkXCIsYyksZS5iaW5kKGYsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYyksZS5iaW5kKGEsXCJsb2FkXCIsYykpLGJ9dmFyIGY9YS5kb2N1bWVudCxnPVtdO2IuaXNSZWFkeT0hMSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZG9jLXJlYWR5L2RvYy1yZWFkeVwiLFtcImV2ZW50aWUvZXZlbnRpZVwiXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJldmVudGllXCIpKTphLmRvY1JlYWR5PWUoYS5ldmVudGllKX0od2luZG93KSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt9ZnVuY3Rpb24gYihhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aDtjLS07KWlmKGFbY10ubGlzdGVuZXI9PT1iKXJldHVybiBjO3JldHVybi0xfWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbYV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgZD1hLnByb3RvdHlwZSxlPXRoaXMsZj1lLkV2ZW50RW1pdHRlcjtkLmdldExpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcy5fZ2V0RXZlbnRzKCk7aWYoYSBpbnN0YW5jZW9mIFJlZ0V4cCl7Yj17fTtmb3IoYyBpbiBkKWQuaGFzT3duUHJvcGVydHkoYykmJmEudGVzdChjKSYmKGJbY109ZFtjXSl9ZWxzZSBiPWRbYV18fChkW2FdPVtdKTtyZXR1cm4gYn0sZC5mbGF0dGVuTGlzdGVuZXJzPWZ1bmN0aW9uKGEpe3ZhciBiLGM9W107Zm9yKGI9MDtiPGEubGVuZ3RoO2IrPTEpYy5wdXNoKGFbYl0ubGlzdGVuZXIpO3JldHVybiBjfSxkLmdldExpc3RlbmVyc0FzT2JqZWN0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5nZXRMaXN0ZW5lcnMoYSk7cmV0dXJuIGMgaW5zdGFuY2VvZiBBcnJheSYmKGI9e30sYlthXT1jKSxifHxjfSxkLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGEsYyl7dmFyIGQsZT10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGEpLGY9XCJvYmplY3RcIj09dHlwZW9mIGM7Zm9yKGQgaW4gZSllLmhhc093blByb3BlcnR5KGQpJiYtMT09PWIoZVtkXSxjKSYmZVtkXS5wdXNoKGY/Yzp7bGlzdGVuZXI6YyxvbmNlOiExfSk7cmV0dXJuIHRoaXN9LGQub249YyhcImFkZExpc3RlbmVyXCIpLGQuYWRkT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoYSx7bGlzdGVuZXI6YixvbmNlOiEwfSl9LGQub25jZT1jKFwiYWRkT25jZUxpc3RlbmVyXCIpLGQuZGVmaW5lRXZlbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0TGlzdGVuZXJzKGEpLHRoaXN9LGQuZGVmaW5lRXZlbnRzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7Yis9MSl0aGlzLmRlZmluZUV2ZW50KGFbYl0pO3JldHVybiB0aGlzfSxkLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGEsYyl7dmFyIGQsZSxmPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoYSk7Zm9yKGUgaW4gZilmLmhhc093blByb3BlcnR5KGUpJiYoZD1iKGZbZV0sYyksLTEhPT1kJiZmW2VdLnNwbGljZShkLDEpKTtyZXR1cm4gdGhpc30sZC5vZmY9YyhcInJlbW92ZUxpc3RlbmVyXCIpLGQuYWRkTGlzdGVuZXJzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyghMSxhLGIpfSxkLnJlbW92ZUxpc3RlbmVycz1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITAsYSxiKX0sZC5tYW5pcHVsYXRlTGlzdGVuZXJzPWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YT90aGlzLnJlbW92ZUxpc3RlbmVyOnRoaXMuYWRkTGlzdGVuZXIsZz1hP3RoaXMucmVtb3ZlTGlzdGVuZXJzOnRoaXMuYWRkTGlzdGVuZXJzO2lmKFwib2JqZWN0XCIhPXR5cGVvZiBifHxiIGluc3RhbmNlb2YgUmVnRXhwKWZvcihkPWMubGVuZ3RoO2QtLTspZi5jYWxsKHRoaXMsYixjW2RdKTtlbHNlIGZvcihkIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShkKSYmKGU9YltkXSkmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2YuY2FsbCh0aGlzLGQsZSk6Zy5jYWxsKHRoaXMsZCxlKSk7cmV0dXJuIHRoaXN9LGQucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz10eXBlb2YgYSxkPXRoaXMuX2dldEV2ZW50cygpO2lmKFwic3RyaW5nXCI9PT1jKWRlbGV0ZSBkW2FdO2Vsc2UgaWYoYSBpbnN0YW5jZW9mIFJlZ0V4cClmb3IoYiBpbiBkKWQuaGFzT3duUHJvcGVydHkoYikmJmEudGVzdChiKSYmZGVsZXRlIGRbYl07ZWxzZSBkZWxldGUgdGhpcy5fZXZlbnRzO3JldHVybiB0aGlzfSxkLnJlbW92ZUFsbExpc3RlbmVycz1jKFwicmVtb3ZlRXZlbnRcIiksZC5lbWl0RXZlbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoYSk7Zm9yKGUgaW4gZylpZihnLmhhc093blByb3BlcnR5KGUpKWZvcihkPWdbZV0ubGVuZ3RoO2QtLTspYz1nW2VdW2RdLGMub25jZT09PSEwJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGEsYy5saXN0ZW5lciksZj1jLmxpc3RlbmVyLmFwcGx5KHRoaXMsYnx8W10pLGY9PT10aGlzLl9nZXRPbmNlUmV0dXJuVmFsdWUoKSYmdGhpcy5yZW1vdmVMaXN0ZW5lcihhLGMubGlzdGVuZXIpO3JldHVybiB0aGlzfSxkLnRyaWdnZXI9YyhcImVtaXRFdmVudFwiKSxkLmVtaXQ9ZnVuY3Rpb24oYSl7dmFyIGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiB0aGlzLmVtaXRFdmVudChhLGIpfSxkLnNldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fb25jZVJldHVyblZhbHVlPWEsdGhpc30sZC5fZ2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzT3duUHJvcGVydHkoXCJfb25jZVJldHVyblZhbHVlXCIpP3RoaXMuX29uY2VSZXR1cm5WYWx1ZTohMH0sZC5fZ2V0RXZlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSl9LGEubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBlLkV2ZW50RW1pdHRlcj1mLGF9LFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJldmVudEVtaXR0ZXIvRXZlbnRFbWl0dGVyXCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gYX0pOlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWE6ZS5FdmVudEVtaXR0ZXI9YX0uY2FsbCh0aGlzKSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe2lmKGEpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBkW2FdKXJldHVybiBhO2E9YS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSthLnNsaWNlKDEpO2Zvcih2YXIgYixlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWlmKGI9Y1tlXSthLFwic3RyaW5nXCI9PXR5cGVvZiBkW2JdKXJldHVybiBifX12YXIgYz1cIldlYmtpdCBNb3ogbXMgTXMgT1wiLnNwbGl0KFwiIFwiKSxkPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZ2V0LXN0eWxlLXByb3BlcnR5L2dldC1zdHlsZS1wcm9wZXJ0eVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGJ9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iOmEuZ2V0U3R5bGVQcm9wZXJ0eT1ifSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9cGFyc2VGbG9hdChhKSxjPS0xPT09YS5pbmRleE9mKFwiJVwiKSYmIWlzTmFOKGIpO3JldHVybiBjJiZifWZ1bmN0aW9uIGMoKXt9ZnVuY3Rpb24gZCgpe2Zvcih2YXIgYT17d2lkdGg6MCxoZWlnaHQ6MCxpbm5lcldpZHRoOjAsaW5uZXJIZWlnaHQ6MCxvdXRlcldpZHRoOjAsb3V0ZXJIZWlnaHQ6MH0sYj0wLGM9Zy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9Z1tiXTthW2RdPTB9cmV0dXJuIGF9ZnVuY3Rpb24gZShjKXtmdW5jdGlvbiBlKCl7aWYoIW0pe209ITA7dmFyIGQ9YS5nZXRDb21wdXRlZFN0eWxlO2lmKGo9ZnVuY3Rpb24oKXt2YXIgYT1kP2Z1bmN0aW9uKGEpe3JldHVybiBkKGEsbnVsbCl9OmZ1bmN0aW9uKGEpe3JldHVybiBhLmN1cnJlbnRTdHlsZX07cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWEoYik7cmV0dXJuIGN8fGYoXCJTdHlsZSByZXR1cm5lZCBcIitjK1wiLiBBcmUgeW91IHJ1bm5pbmcgdGhpcyBjb2RlIGluIGEgaGlkZGVuIGlmcmFtZSBvbiBGaXJlZm94PyBTZWUgaHR0cDovL2JpdC5seS9nZXRzaXplYnVnMVwiKSxjfX0oKSxrPWMoXCJib3hTaXppbmdcIikpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5zdHlsZS53aWR0aD1cIjIwMHB4XCIsZS5zdHlsZS5wYWRkaW5nPVwiMXB4IDJweCAzcHggNHB4XCIsZS5zdHlsZS5ib3JkZXJTdHlsZT1cInNvbGlkXCIsZS5zdHlsZS5ib3JkZXJXaWR0aD1cIjFweCAycHggM3B4IDRweFwiLGUuc3R5bGVba109XCJib3JkZXItYm94XCI7dmFyIGc9ZG9jdW1lbnQuYm9keXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2cuYXBwZW5kQ2hpbGQoZSk7dmFyIGg9aihlKTtsPTIwMD09PWIoaC53aWR0aCksZy5yZW1vdmVDaGlsZChlKX19fWZ1bmN0aW9uIGgoYSl7aWYoZSgpLFwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGEpKSxhJiZcIm9iamVjdFwiPT10eXBlb2YgYSYmYS5ub2RlVHlwZSl7dmFyIGM9aihhKTtpZihcIm5vbmVcIj09PWMuZGlzcGxheSlyZXR1cm4gZCgpO3ZhciBmPXt9O2Yud2lkdGg9YS5vZmZzZXRXaWR0aCxmLmhlaWdodD1hLm9mZnNldEhlaWdodDtmb3IodmFyIGg9Zi5pc0JvcmRlckJveD0hKCFrfHwhY1trXXx8XCJib3JkZXItYm94XCIhPT1jW2tdKSxtPTAsbj1nLmxlbmd0aDtuPm07bSsrKXt2YXIgbz1nW21dLHA9Y1tvXTtwPWkoYSxwKTt2YXIgcT1wYXJzZUZsb2F0KHApO2Zbb109aXNOYU4ocSk/MDpxfXZhciByPWYucGFkZGluZ0xlZnQrZi5wYWRkaW5nUmlnaHQscz1mLnBhZGRpbmdUb3ArZi5wYWRkaW5nQm90dG9tLHQ9Zi5tYXJnaW5MZWZ0K2YubWFyZ2luUmlnaHQsdT1mLm1hcmdpblRvcCtmLm1hcmdpbkJvdHRvbSx2PWYuYm9yZGVyTGVmdFdpZHRoK2YuYm9yZGVyUmlnaHRXaWR0aCx3PWYuYm9yZGVyVG9wV2lkdGgrZi5ib3JkZXJCb3R0b21XaWR0aCx4PWgmJmwseT1iKGMud2lkdGgpO3khPT0hMSYmKGYud2lkdGg9eSsoeD8wOnIrdikpO3ZhciB6PWIoYy5oZWlnaHQpO3JldHVybiB6IT09ITEmJihmLmhlaWdodD16Kyh4PzA6cyt3KSksZi5pbm5lcldpZHRoPWYud2lkdGgtKHIrdiksZi5pbm5lckhlaWdodD1mLmhlaWdodC0ocyt3KSxmLm91dGVyV2lkdGg9Zi53aWR0aCt0LGYub3V0ZXJIZWlnaHQ9Zi5oZWlnaHQrdSxmfX1mdW5jdGlvbiBpKGIsYyl7aWYoYS5nZXRDb21wdXRlZFN0eWxlfHwtMT09PWMuaW5kZXhPZihcIiVcIikpcmV0dXJuIGM7dmFyIGQ9Yi5zdHlsZSxlPWQubGVmdCxmPWIucnVudGltZVN0eWxlLGc9ZiYmZi5sZWZ0O3JldHVybiBnJiYoZi5sZWZ0PWIuY3VycmVudFN0eWxlLmxlZnQpLGQubGVmdD1jLGM9ZC5waXhlbExlZnQsZC5sZWZ0PWUsZyYmKGYubGVmdD1nKSxjfXZhciBqLGssbCxtPSExO3JldHVybiBofXZhciBmPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlP2M6ZnVuY3Rpb24oYSl7Y29uc29sZS5lcnJvcihhKX0sZz1bXCJwYWRkaW5nTGVmdFwiLFwicGFkZGluZ1JpZ2h0XCIsXCJwYWRkaW5nVG9wXCIsXCJwYWRkaW5nQm90dG9tXCIsXCJtYXJnaW5MZWZ0XCIsXCJtYXJnaW5SaWdodFwiLFwibWFyZ2luVG9wXCIsXCJtYXJnaW5Cb3R0b21cIixcImJvcmRlckxlZnRXaWR0aFwiLFwiYm9yZGVyUmlnaHRXaWR0aFwiLFwiYm9yZGVyVG9wV2lkdGhcIixcImJvcmRlckJvdHRvbVdpZHRoXCJdO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiLFtcImdldC1zdHlsZS1wcm9wZXJ0eS9nZXQtc3R5bGUtcHJvcGVydHlcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwiZGVzYW5kcm8tZ2V0LXN0eWxlLXByb3BlcnR5XCIpKTphLmdldFNpemU9ZShhLmdldFN0eWxlUHJvcGVydHkpfSh3aW5kb3cpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gYVtnXShiKX1mdW5jdGlvbiBjKGEpe2lmKCFhLnBhcmVudE5vZGUpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtiLmFwcGVuZENoaWxkKGEpfX1mdW5jdGlvbiBkKGEsYil7YyhhKTtmb3IodmFyIGQ9YS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoYiksZT0wLGY9ZC5sZW5ndGg7Zj5lO2UrKylpZihkW2VdPT09YSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBlKGEsZCl7cmV0dXJuIGMoYSksYihhLGQpfXZhciBmLGc9ZnVuY3Rpb24oKXtpZihhLm1hdGNoZXNTZWxlY3RvcilyZXR1cm5cIm1hdGNoZXNTZWxlY3RvclwiO2Zvcih2YXIgYj1bXCJ3ZWJraXRcIixcIm1velwiLFwibXNcIixcIm9cIl0sYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl7dmFyIGU9YltjXSxmPWUrXCJNYXRjaGVzU2VsZWN0b3JcIjtpZihhW2ZdKXJldHVybiBmfX0oKTtpZihnKXt2YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGk9YihoLFwiZGl2XCIpO2Y9aT9iOmV9ZWxzZSBmPWQ7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIm1hdGNoZXMtc2VsZWN0b3IvbWF0Y2hlcy1zZWxlY3RvclwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1mOndpbmRvdy5tYXRjaGVzU2VsZWN0b3I9Zn0oRWxlbWVudC5wcm90b3R5cGUpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtmb3IodmFyIGMgaW4gYilhW2NdPWJbY107cmV0dXJuIGF9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4gYj1udWxsLCEwfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEucmVwbGFjZSgvKFtBLVpdKS9nLGZ1bmN0aW9uKGEpe3JldHVyblwiLVwiK2EudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIGUoYSxlLGYpe2Z1bmN0aW9uIGgoYSxiKXthJiYodGhpcy5lbGVtZW50PWEsdGhpcy5sYXlvdXQ9Yix0aGlzLnBvc2l0aW9uPXt4OjAseTowfSx0aGlzLl9jcmVhdGUoKSl9dmFyIGk9ZihcInRyYW5zaXRpb25cIiksaj1mKFwidHJhbnNmb3JtXCIpLGs9aSYmaixsPSEhZihcInBlcnNwZWN0aXZlXCIpLG09e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm90cmFuc2l0aW9uZW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn1baV0sbj1bXCJ0cmFuc2Zvcm1cIixcInRyYW5zaXRpb25cIixcInRyYW5zaXRpb25EdXJhdGlvblwiLFwidHJhbnNpdGlvblByb3BlcnR5XCJdLG89ZnVuY3Rpb24oKXtmb3IodmFyIGE9e30sYj0wLGM9bi5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9bltiXSxlPWYoZCk7ZSYmZSE9PWQmJihhW2RdPWUpfXJldHVybiBhfSgpO2IoaC5wcm90b3R5cGUsYS5wcm90b3R5cGUpLGgucHJvdG90eXBlLl9jcmVhdGU9ZnVuY3Rpb24oKXt0aGlzLl90cmFuc249e2luZ1Byb3BlcnRpZXM6e30sY2xlYW46e30sb25FbmQ6e319LHRoaXMuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCJ9KX0saC5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9XCJvblwiK2EudHlwZTt0aGlzW2JdJiZ0aGlzW2JdKGEpfSxoLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPWUodGhpcy5lbGVtZW50KX0saC5wcm90b3R5cGUuY3NzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudC5zdHlsZTtmb3IodmFyIGMgaW4gYSl7dmFyIGQ9b1tjXXx8YztiW2RdPWFbY119fSxoLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBhPWcodGhpcy5lbGVtZW50KSxiPXRoaXMubGF5b3V0Lm9wdGlvbnMsYz1iLmlzT3JpZ2luTGVmdCxkPWIuaXNPcmlnaW5Ub3AsZT1wYXJzZUludChhW2M/XCJsZWZ0XCI6XCJyaWdodFwiXSwxMCksZj1wYXJzZUludChhW2Q/XCJ0b3BcIjpcImJvdHRvbVwiXSwxMCk7ZT1pc05hTihlKT8wOmUsZj1pc05hTihmKT8wOmY7dmFyIGg9dGhpcy5sYXlvdXQuc2l6ZTtlLT1jP2gucGFkZGluZ0xlZnQ6aC5wYWRkaW5nUmlnaHQsZi09ZD9oLnBhZGRpbmdUb3A6aC5wYWRkaW5nQm90dG9tLHRoaXMucG9zaXRpb24ueD1lLHRoaXMucG9zaXRpb24ueT1mfSxoLnByb3RvdHlwZS5sYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciBhPXRoaXMubGF5b3V0LnNpemUsYj10aGlzLmxheW91dC5vcHRpb25zLGM9e307Yi5pc09yaWdpbkxlZnQ/KGMubGVmdD10aGlzLnBvc2l0aW9uLngrYS5wYWRkaW5nTGVmdCtcInB4XCIsYy5yaWdodD1cIlwiKTooYy5yaWdodD10aGlzLnBvc2l0aW9uLngrYS5wYWRkaW5nUmlnaHQrXCJweFwiLGMubGVmdD1cIlwiKSxiLmlzT3JpZ2luVG9wPyhjLnRvcD10aGlzLnBvc2l0aW9uLnkrYS5wYWRkaW5nVG9wK1wicHhcIixjLmJvdHRvbT1cIlwiKTooYy5ib3R0b209dGhpcy5wb3NpdGlvbi55K2EucGFkZGluZ0JvdHRvbStcInB4XCIsYy50b3A9XCJcIiksdGhpcy5jc3MoYyksdGhpcy5lbWl0RXZlbnQoXCJsYXlvdXRcIixbdGhpc10pfTt2YXIgcD1sP2Z1bmN0aW9uKGEsYil7cmV0dXJuXCJ0cmFuc2xhdGUzZChcIithK1wicHgsIFwiK2IrXCJweCwgMClcIn06ZnVuY3Rpb24oYSxiKXtyZXR1cm5cInRyYW5zbGF0ZShcIithK1wicHgsIFwiK2IrXCJweClcIn07aC5wcm90b3R5cGUuX3RyYW5zaXRpb25Ubz1mdW5jdGlvbihhLGIpe3RoaXMuZ2V0UG9zaXRpb24oKTt2YXIgYz10aGlzLnBvc2l0aW9uLngsZD10aGlzLnBvc2l0aW9uLnksZT1wYXJzZUludChhLDEwKSxmPXBhcnNlSW50KGIsMTApLGc9ZT09PXRoaXMucG9zaXRpb24ueCYmZj09PXRoaXMucG9zaXRpb24ueTtpZih0aGlzLnNldFBvc2l0aW9uKGEsYiksZyYmIXRoaXMuaXNUcmFuc2l0aW9uaW5nKXJldHVybiB2b2lkIHRoaXMubGF5b3V0UG9zaXRpb24oKTt2YXIgaD1hLWMsaT1iLWQsaj17fSxrPXRoaXMubGF5b3V0Lm9wdGlvbnM7aD1rLmlzT3JpZ2luTGVmdD9oOi1oLGk9ay5pc09yaWdpblRvcD9pOi1pLGoudHJhbnNmb3JtPXAoaCxpKSx0aGlzLnRyYW5zaXRpb24oe3RvOmosb25UcmFuc2l0aW9uRW5kOnt0cmFuc2Zvcm06dGhpcy5sYXlvdXRQb3NpdGlvbn0saXNDbGVhbmluZzohMH0pfSxoLnByb3RvdHlwZS5nb1RvPWZ1bmN0aW9uKGEsYil7dGhpcy5zZXRQb3NpdGlvbihhLGIpLHRoaXMubGF5b3V0UG9zaXRpb24oKX0saC5wcm90b3R5cGUubW92ZVRvPWs/aC5wcm90b3R5cGUuX3RyYW5zaXRpb25UbzpoLnByb3RvdHlwZS5nb1RvLGgucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKGEsYil7dGhpcy5wb3NpdGlvbi54PXBhcnNlSW50KGEsMTApLHRoaXMucG9zaXRpb24ueT1wYXJzZUludChiLDEwKX0saC5wcm90b3R5cGUuX25vblRyYW5zaXRpb249ZnVuY3Rpb24oYSl7dGhpcy5jc3MoYS50byksYS5pc0NsZWFuaW5nJiZ0aGlzLl9yZW1vdmVTdHlsZXMoYS50byk7Zm9yKHZhciBiIGluIGEub25UcmFuc2l0aW9uRW5kKWEub25UcmFuc2l0aW9uRW5kW2JdLmNhbGwodGhpcyl9LGgucHJvdG90eXBlLl90cmFuc2l0aW9uPWZ1bmN0aW9uKGEpe2lmKCFwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKSlyZXR1cm4gdm9pZCB0aGlzLl9ub25UcmFuc2l0aW9uKGEpO3ZhciBiPXRoaXMuX3RyYW5zbjtmb3IodmFyIGMgaW4gYS5vblRyYW5zaXRpb25FbmQpYi5vbkVuZFtjXT1hLm9uVHJhbnNpdGlvbkVuZFtjXTtmb3IoYyBpbiBhLnRvKWIuaW5nUHJvcGVydGllc1tjXT0hMCxhLmlzQ2xlYW5pbmcmJihiLmNsZWFuW2NdPSEwKTtpZihhLmZyb20pe3RoaXMuY3NzKGEuZnJvbSk7dmFyIGQ9dGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodDtkPW51bGx9dGhpcy5lbmFibGVUcmFuc2l0aW9uKGEudG8pLHRoaXMuY3NzKGEudG8pLHRoaXMuaXNUcmFuc2l0aW9uaW5nPSEwfTt2YXIgcT1qJiZkKGopK1wiLG9wYWNpdHlcIjtoLnByb3RvdHlwZS5lbmFibGVUcmFuc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5pc1RyYW5zaXRpb25pbmd8fCh0aGlzLmNzcyh7dHJhbnNpdGlvblByb3BlcnR5OnEsdHJhbnNpdGlvbkR1cmF0aW9uOnRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9ufSksdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIobSx0aGlzLCExKSl9LGgucHJvdG90eXBlLnRyYW5zaXRpb249aC5wcm90b3R5cGVbaT9cIl90cmFuc2l0aW9uXCI6XCJfbm9uVHJhbnNpdGlvblwiXSxoLnByb3RvdHlwZS5vbndlYmtpdFRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oYSl7dGhpcy5vbnRyYW5zaXRpb25lbmQoYSl9LGgucHJvdG90eXBlLm9ub3RyYW5zaXRpb25lbmQ9ZnVuY3Rpb24oYSl7dGhpcy5vbnRyYW5zaXRpb25lbmQoYSl9O3ZhciByPXtcIi13ZWJraXQtdHJhbnNmb3JtXCI6XCJ0cmFuc2Zvcm1cIixcIi1tb3otdHJhbnNmb3JtXCI6XCJ0cmFuc2Zvcm1cIixcIi1vLXRyYW5zZm9ybVwiOlwidHJhbnNmb3JtXCJ9O2gucHJvdG90eXBlLm9udHJhbnNpdGlvbmVuZD1mdW5jdGlvbihhKXtpZihhLnRhcmdldD09PXRoaXMuZWxlbWVudCl7dmFyIGI9dGhpcy5fdHJhbnNuLGQ9clthLnByb3BlcnR5TmFtZV18fGEucHJvcGVydHlOYW1lO2lmKGRlbGV0ZSBiLmluZ1Byb3BlcnRpZXNbZF0sYyhiLmluZ1Byb3BlcnRpZXMpJiZ0aGlzLmRpc2FibGVUcmFuc2l0aW9uKCksZCBpbiBiLmNsZWFuJiYodGhpcy5lbGVtZW50LnN0eWxlW2EucHJvcGVydHlOYW1lXT1cIlwiLGRlbGV0ZSBiLmNsZWFuW2RdKSxkIGluIGIub25FbmQpe3ZhciBlPWIub25FbmRbZF07ZS5jYWxsKHRoaXMpLGRlbGV0ZSBiLm9uRW5kW2RdfXRoaXMuZW1pdEV2ZW50KFwidHJhbnNpdGlvbkVuZFwiLFt0aGlzXSl9fSxoLnByb3RvdHlwZS5kaXNhYmxlVHJhbnNpdGlvbj1mdW5jdGlvbigpe3RoaXMucmVtb3ZlVHJhbnNpdGlvblN0eWxlcygpLHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKG0sdGhpcywhMSksdGhpcy5pc1RyYW5zaXRpb25pbmc9ITF9LGgucHJvdG90eXBlLl9yZW1vdmVTdHlsZXM9ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBjIGluIGEpYltjXT1cIlwiO3RoaXMuY3NzKGIpfTt2YXIgcz17dHJhbnNpdGlvblByb3BlcnR5OlwiXCIsdHJhbnNpdGlvbkR1cmF0aW9uOlwiXCJ9O3JldHVybiBoLnByb3RvdHlwZS5yZW1vdmVUcmFuc2l0aW9uU3R5bGVzPWZ1bmN0aW9uKCl7dGhpcy5jc3Mocyl9LGgucHJvdG90eXBlLnJlbW92ZUVsZW09ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMuZW1pdEV2ZW50KFwicmVtb3ZlXCIsW3RoaXNdKX0saC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7aWYoIWl8fCFwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKSlyZXR1cm4gdm9pZCB0aGlzLnJlbW92ZUVsZW0oKTt2YXIgYT10aGlzO3RoaXMub24oXCJ0cmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtyZXR1cm4gYS5yZW1vdmVFbGVtKCksITB9KSx0aGlzLmhpZGUoKX0saC5wcm90b3R5cGUucmV2ZWFsPWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuaXNIaWRkZW4sdGhpcy5jc3Moe2Rpc3BsYXk6XCJcIn0pO3ZhciBhPXRoaXMubGF5b3V0Lm9wdGlvbnM7dGhpcy50cmFuc2l0aW9uKHtmcm9tOmEuaGlkZGVuU3R5bGUsdG86YS52aXNpYmxlU3R5bGUsaXNDbGVhbmluZzohMH0pfSxoLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5pc0hpZGRlbj0hMCx0aGlzLmNzcyh7ZGlzcGxheTpcIlwifSk7dmFyIGE9dGhpcy5sYXlvdXQub3B0aW9uczt0aGlzLnRyYW5zaXRpb24oe2Zyb206YS52aXNpYmxlU3R5bGUsdG86YS5oaWRkZW5TdHlsZSxpc0NsZWFuaW5nOiEwLG9uVHJhbnNpdGlvbkVuZDp7b3BhY2l0eTpmdW5jdGlvbigpe3RoaXMuaXNIaWRkZW4mJnRoaXMuY3NzKHtkaXNwbGF5Olwibm9uZVwifSl9fX0pfSxoLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5jc3Moe3Bvc2l0aW9uOlwiXCIsbGVmdDpcIlwiLHJpZ2h0OlwiXCIsdG9wOlwiXCIsYm90dG9tOlwiXCIsdHJhbnNpdGlvbjpcIlwiLHRyYW5zZm9ybTpcIlwifSl9LGh9dmFyIGY9YS5nZXRDb21wdXRlZFN0eWxlLGc9Zj9mdW5jdGlvbihhKXtyZXR1cm4gZihhLG51bGwpfTpmdW5jdGlvbihhKXtyZXR1cm4gYS5jdXJyZW50U3R5bGV9O1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJvdXRsYXllci9pdGVtXCIsW1wiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlclwiLFwiZ2V0LXNpemUvZ2V0LXNpemVcIixcImdldC1zdHlsZS1wcm9wZXJ0eS9nZXQtc3R5bGUtcHJvcGVydHlcIl0sZSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZShyZXF1aXJlKFwid29sZnk4Ny1ldmVudGVtaXR0ZXJcIikscmVxdWlyZShcImdldC1zaXplXCIpLHJlcXVpcmUoXCJkZXNhbmRyby1nZXQtc3R5bGUtcHJvcGVydHlcIikpOihhLk91dGxheWVyPXt9LGEuT3V0bGF5ZXIuSXRlbT1lKGEuRXZlbnRFbWl0dGVyLGEuZ2V0U2l6ZSxhLmdldFN0eWxlUHJvcGVydHkpKX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7Zm9yKHZhciBjIGluIGIpYVtjXT1iW2NdO3JldHVybiBhfWZ1bmN0aW9uIGMoYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09bC5jYWxsKGEpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9W107aWYoYyhhKSliPWE7ZWxzZSBpZihhJiZcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGgpZm9yKHZhciBkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWIucHVzaChhW2RdKTtlbHNlIGIucHVzaChhKTtyZXR1cm4gYn1mdW5jdGlvbiBlKGEsYil7dmFyIGM9bihiLGEpOy0xIT09YyYmYi5zcGxpY2UoYywxKX1mdW5jdGlvbiBmKGEpe3JldHVybiBhLnJlcGxhY2UoLyguKShbQS1aXSkvZyxmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIrXCItXCIrY30pLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZyhjLGcsbCxuLG8scCl7ZnVuY3Rpb24gcShhLGMpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1oLnF1ZXJ5U2VsZWN0b3IoYSkpLCFhfHwhbShhKSlyZXR1cm4gdm9pZChpJiZpLmVycm9yKFwiQmFkIFwiK3RoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlK1wiIGVsZW1lbnQ6IFwiK2EpKTt0aGlzLmVsZW1lbnQ9YSx0aGlzLm9wdGlvbnM9Yih7fSx0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzKSx0aGlzLm9wdGlvbihjKTt2YXIgZD0rK3I7dGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRD1kLHNbZF09dGhpcyx0aGlzLl9jcmVhdGUoKSx0aGlzLm9wdGlvbnMuaXNJbml0TGF5b3V0JiZ0aGlzLmxheW91dCgpfXZhciByPTAscz17fTtyZXR1cm4gcS5uYW1lc3BhY2U9XCJvdXRsYXllclwiLHEuSXRlbT1wLHEuZGVmYXVsdHM9e2NvbnRhaW5lclN0eWxlOntwb3NpdGlvbjpcInJlbGF0aXZlXCJ9LGlzSW5pdExheW91dDohMCxpc09yaWdpbkxlZnQ6ITAsaXNPcmlnaW5Ub3A6ITAsaXNSZXNpemVCb3VuZDohMCxpc1Jlc2l6aW5nQ29udGFpbmVyOiEwLHRyYW5zaXRpb25EdXJhdGlvbjpcIjAuNHNcIixoaWRkZW5TdHlsZTp7b3BhY2l0eTowLHRyYW5zZm9ybTpcInNjYWxlKDAuMDAxKVwifSx2aXNpYmxlU3R5bGU6e29wYWNpdHk6MSx0cmFuc2Zvcm06XCJzY2FsZSgxKVwifX0sYihxLnByb3RvdHlwZSxsLnByb3RvdHlwZSkscS5wcm90b3R5cGUub3B0aW9uPWZ1bmN0aW9uKGEpe2IodGhpcy5vcHRpb25zLGEpfSxxLnByb3RvdHlwZS5fY3JlYXRlPWZ1bmN0aW9uKCl7dGhpcy5yZWxvYWRJdGVtcygpLHRoaXMuc3RhbXBzPVtdLHRoaXMuc3RhbXAodGhpcy5vcHRpb25zLnN0YW1wKSxiKHRoaXMuZWxlbWVudC5zdHlsZSx0aGlzLm9wdGlvbnMuY29udGFpbmVyU3R5bGUpLHRoaXMub3B0aW9ucy5pc1Jlc2l6ZUJvdW5kJiZ0aGlzLmJpbmRSZXNpemUoKX0scS5wcm90b3R5cGUucmVsb2FkSXRlbXM9ZnVuY3Rpb24oKXt0aGlzLml0ZW1zPXRoaXMuX2l0ZW1pemUodGhpcy5lbGVtZW50LmNoaWxkcmVuKX0scS5wcm90b3R5cGUuX2l0ZW1pemU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuX2ZpbHRlckZpbmRJdGVtRWxlbWVudHMoYSksYz10aGlzLmNvbnN0cnVjdG9yLkl0ZW0sZD1bXSxlPTAsZj1iLmxlbmd0aDtmPmU7ZSsrKXt2YXIgZz1iW2VdLGg9bmV3IGMoZyx0aGlzKTtkLnB1c2goaCl9cmV0dXJuIGR9LHEucHJvdG90eXBlLl9maWx0ZXJGaW5kSXRlbUVsZW1lbnRzPWZ1bmN0aW9uKGEpe2E9ZChhKTtmb3IodmFyIGI9dGhpcy5vcHRpb25zLml0ZW1TZWxlY3RvcixjPVtdLGU9MCxmPWEubGVuZ3RoO2Y+ZTtlKyspe3ZhciBnPWFbZV07aWYobShnKSlpZihiKXtvKGcsYikmJmMucHVzaChnKTtmb3IodmFyIGg9Zy5xdWVyeVNlbGVjdG9yQWxsKGIpLGk9MCxqPWgubGVuZ3RoO2o+aTtpKyspYy5wdXNoKGhbaV0pfWVsc2UgYy5wdXNoKGcpfXJldHVybiBjfSxxLnByb3RvdHlwZS5nZXRJdGVtRWxlbWVudHM9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sYj0wLGM9dGhpcy5pdGVtcy5sZW5ndGg7Yz5iO2IrKylhLnB1c2godGhpcy5pdGVtc1tiXS5lbGVtZW50KTtyZXR1cm4gYX0scS5wcm90b3R5cGUubGF5b3V0PWZ1bmN0aW9uKCl7dGhpcy5fcmVzZXRMYXlvdXQoKSx0aGlzLl9tYW5hZ2VTdGFtcHMoKTt2YXIgYT12b2lkIDAhPT10aGlzLm9wdGlvbnMuaXNMYXlvdXRJbnN0YW50P3RoaXMub3B0aW9ucy5pc0xheW91dEluc3RhbnQ6IXRoaXMuX2lzTGF5b3V0SW5pdGVkO3RoaXMubGF5b3V0SXRlbXModGhpcy5pdGVtcyxhKSx0aGlzLl9pc0xheW91dEluaXRlZD0hMH0scS5wcm90b3R5cGUuX2luaXQ9cS5wcm90b3R5cGUubGF5b3V0LHEucHJvdG90eXBlLl9yZXNldExheW91dD1mdW5jdGlvbigpe3RoaXMuZ2V0U2l6ZSgpfSxxLnByb3RvdHlwZS5nZXRTaXplPWZ1bmN0aW9uKCl7dGhpcy5zaXplPW4odGhpcy5lbGVtZW50KX0scS5wcm90b3R5cGUuX2dldE1lYXN1cmVtZW50PWZ1bmN0aW9uKGEsYil7dmFyIGMsZD10aGlzLm9wdGlvbnNbYV07ZD8oXCJzdHJpbmdcIj09dHlwZW9mIGQ/Yz10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihkKTptKGQpJiYoYz1kKSx0aGlzW2FdPWM/bihjKVtiXTpkKTp0aGlzW2FdPTB9LHEucHJvdG90eXBlLmxheW91dEl0ZW1zPWZ1bmN0aW9uKGEsYil7YT10aGlzLl9nZXRJdGVtc0ZvckxheW91dChhKSx0aGlzLl9sYXlvdXRJdGVtcyhhLGIpLHRoaXMuX3Bvc3RMYXlvdXQoKX0scS5wcm90b3R5cGUuX2dldEl0ZW1zRm9yTGF5b3V0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdO2UuaXNJZ25vcmVkfHxiLnB1c2goZSl9cmV0dXJuIGJ9LHEucHJvdG90eXBlLl9sYXlvdXRJdGVtcz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtkLmVtaXRFdmVudChcImxheW91dENvbXBsZXRlXCIsW2QsYV0pfXZhciBkPXRoaXM7aWYoIWF8fCFhLmxlbmd0aClyZXR1cm4gdm9pZCBjKCk7dGhpcy5faXRlbXNPbihhLFwibGF5b3V0XCIsYyk7Zm9yKHZhciBlPVtdLGY9MCxnPWEubGVuZ3RoO2c+ZjtmKyspe3ZhciBoPWFbZl0saT10aGlzLl9nZXRJdGVtTGF5b3V0UG9zaXRpb24oaCk7aS5pdGVtPWgsaS5pc0luc3RhbnQ9Ynx8aC5pc0xheW91dEluc3RhbnQsZS5wdXNoKGkpfXRoaXMuX3Byb2Nlc3NMYXlvdXRRdWV1ZShlKX0scS5wcm90b3R5cGUuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybnt4OjAseTowfX0scS5wcm90b3R5cGUuX3Byb2Nlc3NMYXlvdXRRdWV1ZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspe3ZhciBkPWFbYl07dGhpcy5fcG9zaXRpb25JdGVtKGQuaXRlbSxkLngsZC55LGQuaXNJbnN0YW50KX19LHEucHJvdG90eXBlLl9wb3NpdGlvbkl0ZW09ZnVuY3Rpb24oYSxiLGMsZCl7ZD9hLmdvVG8oYixjKTphLm1vdmVUbyhiLGMpfSxxLnByb3RvdHlwZS5fcG9zdExheW91dD1mdW5jdGlvbigpe3RoaXMucmVzaXplQ29udGFpbmVyKCl9LHEucHJvdG90eXBlLnJlc2l6ZUNvbnRhaW5lcj1mdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5pc1Jlc2l6aW5nQ29udGFpbmVyKXt2YXIgYT10aGlzLl9nZXRDb250YWluZXJTaXplKCk7YSYmKHRoaXMuX3NldENvbnRhaW5lck1lYXN1cmUoYS53aWR0aCwhMCksdGhpcy5fc2V0Q29udGFpbmVyTWVhc3VyZShhLmhlaWdodCwhMSkpfX0scS5wcm90b3R5cGUuX2dldENvbnRhaW5lclNpemU9ayxxLnByb3RvdHlwZS5fc2V0Q29udGFpbmVyTWVhc3VyZT1mdW5jdGlvbihhLGIpe2lmKHZvaWQgMCE9PWEpe3ZhciBjPXRoaXMuc2l6ZTtjLmlzQm9yZGVyQm94JiYoYSs9Yj9jLnBhZGRpbmdMZWZ0K2MucGFkZGluZ1JpZ2h0K2MuYm9yZGVyTGVmdFdpZHRoK2MuYm9yZGVyUmlnaHRXaWR0aDpjLnBhZGRpbmdCb3R0b20rYy5wYWRkaW5nVG9wK2MuYm9yZGVyVG9wV2lkdGgrYy5ib3JkZXJCb3R0b21XaWR0aCksYT1NYXRoLm1heChhLDApLHRoaXMuZWxlbWVudC5zdHlsZVtiP1wid2lkdGhcIjpcImhlaWdodFwiXT1hK1wicHhcIn19LHEucHJvdG90eXBlLl9pdGVtc09uPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7cmV0dXJuIGUrKyxlPT09ZiYmYy5jYWxsKGcpLCEwfWZvcih2YXIgZT0wLGY9YS5sZW5ndGgsZz10aGlzLGg9MCxpPWEubGVuZ3RoO2k+aDtoKyspe3ZhciBqPWFbaF07ai5vbihiLGQpfX0scS5wcm90b3R5cGUuaWdub3JlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0SXRlbShhKTtiJiYoYi5pc0lnbm9yZWQ9ITApfSxxLnByb3RvdHlwZS51bmlnbm9yZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEl0ZW0oYSk7YiYmZGVsZXRlIGIuaXNJZ25vcmVkfSxxLnByb3RvdHlwZS5zdGFtcD1mdW5jdGlvbihhKXtpZihhPXRoaXMuX2ZpbmQoYSkpe3RoaXMuc3RhbXBzPXRoaXMuc3RhbXBzLmNvbmNhdChhKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspe3ZhciBkPWFbYl07dGhpcy5pZ25vcmUoZCl9fX0scS5wcm90b3R5cGUudW5zdGFtcD1mdW5jdGlvbihhKXtpZihhPXRoaXMuX2ZpbmQoYSkpZm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXt2YXIgZD1hW2JdO2UoZCx0aGlzLnN0YW1wcyksdGhpcy51bmlnbm9yZShkKX19LHEucHJvdG90eXBlLl9maW5kPWZ1bmN0aW9uKGEpe3JldHVybiBhPyhcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYSkpLGE9ZChhKSk6dm9pZCAwfSxxLnByb3RvdHlwZS5fbWFuYWdlU3RhbXBzPWZ1bmN0aW9uKCl7aWYodGhpcy5zdGFtcHMmJnRoaXMuc3RhbXBzLmxlbmd0aCl7dGhpcy5fZ2V0Qm91bmRpbmdSZWN0KCk7Zm9yKHZhciBhPTAsYj10aGlzLnN0YW1wcy5sZW5ndGg7Yj5hO2ErKyl7dmFyIGM9dGhpcy5zdGFtcHNbYV07dGhpcy5fbWFuYWdlU3RhbXAoYyl9fX0scS5wcm90b3R5cGUuX2dldEJvdW5kaW5nUmVjdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxiPXRoaXMuc2l6ZTt0aGlzLl9ib3VuZGluZ1JlY3Q9e2xlZnQ6YS5sZWZ0K2IucGFkZGluZ0xlZnQrYi5ib3JkZXJMZWZ0V2lkdGgsdG9wOmEudG9wK2IucGFkZGluZ1RvcCtiLmJvcmRlclRvcFdpZHRoLHJpZ2h0OmEucmlnaHQtKGIucGFkZGluZ1JpZ2h0K2IuYm9yZGVyUmlnaHRXaWR0aCksYm90dG9tOmEuYm90dG9tLShiLnBhZGRpbmdCb3R0b20rYi5ib3JkZXJCb3R0b21XaWR0aCl9fSxxLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA9ayxxLnByb3RvdHlwZS5fZ2V0RWxlbWVudE9mZnNldD1mdW5jdGlvbihhKXt2YXIgYj1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGM9dGhpcy5fYm91bmRpbmdSZWN0LGQ9bihhKSxlPXtsZWZ0OmIubGVmdC1jLmxlZnQtZC5tYXJnaW5MZWZ0LHRvcDpiLnRvcC1jLnRvcC1kLm1hcmdpblRvcCxyaWdodDpjLnJpZ2h0LWIucmlnaHQtZC5tYXJnaW5SaWdodCxib3R0b206Yy5ib3R0b20tYi5ib3R0b20tZC5tYXJnaW5Cb3R0b219O3JldHVybiBlfSxxLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbihhKXt2YXIgYj1cIm9uXCIrYS50eXBlO3RoaXNbYl0mJnRoaXNbYl0oYSl9LHEucHJvdG90eXBlLmJpbmRSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzUmVzaXplQm91bmR8fChjLmJpbmQoYSxcInJlc2l6ZVwiLHRoaXMpLHRoaXMuaXNSZXNpemVCb3VuZD0hMCl9LHEucHJvdG90eXBlLnVuYmluZFJlc2l6ZT1mdW5jdGlvbigpe3RoaXMuaXNSZXNpemVCb3VuZCYmYy51bmJpbmQoYSxcInJlc2l6ZVwiLHRoaXMpLHRoaXMuaXNSZXNpemVCb3VuZD0hMX0scS5wcm90b3R5cGUub25yZXNpemU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7Yi5yZXNpemUoKSxkZWxldGUgYi5yZXNpemVUaW1lb3V0fXRoaXMucmVzaXplVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZW91dCk7dmFyIGI9dGhpczt0aGlzLnJlc2l6ZVRpbWVvdXQ9c2V0VGltZW91dChhLDEwMCl9LHEucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbigpe3RoaXMuaXNSZXNpemVCb3VuZCYmdGhpcy5uZWVkc1Jlc2l6ZUxheW91dCgpJiZ0aGlzLmxheW91dCgpfSxxLnByb3RvdHlwZS5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciBhPW4odGhpcy5lbGVtZW50KSxiPXRoaXMuc2l6ZSYmYTtyZXR1cm4gYiYmYS5pbm5lcldpZHRoIT09dGhpcy5zaXplLmlubmVyV2lkdGh9LHEucHJvdG90eXBlLmFkZEl0ZW1zPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2l0ZW1pemUoYSk7cmV0dXJuIGIubGVuZ3RoJiYodGhpcy5pdGVtcz10aGlzLml0ZW1zLmNvbmNhdChiKSksYn0scS5wcm90b3R5cGUuYXBwZW5kZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hZGRJdGVtcyhhKTtiLmxlbmd0aCYmKHRoaXMubGF5b3V0SXRlbXMoYiwhMCksdGhpcy5yZXZlYWwoYikpfSxxLnByb3RvdHlwZS5wcmVwZW5kZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5faXRlbWl6ZShhKTtpZihiLmxlbmd0aCl7dmFyIGM9dGhpcy5pdGVtcy5zbGljZSgwKTt0aGlzLml0ZW1zPWIuY29uY2F0KGMpLHRoaXMuX3Jlc2V0TGF5b3V0KCksdGhpcy5fbWFuYWdlU3RhbXBzKCksdGhpcy5sYXlvdXRJdGVtcyhiLCEwKSx0aGlzLnJldmVhbChiKSx0aGlzLmxheW91dEl0ZW1zKGMpfX0scS5wcm90b3R5cGUucmV2ZWFsPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJmEubGVuZ3RoO2lmKGIpZm9yKHZhciBjPTA7Yj5jO2MrKyl7dmFyIGQ9YVtjXTtkLnJldmVhbCgpfX0scS5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbihhKXt2YXIgYj1hJiZhLmxlbmd0aDtpZihiKWZvcih2YXIgYz0wO2I+YztjKyspe3ZhciBkPWFbY107ZC5oaWRlKCl9fSxxLnByb3RvdHlwZS5nZXRJdGVtPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5pdGVtcy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9dGhpcy5pdGVtc1tiXTtpZihkLmVsZW1lbnQ9PT1hKXJldHVybiBkfX0scS5wcm90b3R5cGUuZ2V0SXRlbXM9ZnVuY3Rpb24oYSl7aWYoYSYmYS5sZW5ndGgpe2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdLGY9dGhpcy5nZXRJdGVtKGUpO2YmJmIucHVzaChmKX1yZXR1cm4gYn19LHEucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXthPWQoYSk7dmFyIGI9dGhpcy5nZXRJdGVtcyhhKTtpZihiJiZiLmxlbmd0aCl7dGhpcy5faXRlbXNPbihiLFwicmVtb3ZlXCIsZnVuY3Rpb24oKXt0aGlzLmVtaXRFdmVudChcInJlbW92ZUNvbXBsZXRlXCIsW3RoaXMsYl0pfSk7Zm9yKHZhciBjPTAsZj1iLmxlbmd0aDtmPmM7YysrKXt2YXIgZz1iW2NdO2cucmVtb3ZlKCksZShnLHRoaXMuaXRlbXMpfX19LHEucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnQuc3R5bGU7YS5oZWlnaHQ9XCJcIixhLnBvc2l0aW9uPVwiXCIsYS53aWR0aD1cIlwiO2Zvcih2YXIgYj0wLGM9dGhpcy5pdGVtcy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9dGhpcy5pdGVtc1tiXTtkLmRlc3Ryb3koKX10aGlzLnVuYmluZFJlc2l6ZSgpO3ZhciBlPXRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ7ZGVsZXRlIHNbZV0sZGVsZXRlIHRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQsaiYmai5yZW1vdmVEYXRhKHRoaXMuZWxlbWVudCx0aGlzLmNvbnN0cnVjdG9yLm5hbWVzcGFjZSl9LHEuZGF0YT1mdW5jdGlvbihhKXt2YXIgYj1hJiZhLm91dGxheWVyR1VJRDtyZXR1cm4gYiYmc1tiXX0scS5jcmVhdGU9ZnVuY3Rpb24oYSxjKXtmdW5jdGlvbiBkKCl7cS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIE9iamVjdC5jcmVhdGU/ZC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShxLnByb3RvdHlwZSk6YihkLnByb3RvdHlwZSxxLnByb3RvdHlwZSksZC5wcm90b3R5cGUuY29uc3RydWN0b3I9ZCxkLmRlZmF1bHRzPWIoe30scS5kZWZhdWx0cyksYihkLmRlZmF1bHRzLGMpLGQucHJvdG90eXBlLnNldHRpbmdzPXt9LGQubmFtZXNwYWNlPWEsZC5kYXRhPXEuZGF0YSxkLkl0ZW09ZnVuY3Rpb24oKXtwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5JdGVtLnByb3RvdHlwZT1uZXcgcCxnKGZ1bmN0aW9uKCl7Zm9yKHZhciBiPWYoYSksYz1oLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtXCIrYiksZT1cImRhdGEtXCIrYitcIi1vcHRpb25zXCIsZz0wLGs9Yy5sZW5ndGg7az5nO2crKyl7dmFyIGwsbT1jW2ddLG49bS5nZXRBdHRyaWJ1dGUoZSk7dHJ5e2w9biYmSlNPTi5wYXJzZShuKX1jYXRjaChvKXtpJiZpLmVycm9yKFwiRXJyb3IgcGFyc2luZyBcIitlK1wiIG9uIFwiK20ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSsobS5pZD9cIiNcIittLmlkOlwiXCIpK1wiOiBcIitvKTtjb250aW51ZX12YXIgcD1uZXcgZChtLGwpO2omJmouZGF0YShtLGEscCl9fSksaiYmai5icmlkZ2V0JiZqLmJyaWRnZXQoYSxkKSxkfSxxLkl0ZW09cCxxfXZhciBoPWEuZG9jdW1lbnQsaT1hLmNvbnNvbGUsaj1hLmpRdWVyeSxrPWZ1bmN0aW9uKCl7fSxsPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsbT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBIVE1MRWxlbWVudHx8XCJvYmplY3RcIj09dHlwZW9mIEhUTUxFbGVtZW50P2Z1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgSFRNTEVsZW1lbnR9OmZ1bmN0aW9uKGEpe3JldHVybiBhJiZcIm9iamVjdFwiPT10eXBlb2YgYSYmMT09PWEubm9kZVR5cGUmJlwic3RyaW5nXCI9PXR5cGVvZiBhLm5vZGVOYW1lfSxuPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGEuaW5kZXhPZihiKX06ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspaWYoYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuLTF9O1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJvdXRsYXllci9vdXRsYXllclwiLFtcImV2ZW50aWUvZXZlbnRpZVwiLFwiZG9jLXJlYWR5L2RvYy1yZWFkeVwiLFwiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlclwiLFwiZ2V0LXNpemUvZ2V0LXNpemVcIixcIm1hdGNoZXMtc2VsZWN0b3IvbWF0Y2hlcy1zZWxlY3RvclwiLFwiLi9pdGVtXCJdLGcpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWcocmVxdWlyZShcImV2ZW50aWVcIikscmVxdWlyZShcImRvYy1yZWFkeVwiKSxyZXF1aXJlKFwid29sZnk4Ny1ldmVudGVtaXR0ZXJcIikscmVxdWlyZShcImdldC1zaXplXCIpLHJlcXVpcmUoXCJkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yXCIpLHJlcXVpcmUoXCIuL2l0ZW1cIikpOmEuT3V0bGF5ZXI9ZyhhLmV2ZW50aWUsYS5kb2NSZWFkeSxhLkV2ZW50RW1pdHRlcixhLmdldFNpemUsYS5tYXRjaGVzU2VsZWN0b3IsYS5PdXRsYXllci5JdGVtKX0od2luZG93KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYil7dmFyIGQ9YS5jcmVhdGUoXCJtYXNvbnJ5XCIpO3JldHVybiBkLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQ9ZnVuY3Rpb24oKXt0aGlzLmdldFNpemUoKSx0aGlzLl9nZXRNZWFzdXJlbWVudChcImNvbHVtbldpZHRoXCIsXCJvdXRlcldpZHRoXCIpLHRoaXMuX2dldE1lYXN1cmVtZW50KFwiZ3V0dGVyXCIsXCJvdXRlcldpZHRoXCIpLHRoaXMubWVhc3VyZUNvbHVtbnMoKTt2YXIgYT10aGlzLmNvbHM7Zm9yKHRoaXMuY29sWXM9W107YS0tOyl0aGlzLmNvbFlzLnB1c2goMCk7dGhpcy5tYXhZPTB9LGQucHJvdG90eXBlLm1lYXN1cmVDb2x1bW5zPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRDb250YWluZXJXaWR0aCgpLCF0aGlzLmNvbHVtbldpZHRoKXt2YXIgYT10aGlzLml0ZW1zWzBdLGM9YSYmYS5lbGVtZW50O3RoaXMuY29sdW1uV2lkdGg9YyYmYihjKS5vdXRlcldpZHRofHx0aGlzLmNvbnRhaW5lcldpZHRofXRoaXMuY29sdW1uV2lkdGgrPXRoaXMuZ3V0dGVyLHRoaXMuY29scz1NYXRoLmZsb29yKCh0aGlzLmNvbnRhaW5lcldpZHRoK3RoaXMuZ3V0dGVyKS90aGlzLmNvbHVtbldpZHRoKSx0aGlzLmNvbHM9TWF0aC5tYXgodGhpcy5jb2xzLDEpfSxkLnByb3RvdHlwZS5nZXRDb250YWluZXJXaWR0aD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoP3RoaXMuZWxlbWVudC5wYXJlbnROb2RlOnRoaXMuZWxlbWVudCxjPWIoYSk7dGhpcy5jb250YWluZXJXaWR0aD1jJiZjLmlubmVyV2lkdGh9LGQucHJvdG90eXBlLl9nZXRJdGVtTGF5b3V0UG9zaXRpb249ZnVuY3Rpb24oYSl7YS5nZXRTaXplKCk7dmFyIGI9YS5zaXplLm91dGVyV2lkdGgldGhpcy5jb2x1bW5XaWR0aCxkPWImJjE+Yj9cInJvdW5kXCI6XCJjZWlsXCIsZT1NYXRoW2RdKGEuc2l6ZS5vdXRlcldpZHRoL3RoaXMuY29sdW1uV2lkdGgpO2U9TWF0aC5taW4oZSx0aGlzLmNvbHMpO2Zvcih2YXIgZj10aGlzLl9nZXRDb2xHcm91cChlKSxnPU1hdGgubWluLmFwcGx5KE1hdGgsZiksaD1jKGYsZyksaT17eDp0aGlzLmNvbHVtbldpZHRoKmgseTpnfSxqPWcrYS5zaXplLm91dGVySGVpZ2h0LGs9dGhpcy5jb2xzKzEtZi5sZW5ndGgsbD0wO2s+bDtsKyspdGhpcy5jb2xZc1toK2xdPWo7cmV0dXJuIGl9LGQucHJvdG90eXBlLl9nZXRDb2xHcm91cD1mdW5jdGlvbihhKXtpZigyPmEpcmV0dXJuIHRoaXMuY29sWXM7Zm9yKHZhciBiPVtdLGM9dGhpcy5jb2xzKzEtYSxkPTA7Yz5kO2QrKyl7dmFyIGU9dGhpcy5jb2xZcy5zbGljZShkLGQrYSk7YltkXT1NYXRoLm1heC5hcHBseShNYXRoLGUpfXJldHVybiBifSxkLnByb3RvdHlwZS5fbWFuYWdlU3RhbXA9ZnVuY3Rpb24oYSl7dmFyIGM9YihhKSxkPXRoaXMuX2dldEVsZW1lbnRPZmZzZXQoYSksZT10aGlzLm9wdGlvbnMuaXNPcmlnaW5MZWZ0P2QubGVmdDpkLnJpZ2h0LGY9ZStjLm91dGVyV2lkdGgsZz1NYXRoLmZsb29yKGUvdGhpcy5jb2x1bW5XaWR0aCk7Zz1NYXRoLm1heCgwLGcpO3ZhciBoPU1hdGguZmxvb3IoZi90aGlzLmNvbHVtbldpZHRoKTtoLT1mJXRoaXMuY29sdW1uV2lkdGg/MDoxLGg9TWF0aC5taW4odGhpcy5jb2xzLTEsaCk7Zm9yKHZhciBpPSh0aGlzLm9wdGlvbnMuaXNPcmlnaW5Ub3A/ZC50b3A6ZC5ib3R0b20pK2Mub3V0ZXJIZWlnaHQsaj1nO2g+PWo7aisrKXRoaXMuY29sWXNbal09TWF0aC5tYXgoaSx0aGlzLmNvbFlzW2pdKX0sZC5wcm90b3R5cGUuX2dldENvbnRhaW5lclNpemU9ZnVuY3Rpb24oKXt0aGlzLm1heFk9TWF0aC5tYXguYXBwbHkoTWF0aCx0aGlzLmNvbFlzKTt2YXIgYT17aGVpZ2h0OnRoaXMubWF4WX07cmV0dXJuIHRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoJiYoYS53aWR0aD10aGlzLl9nZXRDb250YWluZXJGaXRXaWR0aCgpKSxhfSxkLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyRml0V2lkdGg9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMuY29sczstLWImJjA9PT10aGlzLmNvbFlzW2JdOylhKys7cmV0dXJuKHRoaXMuY29scy1hKSp0aGlzLmNvbHVtbldpZHRoLXRoaXMuZ3V0dGVyfSxkLnByb3RvdHlwZS5uZWVkc1Jlc2l6ZUxheW91dD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGFpbmVyV2lkdGg7cmV0dXJuIHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKSxhIT09dGhpcy5jb250YWluZXJXaWR0aH0sZH12YXIgYz1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBhLmluZGV4T2YoYil9OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKXt2YXIgZT1hW2NdO2lmKGU9PT1iKXJldHVybiBjfXJldHVybi0xfTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcIm91dGxheWVyL291dGxheWVyXCIsXCJnZXQtc2l6ZS9nZXQtc2l6ZVwiXSxiKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJvdXRsYXllclwiKSxyZXF1aXJlKFwiZ2V0LXNpemVcIikpOmEuTWFzb25yeT1iKGEuT3V0bGF5ZXIsYS5nZXRTaXplKX0od2luZG93KTtcblxuLyohXG4gKiBpbWFnZXNMb2FkZWQgUEFDS0FHRUQgdjMuMS44XG4gKiBKYXZhU2NyaXB0IGlzIGFsbCBsaWtlIFwiWW91IGltYWdlcyBhcmUgZG9uZSB5ZXQgb3Igd2hhdD9cIlxuICogTUlUIExpY2Vuc2VcbiAqL1xuIChmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9ZnVuY3Rpb24gdChlLHQpe2Zvcih2YXIgbj1lLmxlbmd0aDtuLS07KWlmKGVbbl0ubGlzdGVuZXI9PT10KXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbZV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgaT1lLnByb3RvdHlwZSxyPXRoaXMsbz1yLkV2ZW50RW1pdHRlcjtpLmdldExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5fZ2V0RXZlbnRzKCk7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpe3Q9e307Zm9yKG4gaW4gaSlpLmhhc093blByb3BlcnR5KG4pJiZlLnRlc3QobikmJih0W25dPWlbbl0pfWVsc2UgdD1pW2VdfHwoaVtlXT1bXSk7cmV0dXJuIHR9LGkuZmxhdHRlbkxpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdCxuPVtdO2Zvcih0PTA7ZS5sZW5ndGg+dDt0Kz0xKW4ucHVzaChlW3RdLmxpc3RlbmVyKTtyZXR1cm4gbn0saS5nZXRMaXN0ZW5lcnNBc09iamVjdD1mdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMuZ2V0TGlzdGVuZXJzKGUpO3JldHVybiBuIGluc3RhbmNlb2YgQXJyYXkmJih0PXt9LHRbZV09biksdHx8bn0saS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihlLG4pe3ZhciBpLHI9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChlKSxvPVwib2JqZWN0XCI9PXR5cGVvZiBuO2ZvcihpIGluIHIpci5oYXNPd25Qcm9wZXJ0eShpKSYmLTE9PT10KHJbaV0sbikmJnJbaV0ucHVzaChvP246e2xpc3RlbmVyOm4sb25jZTohMX0pO3JldHVybiB0aGlzfSxpLm9uPW4oXCJhZGRMaXN0ZW5lclwiKSxpLmFkZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmFkZExpc3RlbmVyKGUse2xpc3RlbmVyOnQsb25jZTohMH0pfSxpLm9uY2U9bihcImFkZE9uY2VMaXN0ZW5lclwiKSxpLmRlZmluZUV2ZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldExpc3RlbmVycyhlKSx0aGlzfSxpLmRlZmluZUV2ZW50cz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDtlLmxlbmd0aD50O3QrPTEpdGhpcy5kZWZpbmVFdmVudChlW3RdKTtyZXR1cm4gdGhpc30saS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlLG4pe3ZhciBpLHIsbz10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpO2ZvcihyIGluIG8pby5oYXNPd25Qcm9wZXJ0eShyKSYmKGk9dChvW3JdLG4pLC0xIT09aSYmb1tyXS5zcGxpY2UoaSwxKSk7cmV0dXJuIHRoaXN9LGkub2ZmPW4oXCJyZW1vdmVMaXN0ZW5lclwiKSxpLmFkZExpc3RlbmVycz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITEsZSx0KX0saS5yZW1vdmVMaXN0ZW5lcnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCEwLGUsdCl9LGkubWFuaXB1bGF0ZUxpc3RlbmVycz1mdW5jdGlvbihlLHQsbil7dmFyIGkscixvPWU/dGhpcy5yZW1vdmVMaXN0ZW5lcjp0aGlzLmFkZExpc3RlbmVyLHM9ZT90aGlzLnJlbW92ZUxpc3RlbmVyczp0aGlzLmFkZExpc3RlbmVycztpZihcIm9iamVjdFwiIT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIFJlZ0V4cClmb3IoaT1uLmxlbmd0aDtpLS07KW8uY2FsbCh0aGlzLHQsbltpXSk7ZWxzZSBmb3IoaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihyPXRbaV0pJiYoXCJmdW5jdGlvblwiPT10eXBlb2Ygcj9vLmNhbGwodGhpcyxpLHIpOnMuY2FsbCh0aGlzLGkscikpO3JldHVybiB0aGlzfSxpLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGUpe3ZhciB0LG49dHlwZW9mIGUsaT10aGlzLl9nZXRFdmVudHMoKTtpZihcInN0cmluZ1wiPT09bilkZWxldGUgaVtlXTtlbHNlIGlmKFwib2JqZWN0XCI9PT1uKWZvcih0IGluIGkpaS5oYXNPd25Qcm9wZXJ0eSh0KSYmZS50ZXN0KHQpJiZkZWxldGUgaVt0XTtlbHNlIGRlbGV0ZSB0aGlzLl9ldmVudHM7cmV0dXJuIHRoaXN9LGkucmVtb3ZlQWxsTGlzdGVuZXJzPW4oXCJyZW1vdmVFdmVudFwiKSxpLmVtaXRFdmVudD1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLHM9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChlKTtmb3IociBpbiBzKWlmKHMuaGFzT3duUHJvcGVydHkocikpZm9yKGk9c1tyXS5sZW5ndGg7aS0tOyluPXNbcl1baV0sbi5vbmNlPT09ITAmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxuLmxpc3RlbmVyKSxvPW4ubGlzdGVuZXIuYXBwbHkodGhpcyx0fHxbXSksbz09PXRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGUsbi5saXN0ZW5lcik7cmV0dXJuIHRoaXN9LGkudHJpZ2dlcj1uKFwiZW1pdEV2ZW50XCIpLGkuZW1pdD1mdW5jdGlvbihlKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHRoaXMuZW1pdEV2ZW50KGUsdCl9LGkuc2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vbmNlUmV0dXJuVmFsdWU9ZSx0aGlzfSxpLl9nZXRPbmNlUmV0dXJuVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eShcIl9vbmNlUmV0dXJuVmFsdWVcIik/dGhpcy5fb25jZVJldHVyblZhbHVlOiEwfSxpLl9nZXRFdmVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KX0sZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHIuRXZlbnRFbWl0dGVyPW8sZX0sXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXJcIixbXSxmdW5jdGlvbigpe3JldHVybiBlfSk6XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZTp0aGlzLkV2ZW50RW1pdHRlcj1lfSkuY2FsbCh0aGlzKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuPWUuZXZlbnQ7cmV0dXJuIG4udGFyZ2V0PW4udGFyZ2V0fHxuLnNyY0VsZW1lbnR8fHQsbn12YXIgbj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsaT1mdW5jdGlvbigpe307bi5hZGRFdmVudExpc3RlbmVyP2k9ZnVuY3Rpb24oZSx0LG4pe2UuYWRkRXZlbnRMaXN0ZW5lcih0LG4sITEpfTpuLmF0dGFjaEV2ZW50JiYoaT1mdW5jdGlvbihlLG4saSl7ZVtuK2ldPWkuaGFuZGxlRXZlbnQ/ZnVuY3Rpb24oKXt2YXIgbj10KGUpO2kuaGFuZGxlRXZlbnQuY2FsbChpLG4pfTpmdW5jdGlvbigpe3ZhciBuPXQoZSk7aS5jYWxsKGUsbil9LGUuYXR0YWNoRXZlbnQoXCJvblwiK24sZVtuK2ldKX0pO3ZhciByPWZ1bmN0aW9uKCl7fTtuLnJlbW92ZUV2ZW50TGlzdGVuZXI/cj1mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbiwhMSl9Om4uZGV0YWNoRXZlbnQmJihyPWZ1bmN0aW9uKGUsdCxuKXtlLmRldGFjaEV2ZW50KFwib25cIit0LGVbdCtuXSk7dHJ5e2RlbGV0ZSBlW3Qrbl19Y2F0Y2goaSl7ZVt0K25dPXZvaWQgMH19KTt2YXIgbz17YmluZDppLHVuYmluZDpyfTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiZXZlbnRpZS9ldmVudGllXCIsbyk6ZS5ldmVudGllPW99KHRoaXMpLGZ1bmN0aW9uKGUsdCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJldmVudEVtaXR0ZXIvRXZlbnRFbWl0dGVyXCIsXCJldmVudGllL2V2ZW50aWVcIl0sZnVuY3Rpb24obixpKXtyZXR1cm4gdChlLG4saSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10KGUscmVxdWlyZShcIndvbGZ5ODctZXZlbnRlbWl0dGVyXCIpLHJlcXVpcmUoXCJldmVudGllXCIpKTplLmltYWdlc0xvYWRlZD10KGUsZS5FdmVudEVtaXR0ZXIsZS5ldmVudGllKX0od2luZG93LGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWZ1bmN0aW9uIHIoZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09ZC5jYWxsKGUpfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9W107aWYocihlKSl0PWU7ZWxzZSBpZihcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGgpZm9yKHZhciBuPTAsaT1lLmxlbmd0aDtpPm47bisrKXQucHVzaChlW25dKTtlbHNlIHQucHVzaChlKTtyZXR1cm4gdH1mdW5jdGlvbiBzKGUsdCxuKXtpZighKHRoaXMgaW5zdGFuY2VvZiBzKSlyZXR1cm4gbmV3IHMoZSx0KTtcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlKSksdGhpcy5lbGVtZW50cz1vKGUpLHRoaXMub3B0aW9ucz1pKHt9LHRoaXMub3B0aW9ucyksXCJmdW5jdGlvblwiPT10eXBlb2YgdD9uPXQ6aSh0aGlzLm9wdGlvbnMsdCksbiYmdGhpcy5vbihcImFsd2F5c1wiLG4pLHRoaXMuZ2V0SW1hZ2VzKCksYSYmKHRoaXMuanFEZWZlcnJlZD1uZXcgYS5EZWZlcnJlZCk7dmFyIHI9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5jaGVjaygpfSl9ZnVuY3Rpb24gZihlKXt0aGlzLmltZz1lfWZ1bmN0aW9uIGMoZSl7dGhpcy5zcmM9ZSx2W2VdPXRoaXN9dmFyIGE9ZS5qUXVlcnksdT1lLmNvbnNvbGUsaD11IT09dm9pZCAwLGQ9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztzLnByb3RvdHlwZT1uZXcgdCxzLnByb3RvdHlwZS5vcHRpb25zPXt9LHMucHJvdG90eXBlLmdldEltYWdlcz1mdW5jdGlvbigpe3RoaXMuaW1hZ2VzPVtdO2Zvcih2YXIgZT0wLHQ9dGhpcy5lbGVtZW50cy5sZW5ndGg7dD5lO2UrKyl7dmFyIG49dGhpcy5lbGVtZW50c1tlXTtcIklNR1wiPT09bi5ub2RlTmFtZSYmdGhpcy5hZGRJbWFnZShuKTt2YXIgaT1uLm5vZGVUeXBlO2lmKGkmJigxPT09aXx8OT09PWl8fDExPT09aSkpZm9yKHZhciByPW4ucXVlcnlTZWxlY3RvckFsbChcImltZ1wiKSxvPTAscz1yLmxlbmd0aDtzPm87bysrKXt2YXIgZj1yW29dO3RoaXMuYWRkSW1hZ2UoZil9fX0scy5wcm90b3R5cGUuYWRkSW1hZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGYoZSk7dGhpcy5pbWFnZXMucHVzaCh0KX0scy5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7cmV0dXJuIHQub3B0aW9ucy5kZWJ1ZyYmaCYmdS5sb2coXCJjb25maXJtXCIsZSxyKSx0LnByb2dyZXNzKGUpLG4rKyxuPT09aSYmdC5jb21wbGV0ZSgpLCEwfXZhciB0PXRoaXMsbj0wLGk9dGhpcy5pbWFnZXMubGVuZ3RoO2lmKHRoaXMuaGFzQW55QnJva2VuPSExLCFpKXJldHVybiB0aGlzLmNvbXBsZXRlKCksdm9pZCAwO2Zvcih2YXIgcj0wO2k+cjtyKyspe3ZhciBvPXRoaXMuaW1hZ2VzW3JdO28ub24oXCJjb25maXJtXCIsZSksby5jaGVjaygpfX0scy5wcm90b3R5cGUucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7dGhpcy5oYXNBbnlCcm9rZW49dGhpcy5oYXNBbnlCcm9rZW58fCFlLmlzTG9hZGVkO3ZhciB0PXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3QuZW1pdChcInByb2dyZXNzXCIsdCxlKSx0LmpxRGVmZXJyZWQmJnQuanFEZWZlcnJlZC5ub3RpZnkmJnQuanFEZWZlcnJlZC5ub3RpZnkodCxlKX0pfSxzLnByb3RvdHlwZS5jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGFzQW55QnJva2VuP1wiZmFpbFwiOlwiZG9uZVwiO3RoaXMuaXNDb21wbGV0ZT0hMDt2YXIgdD10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZih0LmVtaXQoZSx0KSx0LmVtaXQoXCJhbHdheXNcIix0KSx0LmpxRGVmZXJyZWQpe3ZhciBuPXQuaGFzQW55QnJva2VuP1wicmVqZWN0XCI6XCJyZXNvbHZlXCI7dC5qcURlZmVycmVkW25dKHQpfX0pfSxhJiYoYS5mbi5pbWFnZXNMb2FkZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgcyh0aGlzLGUsdCk7cmV0dXJuIG4uanFEZWZlcnJlZC5wcm9taXNlKGEodGhpcykpfSksZi5wcm90b3R5cGU9bmV3IHQsZi5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXt2YXIgZT12W3RoaXMuaW1nLnNyY118fG5ldyBjKHRoaXMuaW1nLnNyYyk7aWYoZS5pc0NvbmZpcm1lZClyZXR1cm4gdGhpcy5jb25maXJtKGUuaXNMb2FkZWQsXCJjYWNoZWQgd2FzIGNvbmZpcm1lZFwiKSx2b2lkIDA7aWYodGhpcy5pbWcuY29tcGxldGUmJnZvaWQgMCE9PXRoaXMuaW1nLm5hdHVyYWxXaWR0aClyZXR1cm4gdGhpcy5jb25maXJtKDAhPT10aGlzLmltZy5uYXR1cmFsV2lkdGgsXCJuYXR1cmFsV2lkdGhcIiksdm9pZCAwO3ZhciB0PXRoaXM7ZS5vbihcImNvbmZpcm1cIixmdW5jdGlvbihlLG4pe3JldHVybiB0LmNvbmZpcm0oZS5pc0xvYWRlZCxuKSwhMH0pLGUuY2hlY2soKX0sZi5wcm90b3R5cGUuY29uZmlybT1mdW5jdGlvbihlLHQpe3RoaXMuaXNMb2FkZWQ9ZSx0aGlzLmVtaXQoXCJjb25maXJtXCIsdGhpcyx0KX07dmFyIHY9e307cmV0dXJuIGMucHJvdG90eXBlPW5ldyB0LGMucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNDaGVja2VkKXt2YXIgZT1uZXcgSW1hZ2U7bi5iaW5kKGUsXCJsb2FkXCIsdGhpcyksbi5iaW5kKGUsXCJlcnJvclwiLHRoaXMpLGUuc3JjPXRoaXMuc3JjLHRoaXMuaXNDaGVja2VkPSEwfX0sYy5wcm90b3R5cGUuaGFuZGxlRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJvblwiK2UudHlwZTt0aGlzW3RdJiZ0aGlzW3RdKGUpfSxjLnByb3RvdHlwZS5vbmxvYWQ9ZnVuY3Rpb24oZSl7dGhpcy5jb25maXJtKCEwLFwib25sb2FkXCIpLHRoaXMudW5iaW5kUHJveHlFdmVudHMoZSl9LGMucHJvdG90eXBlLm9uZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5jb25maXJtKCExLFwib25lcnJvclwiKSx0aGlzLnVuYmluZFByb3h5RXZlbnRzKGUpfSxjLnByb3RvdHlwZS5jb25maXJtPWZ1bmN0aW9uKGUsdCl7dGhpcy5pc0NvbmZpcm1lZD0hMCx0aGlzLmlzTG9hZGVkPWUsdGhpcy5lbWl0KFwiY29uZmlybVwiLHRoaXMsdCl9LGMucHJvdG90eXBlLnVuYmluZFByb3h5RXZlbnRzPWZ1bmN0aW9uKGUpe24udW5iaW5kKGUudGFyZ2V0LFwibG9hZFwiLHRoaXMpLG4udW5iaW5kKGUudGFyZ2V0LFwiZXJyb3JcIix0aGlzKX0sc30pO1xuXG5cblxuLyogZ2xvYmFsIHR3ZW50eXNldmVudGVlblNjcmVlblJlYWRlclRleHQgKi9cbnZhciBTdWtjZXM7XG4oZnVuY3Rpb24oICQgKSB7XG5cblx0Ly8gVmFyaWFibGVzIGFuZCBET00gQ2FjaGluZy5cblx0dmFyICRib2R5ID0gJCggJ2JvZHknICksXG5cdCRjdXN0b21IZWFkZXIgPSAkYm9keS5maW5kKCAnLmN1c3RvbS1oZWFkZXInICksXG5cdCRicmFuZGluZyA9ICRjdXN0b21IZWFkZXIuZmluZCggJy5zaXRlLWJyYW5kaW5nJyApLFxuXHQkbmF2aWdhdGlvbiA9ICRib2R5LmZpbmQoICcubmF2aWdhdGlvbi10b3AnICksXG5cdCRuYXZXcmFwID0gJG5hdmlnYXRpb24uZmluZCggJy53cmFwJyApLFxuXHQkbmF2TWVudUl0ZW0gPSAkbmF2aWdhdGlvbi5maW5kKCAnLm1lbnUtaXRlbScgKSxcblx0JG1lbnVUb2dnbGUgPSAkbmF2aWdhdGlvbi5maW5kKCAnLm1lbnUtdG9nZ2xlJyApLFxuXHQkbWVudVNjcm9sbERvd24gPSAkYm9keS5maW5kKCAnLm1lbnUtc2Nyb2xsLWRvd24nICksXG5cdCRzaWRlYmFyID0gJGJvZHkuZmluZCggJyNzZWNvbmRhcnknICksXG5cdCRlbnRyeUNvbnRlbnQgPSAkYm9keS5maW5kKCAnLmVudHJ5LWNvbnRlbnQnICksXG5cdCRmb3JtYXRRdW90ZSA9ICRib2R5LmZpbmQoICcuZm9ybWF0LXF1b3RlIGJsb2NrcXVvdGUnICksXG5cdGlzRnJvbnRQYWdlID0gJGJvZHkuaGFzQ2xhc3MoICd0d2VudHlzZXZlbnRlZW4tZnJvbnQtcGFnZScgKSB8fCAkYm9keS5oYXNDbGFzcyggJ2hvbWUgYmxvZycgKSxcblx0bmF2aWdhdGlvbkZpeGVkQ2xhc3MgPSAnc2l0ZS1uYXZpZ2F0aW9uLWZpeGVkJyxcblx0bmF2aWdhdGlvbkhlaWdodCxcblx0bmF2aWdhdGlvbk91dGVySGVpZ2h0LFxuXHRuYXZQYWRkaW5nLFxuXHRibGF6eSxcblx0bmF2TWVudUl0ZW1IZWlnaHQsXG5cdGlkZWFsTmF2SGVpZ2h0LFxuXHRuYXZJc05vdFRvb1RhbGwsXG5cdGhlYWRlck9mZnNldCxcblx0bWVudVRvcCA9IDAsXG5cdHJlc2l6ZVRpbWVyO1xuXG5cblx0Ly8gRW5zdXJlIHRoZSBzdGlja3kgbmF2aWdhdGlvbiBkb2Vzbid0IGNvdmVyIGN1cnJlbnQgZm9jdXNlZCBsaW5rcy5cblx0JCggJ2FbaHJlZl0sIGFyZWFbaHJlZl0sIGlucHV0Om5vdChbZGlzYWJsZWRdKSwgc2VsZWN0Om5vdChbZGlzYWJsZWRdKSwgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLCBidXR0b246bm90KFtkaXNhYmxlZF0pLCBpZnJhbWUsIG9iamVjdCwgZW1iZWQsIFt0YWJpbmRleF0sIFtjb250ZW50ZWRpdGFibGVdJywgJy5zaXRlLWNvbnRlbnQtY29udGFpbicgKS5maWx0ZXIoICc6dmlzaWJsZScgKS5mb2N1cyggZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCAkbmF2aWdhdGlvbi5oYXNDbGFzcyggJ3NpdGUtbmF2aWdhdGlvbi1maXhlZCcgKSApIHtcblx0XHRcdHZhciB3aW5kb3dTY3JvbGxUb3AgPSAkKCB3aW5kb3cgKS5zY3JvbGxUb3AoKSxcblx0XHRcdGZpeGVkTmF2SGVpZ2h0ID0gJG5hdmlnYXRpb24uaGVpZ2h0KCksXG5cdFx0XHRpdGVtU2Nyb2xsVG9wID0gJCggdGhpcyApLm9mZnNldCgpLnRvcCxcblx0XHRcdG9mZnNldERpZmYgPSBpdGVtU2Nyb2xsVG9wIC0gd2luZG93U2Nyb2xsVG9wO1xuXG5cdFx0XHQvLyBBY2NvdW50IGZvciBBZG1pbiBiYXIuXG5cdFx0XHRpZiAoICQoICcjd3BhZG1pbmJhcicgKS5sZW5ndGggKSB7XG5cdFx0XHRcdG9mZnNldERpZmYgLT0gJCggJyN3cGFkbWluYmFyJyApLmhlaWdodCgpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG9mZnNldERpZmYgPCBmaXhlZE5hdkhlaWdodCApIHtcblx0XHRcdFx0JCggd2luZG93ICkuc2Nyb2xsVG8oIGl0ZW1TY3JvbGxUb3AgLSAoIGZpeGVkTmF2SGVpZ2h0ICsgNTAgKSwgMCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0Ly8gU2V0IHByb3BlcnRpZXMgb2YgbmF2aWdhdGlvbi5cblx0ZnVuY3Rpb24gc2V0TmF2UHJvcHMoKSB7XG5cdFx0bmF2aWdhdGlvbkhlaWdodCAgICAgID0gJG5hdmlnYXRpb24uaGVpZ2h0KCk7XG5cdFx0bmF2aWdhdGlvbk91dGVySGVpZ2h0ID0gJG5hdmlnYXRpb24ub3V0ZXJIZWlnaHQoKTtcblx0XHRuYXZQYWRkaW5nICAgICAgICAgICAgPSBwYXJzZUZsb2F0KCAkbmF2V3JhcC5jc3MoICdwYWRkaW5nLXRvcCcgKSApICogMjtcblx0XHRuYXZNZW51SXRlbUhlaWdodCAgICAgPSAkbmF2TWVudUl0ZW0ub3V0ZXJIZWlnaHQoKSAqIDI7XG5cdFx0aWRlYWxOYXZIZWlnaHQgICAgICAgID0gbmF2UGFkZGluZyArIG5hdk1lbnVJdGVtSGVpZ2h0O1xuXHRcdG5hdklzTm90VG9vVGFsbCAgICAgICA9IG5hdmlnYXRpb25IZWlnaHQgPD0gaWRlYWxOYXZIZWlnaHQ7XG5cdH1cblxuXHRmdW5jdGlvbiBzZXRUZXN0aW1vbmlhbCgpIHtcblx0XHRpZiAoKCQoZG9jdW1lbnQpLndpZHRoKCkpPDc2OSkgeyQoXCIucW9kZWYtdGVzdGltb25pYWxzLXNsaWRlci1pdGVtXCIpLmNzcyhcIndpZHRoXCIsXCIxMDAlXCIpO31cblx0fVxuXHQvKlx0Y29uc29sZS5sb2coV2F5cG9pbnQpO1xuXG5cdFx0dmFyIHdheXBvaW50ID0gbmV3IFdheXBvaW50KHtcblx0XHRcdGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXNpYy13YXlwb2ludCcpLFxuXHRcdFx0aGFuZGxlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG5vdGlmeSgnQmFzaWMgd2F5cG9pbnQgdHJpZ2dlcmVkJylcblx0XHRcdH1cblx0XHR9KVxuXHRcdCovXG5cblx0XHRmdW5jdGlvbiBoYW5kbGVyQW5pbWF0aW9uKCl7XG5cblx0XHR9XG5cblx0Ly8gTWFrZSBuYXZpZ2F0aW9uICdzdGljaycuXG5cdGZ1bmN0aW9uIGFkanVzdFNjcm9sbENsYXNzKCkge1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHdlJ3JlIG5vdCBvbiBhIG1vYmlsZSBzY3JlZW4uXG5cdFx0aWYgKCAnbm9uZScgPT09ICRtZW51VG9nZ2xlLmNzcyggJ2Rpc3BsYXknICkgKSB7XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgbmF2IGlzbid0IHRhbGxlciB0aGFuIHR3byByb3dzLlxuXHRcdFx0aWYgKCBuYXZJc05vdFRvb1RhbGwgKSB7XG5cblx0XHRcdFx0Ly8gV2hlbiB0aGVyZSdzIGEgY3VzdG9tIGhlYWRlciBpbWFnZSBvciB2aWRlbywgdGhlIGhlYWRlciBvZmZzZXQgaW5jbHVkZXMgdGhlIGhlaWdodCBvZiB0aGUgbmF2aWdhdGlvbi5cblx0XHRcdFx0aWYgKCBpc0Zyb250UGFnZSAmJiAoICRib2R5Lmhhc0NsYXNzKCAnaGFzLWhlYWRlci1pbWFnZScgKSB8fCAkYm9keS5oYXNDbGFzcyggJ2hhcy1oZWFkZXItdmlkZW8nICkgKSApIHtcblx0XHRcdFx0XHRoZWFkZXJPZmZzZXQgPSAkY3VzdG9tSGVhZGVyLmlubmVySGVpZ2h0KCkgLSBuYXZpZ2F0aW9uT3V0ZXJIZWlnaHQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aGVhZGVyT2Zmc2V0ID0gJGN1c3RvbUhlYWRlci5pbm5lckhlaWdodCgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSWYgdGhlIHNjcm9sbCBpcyBtb3JlIHRoYW4gdGhlIGN1c3RvbSBoZWFkZXIsIHNldCB0aGUgZml4ZWQgY2xhc3MuXG5cdFx0XHRcdGlmICggJCggd2luZG93ICkuc2Nyb2xsVG9wKCkgPj0gaGVhZGVyT2Zmc2V0ICkge1xuXHRcdFx0XHRcdCRuYXZpZ2F0aW9uLmFkZENsYXNzKCBuYXZpZ2F0aW9uRml4ZWRDbGFzcyApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRuYXZpZ2F0aW9uLnJlbW92ZUNsYXNzKCBuYXZpZ2F0aW9uRml4ZWRDbGFzcyApO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gUmVtb3ZlICdmaXhlZCcgY2xhc3MgaWYgbmF2IGlzIHRhbGxlciB0aGFuIHR3byByb3dzLlxuXHRcdFx0XHQkbmF2aWdhdGlvbi5yZW1vdmVDbGFzcyggbmF2aWdhdGlvbkZpeGVkQ2xhc3MgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBTZXQgbWFyZ2lucyBvZiBicmFuZGluZyBpbiBoZWFkZXIuXG5cdGZ1bmN0aW9uIGFkanVzdEhlYWRlckhlaWdodCgpIHtcblx0XHRpZiAoICdub25lJyA9PT0gJG1lbnVUb2dnbGUuY3NzKCAnZGlzcGxheScgKSApIHtcblxuXHRcdFx0Ly8gVGhlIG1hcmdpbiBzaG91bGQgYmUgYXBwbGllZCB0byBkaWZmZXJlbnQgZWxlbWVudHMgb24gZnJvbnQtcGFnZSBvciBob21lIHZzIGludGVyaW9yIHBhZ2VzLlxuXHRcdFx0aWYgKCBpc0Zyb250UGFnZSApIHtcblx0XHRcdFx0JGJyYW5kaW5nLmNzcyggJ21hcmdpbi1ib3R0b20nLCBuYXZpZ2F0aW9uT3V0ZXJIZWlnaHQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRjdXN0b21IZWFkZXIuY3NzKCAnbWFyZ2luLWJvdHRvbScsIG5hdmlnYXRpb25PdXRlckhlaWdodCApO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblx0XHRcdCRjdXN0b21IZWFkZXIuY3NzKCAnbWFyZ2luLWJvdHRvbScsICcwJyApO1xuXHRcdFx0JGJyYW5kaW5nLmNzcyggJ21hcmdpbi1ib3R0b20nLCAnMCcgKTtcblx0XHR9XG5cdH1cblxuXG5cdC8vIEFkZCAnYmVsb3ctZW50cnktbWV0YScgY2xhc3MgdG8gZWxlbWVudHMuXG5cdGZ1bmN0aW9uIGJlbG93RW50cnlNZXRhQ2xhc3MoIHBhcmFtICkge1xuXHRcdHZhciBzaWRlYmFyUG9zLCBzaWRlYmFyUG9zQm90dG9tO1xuXHRcdGlmICggISAkYm9keS5oYXNDbGFzcyggJ2hhcy1zaWRlYmFyJyApIHx8IChcblx0XHRcdCRib2R5Lmhhc0NsYXNzKCAnc2VhcmNoJyApIHx8XG5cdFx0XHQkYm9keS5oYXNDbGFzcyggJ3NpbmdsZS1hdHRhY2htZW50JyApIHx8XG5cdFx0XHQkYm9keS5oYXNDbGFzcyggJ2Vycm9yNDA0JyApIHx8XG5cdFx0XHQkYm9keS5oYXNDbGFzcyggJ3R3ZW50eXNldmVudGVlbi1mcm9udC1wYWdlJyApXG5cdFx0XHQpICkge1xuXHRcdFx0cmV0dXJuO1xuXHR9XG5cblx0c2lkZWJhclBvcyAgICAgICA9ICRzaWRlYmFyLm9mZnNldCgpO1xuXHRzaWRlYmFyUG9zQm90dG9tID0gc2lkZWJhclBvcy50b3AgKyAoICRzaWRlYmFyLmhlaWdodCgpICsgMjggKTtcblxuXHQkZW50cnlDb250ZW50LmZpbmQoIHBhcmFtICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0dmFyICRlbGVtZW50ID0gJCggdGhpcyApLFxuXHRcdGVsZW1lbnRQb3MgPSAkZWxlbWVudC5vZmZzZXQoKSxcblx0XHRlbGVtZW50UG9zVG9wID0gZWxlbWVudFBvcy50b3A7XG5cblx0XHRcdC8vIEFkZCAnYmVsb3ctZW50cnktbWV0YScgdG8gZWxlbWVudHMgYmVsb3cgdGhlIGVudHJ5IG1ldGEuXG5cdFx0XHRpZiAoIGVsZW1lbnRQb3NUb3AgPiBzaWRlYmFyUG9zQm90dG9tICkge1xuXHRcdFx0XHQkZWxlbWVudC5hZGRDbGFzcyggJ2JlbG93LWVudHJ5LW1ldGEnICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkZWxlbWVudC5yZW1vdmVDbGFzcyggJ2JlbG93LWVudHJ5LW1ldGEnICk7XG5cdFx0XHR9XG5cdFx0fSk7XG59XG5cblx0Lypcblx0ICogVGVzdCBpZiBpbmxpbmUgU1ZHcyBhcmUgc3VwcG9ydGVkLlxuXHQgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9cblx0ICovXG5cdCBmdW5jdGlvbiBzdXBwb3J0c0lubGluZVNWRygpIHtcblx0IFx0dmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdkaXYnICk7XG5cdCBcdGRpdi5pbm5lckhUTUwgPSAnPHN2Zy8+Jztcblx0IFx0cmV0dXJuICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgPT09ICggJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBTVkdSZWN0ICYmIGRpdi5maXJzdENoaWxkICYmIGRpdi5maXJzdENoaWxkLm5hbWVzcGFjZVVSSSApO1xuXHQgfVxuXG5cdC8qKlxuXHQgKiBUZXN0IGlmIGFuIGlPUyBkZXZpY2UuXG5cdCAqL1xuXHQgZnVuY3Rpb24gY2hlY2tpT1MoKSB7XG5cdCBcdHJldHVybiAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhIHdpbmRvdy5NU1N0cmVhbTtcblx0IH1cblxuXHQvKlxuXHQgKiBUZXN0IGlmIGJhY2tncm91bmQtYXR0YWNobWVudDogZml4ZWQgaXMgc3VwcG9ydGVkLlxuXHQgKiBAbGluayBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0MTE1MDgwL2RldGVjdC1zdXBwb3J0LWZvci1iYWNrZ3JvdW5kLWF0dGFjaG1lbnQtZml4ZWRcblx0ICovXG5cdCBmdW5jdGlvbiBzdXBwb3J0c0ZpeGVkQmFja2dyb3VuZCgpIHtcblx0IFx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG5cdCBcdGlzU3VwcG9ydGVkO1xuXG5cdCBcdHRyeSB7XG5cdCBcdFx0aWYgKCAhICggJ2JhY2tncm91bmRBdHRhY2htZW50JyBpbiBlbC5zdHlsZSApIHx8IGNoZWNraU9TKCkgKSB7XG5cdCBcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdCBcdFx0fVxuXHQgXHRcdGVsLnN0eWxlLmJhY2tncm91bmRBdHRhY2htZW50ID0gJ2ZpeGVkJztcblx0IFx0XHRpc1N1cHBvcnRlZCA9ICggJ2ZpeGVkJyA9PT0gZWwuc3R5bGUuYmFja2dyb3VuZEF0dGFjaG1lbnQgKTtcblx0IFx0XHRyZXR1cm4gaXNTdXBwb3J0ZWQ7XG5cdCBcdH1cblx0IFx0Y2F0Y2ggKGUpIHtcblx0IFx0XHRyZXR1cm4gZmFsc2U7XG5cdCBcdH1cblx0IH1cblxuXG5cdCBmdW5jdGlvbiB0cmlnZ2VyUGFyYWxsYXhDbCh0YXJnZXQpIHtcblx0IFx0JHRhcmdldD0kKHRhcmdldCk7XG5cdCBcdGlmICgkdGFyZ2V0Lmxlbmd0aCkge1x0XG5cdCBcdFx0JChcIi5xb2RlZi1wYWdlLWhlYWRlclwiKS5yZW1vdmVDbGFzcyhcIm9wZW5lZFwiKTtcblx0IFx0XHQkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcblx0IFx0XHRcdHNjcm9sbFRvcDogKCR0YXJnZXQub2Zmc2V0KCkudG9wLTEwMCkrXCJweFwiXG5cdCBcdFx0fSwgMjAwMCk7XG5cdCBcdH1cblx0IH1cblxuXHQvLyBGaXJlIG9uIGRvY3VtZW50IHJlYWR5LlxuXHQkKCBkb2N1bWVudCApLnJlYWR5KCBmdW5jdGlvbigpIHtcblxuXG5cdFx0JChcIipbcGFyYWxsYXgtY2xdXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihlKSB7XG5cdFx0XHR2YXIgaWQ9JCh0aGlzKS5hdHRyKFwiaHJlZlwiKSxcblx0XHRcdHBhcmVudFRhcmdldD0kKHRoaXMpLnBhcmVudCgpO1xuXHRcdFx0aWYgKHBhcmVudFRhcmdldC5pcygnOmxhc3QtY2hpbGQnKSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0JChcIi5tZW51LWl0ZW1cIikucmVtb3ZlQ2xhc3MoXCJxb2RlZi1hY3RpdmUtaXRlbVwiKTtcdFxuXHRcdFx0cGFyZW50VGFyZ2V0LmFkZENsYXNzKFwicW9kZWYtYWN0aXZlLWl0ZW1cIik7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dHJpZ2dlclBhcmFsbGF4Q2woaWQpO1xuXHRcdH0pXG5cblx0XHR2YXIgaGFtYnVyZ2VyPSAkKFwiLmhhbWJ1cmdlci1tZW51XCIpLFxuXHRcdHNtYWxsTWVudT0gJChcIi5xb2RlZi1wYWdlLWhlYWRlclwiKTtcblxuXHRcdGhhbWJ1cmdlci5vbihcImNsaWNrXCIsZnVuY3Rpb24oZXYpIHtcblx0XHRcdHNtYWxsTWVudS50b2dnbGVDbGFzcyhcIm9wZW5lZFwiKTtcblx0XHR9KVxuXG5cblxuXHRcdCQoXCIubG9hZGVyXCIpLnJlbW92ZUNsYXNzKFwiaW5cIik7XG5cdFx0dHJpZ2dlclBhcmFsbGF4Q2wod2luZG93LmxvY2F0aW9uLmhhc2gpXG5cdFx0Ly8gSWYgbmF2aWdhdGlvbiBtZW51IGlzIHByZXNlbnQgb24gcGFnZSwgc2V0TmF2UHJvcHMgYW5kIGFkanVzdFNjcm9sbENsYXNzLlxuXHRcdGlmICggJG5hdmlnYXRpb24ubGVuZ3RoICkge1xuXHRcdFx0c2V0TmF2UHJvcHMoKTtcblx0XHRcdGFkanVzdFNjcm9sbENsYXNzKCk7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgJ1Njcm9sbCBEb3duJyBhcnJvdyBpbiBwcmVzZW50IG9uIHBhZ2UsIGNhbGN1bGF0ZSBzY3JvbGwgb2Zmc2V0IGFuZCBiaW5kIGFuIGV2ZW50IGhhbmRsZXIgdG8gdGhlIGNsaWNrIGV2ZW50LlxuXHRcdGlmICggJG1lbnVTY3JvbGxEb3duLmxlbmd0aCApIHtcblxuXHRcdFx0aWYgKCAkKCAnYm9keScgKS5oYXNDbGFzcyggJ2FkbWluLWJhcicgKSApIHtcblx0XHRcdFx0bWVudVRvcCAtPSAzMjtcblx0XHRcdH1cblx0XHRcdGlmICggJCggJ2JvZHknICkuaGFzQ2xhc3MoICdibG9nJyApICkge1xuXHRcdFx0XHRtZW51VG9wIC09IDMwOyAvLyBUaGUgZGl2IGZvciBsYXRlc3QgcG9zdHMgaGFzIG5vIHNwYWNlIGFib3ZlIGNvbnRlbnQsIGFkZCBzb21lIHRvIGFjY291bnQgZm9yIHRoaXMuXG5cdFx0XHR9XG5cdFx0XHRpZiAoICEgJG5hdmlnYXRpb24ubGVuZ3RoICkge1xuXHRcdFx0XHRuYXZpZ2F0aW9uT3V0ZXJIZWlnaHQgPSAwO1xuXHRcdFx0fVxuXG5cdFx0XHQkbWVudVNjcm9sbERvd24uY2xpY2soIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCQoIHdpbmRvdyApLnNjcm9sbFRvKCAnI3ByaW1hcnknLCB7XG5cdFx0XHRcdFx0ZHVyYXRpb246IDYwMCxcblx0XHRcdFx0XHRvZmZzZXQ6IHsgdG9wOiBtZW51VG9wIC0gbmF2aWdhdGlvbk91dGVySGVpZ2h0IH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRhZGp1c3RIZWFkZXJIZWlnaHQoKTtcblx0XHRpZiAoIHRydWUgPT09IHN1cHBvcnRzSW5saW5lU1ZHKCkgKSB7XG5cdFx0XHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NOYW1lID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKCAvKFxccyopbm8tc3ZnKFxccyopLywgJyQxc3ZnJDInICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0cnVlID09PSBzdXBwb3J0c0ZpeGVkQmFja2dyb3VuZCgpICkge1xuXHRcdFx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTmFtZSArPSAnIGJhY2tncm91bmQtZml4ZWQnO1xuXHRcdH1cblx0XHRcblxuXHR9KTtcblxuXHQvLyBJZiBuYXZpZ2F0aW9uIG1lbnUgaXMgcHJlc2VudCBvbiBwYWdlLCBhZGp1c3QgaXQgb24gc2Nyb2xsIGFuZCBzY3JlZW4gcmVzaXplLlxuXHRpZiAoICRuYXZpZ2F0aW9uLmxlbmd0aCApIHtcblxuXHRcdC8vIE9uIHNjcm9sbCwgd2Ugd2FudCB0byBzdGljay91bnN0aWNrIHRoZSBuYXZpZ2F0aW9uLlxuXHRcdCQoIHdpbmRvdyApLm9uKCAnc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRhZGp1c3RTY3JvbGxDbGFzcygpO1xuXHRcdFx0YWRqdXN0SGVhZGVySGVpZ2h0KCk7XG5cdFx0fSk7XG5cblx0XHQvLyBBbHNvIHdhbnQgdG8gbWFrZSBzdXJlIHRoZSBuYXZpZ2F0aW9uIGlzIHdoZXJlIGl0IHNob3VsZCBiZSBvbiByZXNpemUuXG5cdFx0JCggd2luZG93ICkub24oXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRzZXROYXZQcm9wcygpO1xuXHRcdFx0c2V0VGltZW91dCggYWRqdXN0U2Nyb2xsQ2xhc3MsIDUwMCApO1xuXHRcdH0pO1xuXHR9XG5cblx0JCggd2luZG93ICkub24oXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0Y2xlYXJUaW1lb3V0KCByZXNpemVUaW1lciApO1xuXHRcdHJlc2l6ZVRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRiZWxvd0VudHJ5TWV0YUNsYXNzKCAnYmxvY2txdW90ZS5hbGlnbmxlZnQsIGJsb2NrcXVvdGUuYWxpZ25yaWdodCcgKTtcblx0XHR9LCAzMDAgKTtcblx0XHRzZXRUZXN0aW1vbmlhbCgpO1xuXHRcdHNldFRpbWVvdXQoIGFkanVzdEhlYWRlckhlaWdodCwgMTAwMCApO1xuXHR9KTtcblxuXHQvLyBBZGQgaGVhZGVyIHZpZGVvIGNsYXNzIGFmdGVyIHRoZSB2aWRlbyBpcyBsb2FkZWQuXG5cdCQoIGRvY3VtZW50ICkub24oICd3cC1jdXN0b20taGVhZGVyLXZpZGVvLWxvYWRlZCcsIGZ1bmN0aW9uKCkge1xuXHRcdCRib2R5LmFkZENsYXNzKCAnaGFzLWhlYWRlci12aWRlbycgKTtcblx0fSk7XG5cblxuXG5cblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuU3VrY2VzIC0gTmVhdCBQZXJzb25hbCBSZXN1bWUgQ1YgdkNhcmQgVGVtcGxhdGVcblxuRmlsZTogICAgICAgICAgIEpTIENvcmVcblZlcnNpb246ICAgICAgICAxLjBcbkxhc3QgY2hhbmdlOiAgICAxNS8wNy8xNiBcbkF1dGhvcjogICAgICAgICBTdWVsbyBcblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciAkYm9keSA9ICQoJ2JvZHknKSxcbiRodG1sID0gJCgnaHRtbCcpLFxuJHBhZ2VMb2FkZXIgPSAkKCcjcGFnZS1sb2FkZXInKTtcblxudmFyICRoZWFkZXIgPSAkKCcjaGVhZGVyJyksXG5zY3JvbGxlZEJhcnJpZXIgPSAkKHdpbmRvdykuaGVpZ2h0KCkvMixcbnNjcm9sbGVkID0gMDtcblxudmFyIHNldEhlYWRlciA9IGZ1bmN0aW9uKCkge1xuXHRzY3JvbGxlZCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcblxuXHRpZihzY3JvbGxlZCA+PSBzY3JvbGxlZEJhcnJpZXIpIHtcblx0XHQkaGVhZGVyLmFkZENsYXNzKCdzY3JvbGxlZCcpO1xuXHR9IGVsc2Uge1xuXHRcdCRoZWFkZXIucmVtb3ZlQ2xhc3MoJ3Njcm9sbGVkJyk7XG5cdH1cbn1cblxuU3VrY2VzID0ge1xuXHRpbml0OiBmdW5jdGlvbigpIHtcblxuXHRcdHRoaXMuQmFzaWMuaW5pdCgpO1xuXHRcdHRoaXMuQ29tcG9uZW50LmluaXQoKTsgXG5cblx0fSxcblx0QmFzaWM6IHtcblx0XHRpbml0OiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dGhpcy5tb2JpbGVEZXRlY3RvcigpO1xuXHRcdFx0dGhpcy5tYXNvbnJ5KCk7XG5cdFx0XHR0aGlzLm1hcCgpO1xuXHRcdFx0dGhpcy5maWx0ZXIoKTtcblx0XHR9LFxuXHRcdGJsYXp5OmZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIG5ldyBCbGF6eSh7XG5cdFx0XHRcdHNlbGVjdG9yOlwiaW1nLmItbGF6eVwiLFxuXHRcdFx0XHRsb2FkSW52aXNpYmxlOnRydWUsXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGVsZSl7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJjcG9vbm9cIik7XG5cdFx0XHRcdFx0JChlbGUpLmFuaW1hdGUoe29wYWNpdHkgOiAxfSk7XG5cdFx0XHRcdH0sZXJyb3I6ZnVuY3Rpb24oZWxlLG1zZykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCQoZWxlKSk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJChlbGUpLmhhc0NsYXNzKFwidGVhbS1pbWdcIikpO1xuXHRcdFx0XHRcdGlmICgkKGVsZSkuaGFzQ2xhc3MoXCJ0ZWFtLWltZ1wiKSkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coc3RhdGljK1wiL2Fzc2V0cy9pbWcvZGVmYXVsdF9wLnBuZ1wiKTtcblx0XHRcdFx0XHQkKGVsZSkuYW5pbWF0ZSh7b3BhY2l0eSA6IDF9KTtcblx0XHRcdFx0XHQkKGVsZSkuYXR0cihcInNyY1wiLHN0YXRpYytcIi9hc3NldHMvaW1nL2RlZmF1bHRfcC5wbmdcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdH0pXG5cblx0XHR9LFxuXHRcdG1vYmlsZURldGVjdG9yOiBmdW5jdGlvbiAoKSB7XG5cblx0XHRcdHZhciBpc01vYmlsZSA9IHtcblx0XHRcdFx0QW5kcm9pZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdEJsYWNrQmVycnk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9CbGFja0JlcnJ5L2kpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRpT1M6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmV8aVBhZHxpUG9kL2kpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRPcGVyYTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL09wZXJhIE1pbmkvaSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFdpbmRvd3M6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9JRU1vYmlsZS9pKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YW55OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gaXNNb2JpbGUuQW5kcm9pZCgpIHx8IGlzTW9iaWxlLkJsYWNrQmVycnkoKSB8fCBpc01vYmlsZS5pT1MoKSB8fCBpc01vYmlsZS5PcGVyYSgpIHx8IGlzTW9iaWxlLldpbmRvd3MoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0d2luZG93LnRydWVNb2JpbGUgPSBpc01vYmlsZS5hbnkoKTtcblxuXHRcdH0sXG5cdFx0bWFzb25yeTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkZ3JpZCA9ICQoJy5tYXNvbnJ5JywnI2NvbnRlbnQnKTtcblxuXHRcdFx0JGdyaWQubWFzb25yeSh7XG5cdFx0XHRcdGNvbHVtbldpZHRoOiAnLm1hc29ucnktc2l6ZXInLFxuXHRcdFx0XHRpdGVtU2VsZWN0b3I6ICcubWFzb25yeS1pdGVtJyxcblx0XHRcdFx0cGVyY2VudFBvc2l0aW9uOiB0cnVlXG5cdFx0XHR9KTtcblxuXHRcdFx0JGdyaWQuaW1hZ2VzTG9hZGVkKCkucHJvZ3Jlc3MoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRncmlkLm1hc29ucnkoJ2xheW91dCcpO1xuXHRcdFx0fSk7XG5cblx0XHRcdCRncmlkLm9uKCdsYXlvdXRDb21wbGV0ZScsIFdheXBvaW50LnJlZnJlc2hBbGwoKSk7XG5cblx0XHR9LFxuXHRcdGZpbHRlcjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkZmlsdGVyID0gJCgnLmZpbHRlcicpLFxuXHRcdFx0JGxpc3QsXG5cdFx0XHRmaWx0ZXJWYWx1ZSxcblx0XHRcdHNlbGVjdG9yO1xuXG5cdFx0XHQkZmlsdGVyLm9uKCdjbGljaycsICdhJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0c2VsZWN0b3I9JCh0aGlzKS5wYXJlbnRzKCcuZmlsdGVyJykuZGF0YSgnZmlsdGVyLWxpc3QnKTtcblx0XHRcdFx0JGxpc3QgPSAkKHNlbGVjdG9yKTtcblx0XHRcdFx0ZmlsdGVyVmFsdWUgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtZmlsdGVyJyk7XG5cdFx0XHRcdCRsaXN0LmNoaWxkcmVuKCkuZmlsdGVyKCcubm90LW1hdGNoZWQnKS5yZW1vdmVDbGFzcygnbm90LW1hdGNoZWQnKTtcblx0XHRcdFx0aWYoZmlsdGVyVmFsdWUhPVwiKlwiKSAkbGlzdC5jaGlsZHJlbigpLm5vdChmaWx0ZXJWYWx1ZSkuYWRkQ2xhc3MoJ25vdC1tYXRjaGVkJyk7XG5cdFx0XHRcdGlmICgkbGlzdC5jaGlsZHJlbigpLmxlbmd0aCA9PSAkbGlzdC5jaGlsZHJlbigpLm5vdChmaWx0ZXJWYWx1ZSkubGVuZ3RoKSB7JChzZWxlY3RvcitcIiBwXCIpLnJlbW92ZUNsYXNzKCduby1kYXRhJyk7XHR9XG5cdFx0XHRcdGVsc2V7ICQoc2VsZWN0b3IrXCIgcFwiKS5hZGRDbGFzcygnbm8tZGF0YScpO1x0fVxuXHRcdFx0XHQkKHNlbGVjdG9yK1wiIHBcIikucmVtb3ZlQ2xhc3MoJ25vLW1hdGNoZWQnKTtcblx0XHRcdFx0JCh0aGlzKS5wYXJlbnRzKCd1bCcpLmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0XHRcdCQodGhpcykucGFyZW50KCdsaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9KTtcblxuXHRcdH0sXG5cdFx0bWFwOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyICRnb29nbGVNYXAgPSAkKCcjZ29vZ2xlLW1hcCcpO1xuXG5cdFx0XHRpZigkZ29vZ2xlTWFwLmxlbmd0aD4wKSB7XG5cdFx0XHRcdHZhciB5b3VyTGF0aXR1ZGUgPSAkZ29vZ2xlTWFwLmRhdGEoJ2xhdGl0dWRlJyk7ICAgXG5cdFx0XHRcdHZhciB5b3VyTG9uZ2l0dWRlID0gJGdvb2dsZU1hcC5kYXRhKCdsb25naXR1ZGUnKTsgIFxuXHRcdFx0XHR2YXIgcGlja2VkU3R5bGUgPSAkZ29vZ2xlTWFwLmRhdGEoJ3N0eWxlJyk7ICAgICBcblx0XHRcdFx0dmFyIGRhcmsgPSBbe1wiZmVhdHVyZVR5cGVcIjpcImFsbFwiLFwiZWxlbWVudFR5cGVcIjpcImxhYmVscy50ZXh0LmZpbGxcIixcInN0eWxlcnNcIjpbe1wic2F0dXJhdGlvblwiOjM2fSx7XCJjb2xvclwiOlwiIzAwMDAwMFwifSx7XCJsaWdodG5lc3NcIjo0MH1dfSx7XCJmZWF0dXJlVHlwZVwiOlwiYWxsXCIsXCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHQuc3Ryb2tlXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9uXCJ9LHtcImNvbG9yXCI6XCIjMDAwMDAwXCJ9LHtcImxpZ2h0bmVzc1wiOjE2fV19LHtcImZlYXR1cmVUeXBlXCI6XCJhbGxcIixcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMuaWNvblwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwiYWRtaW5pc3RyYXRpdmVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5maWxsXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjMDAwMDAwXCJ9LHtcImxpZ2h0bmVzc1wiOjIwfV19LHtcImZlYXR1cmVUeXBlXCI6XCJhZG1pbmlzdHJhdGl2ZVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LnN0cm9rZVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzAwMDAwMFwifSx7XCJsaWdodG5lc3NcIjoxN30se1wid2VpZ2h0XCI6MS4yfV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzAwMDAwMFwifSx7XCJsaWdodG5lc3NcIjoyMH1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiMwMDAwMDBcIn0se1wibGlnaHRuZXNzXCI6MjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LmZpbGxcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiMwMDAwMDBcIn0se1wibGlnaHRuZXNzXCI6MTd9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuaGlnaHdheVwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5LnN0cm9rZVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzAwMDAwMFwifSx7XCJsaWdodG5lc3NcIjoyOX0se1wid2VpZ2h0XCI6MC4yfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiMwMDAwMDBcIn0se1wibGlnaHRuZXNzXCI6MTh9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQubG9jYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiIzAwMDAwMFwifSx7XCJsaWdodG5lc3NcIjoxNn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwidHJhbnNpdFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjMDAwMDAwXCJ9LHtcImxpZ2h0bmVzc1wiOjE5fV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjMDAwMDAwXCJ9LHtcImxpZ2h0bmVzc1wiOjE3fV19XTtcblx0XHRcdFx0dmFyIGxpZ2h0ID0gW3tcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZTllOWU5XCJ9LHtcImxpZ2h0bmVzc1wiOjE3fV19LHtcImZlYXR1cmVUeXBlXCI6XCJsYW5kc2NhcGVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y1ZjVmNVwifSx7XCJsaWdodG5lc3NcIjoyMH1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZmZmZmZlwifSx7XCJsaWdodG5lc3NcIjoxN31dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuc3Ryb2tlXCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZmZmZmXCJ9LHtcImxpZ2h0bmVzc1wiOjI5fSx7XCJ3ZWlnaHRcIjowLjJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInJvYWQuYXJ0ZXJpYWxcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZmZmZmZlwifSx7XCJsaWdodG5lc3NcIjoxOH1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5sb2NhbFwiLFwiZWxlbWVudFR5cGVcIjpcImdlb21ldHJ5XCIsXCJzdHlsZXJzXCI6W3tcImNvbG9yXCI6XCIjZmZmZmZmXCJ9LHtcImxpZ2h0bmVzc1wiOjE2fV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2Y1ZjVmNVwifSx7XCJsaWdodG5lc3NcIjoyMX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicG9pLnBhcmtcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2RlZGVkZVwifSx7XCJsaWdodG5lc3NcIjoyMX1dfSx7XCJlbGVtZW50VHlwZVwiOlwibGFiZWxzLnRleHQuc3Ryb2tlXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9uXCJ9LHtcImNvbG9yXCI6XCIjZmZmZmZmXCJ9LHtcImxpZ2h0bmVzc1wiOjE2fV19LHtcImVsZW1lbnRUeXBlXCI6XCJsYWJlbHMudGV4dC5maWxsXCIsXCJzdHlsZXJzXCI6W3tcInNhdHVyYXRpb25cIjozNn0se1wiY29sb3JcIjpcIiMzMzMzMzNcIn0se1wibGlnaHRuZXNzXCI6NDB9XX0se1wiZWxlbWVudFR5cGVcIjpcImxhYmVscy5pY29uXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ0cmFuc2l0XCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnlcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmMmYyZjJcIn0se1wibGlnaHRuZXNzXCI6MTl9XX0se1wiZmVhdHVyZVR5cGVcIjpcImFkbWluaXN0cmF0aXZlXCIsXCJlbGVtZW50VHlwZVwiOlwiZ2VvbWV0cnkuZmlsbFwiLFwic3R5bGVyc1wiOlt7XCJjb2xvclwiOlwiI2ZlZmVmZVwifSx7XCJsaWdodG5lc3NcIjoyMH1dfSx7XCJmZWF0dXJlVHlwZVwiOlwiYWRtaW5pc3RyYXRpdmVcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeS5zdHJva2VcIixcInN0eWxlcnNcIjpbe1wiY29sb3JcIjpcIiNmZWZlZmVcIn0se1wibGlnaHRuZXNzXCI6MTd9LHtcIndlaWdodFwiOjEuMn1dfV07XG5cdFx0XHRcdHZhciBkcmVhbSA9IFt7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI0ZGQkIwMFwifSx7XCJzYXR1cmF0aW9uXCI6NDMuNDAwMDAwMDAwMDAwMDA2fSx7XCJsaWdodG5lc3NcIjozNy41OTk5OTk5OTk5OTk5OTR9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI0ZGQzIwMFwifSx7XCJzYXR1cmF0aW9uXCI6LTYxLjh9LHtcImxpZ2h0bmVzc1wiOjQ1LjU5OTk5OTk5OTk5OTk5NH0se1wiZ2FtbWFcIjoxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiI0ZGMDMwMFwifSx7XCJzYXR1cmF0aW9uXCI6LTEwMH0se1wibGlnaHRuZXNzXCI6NTEuMTk5OTk5OTk5OTk5OTl9LHtcImdhbW1hXCI6MX1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5sb2NhbFwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiNGRjAzMDBcIn0se1wic2F0dXJhdGlvblwiOi0xMDB9LHtcImxpZ2h0bmVzc1wiOjUyfSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcIndhdGVyXCIsXCJzdHlsZXJzXCI6W3tcImh1ZVwiOlwiIzAwNzhGRlwifSx7XCJzYXR1cmF0aW9uXCI6LTEzLjIwMDAwMDAwMDAwMDAwM30se1wibGlnaHRuZXNzXCI6Mi40MDAwMDAwMDAwMDAwMDU3fSx7XCJnYW1tYVwiOjF9XX0se1wiZmVhdHVyZVR5cGVcIjpcInBvaVwiLFwic3R5bGVyc1wiOlt7XCJodWVcIjpcIiMwMEZGNkFcIn0se1wic2F0dXJhdGlvblwiOi0xLjA5ODkwMTA5ODkwMTEyMzR9LHtcImxpZ2h0bmVzc1wiOjExLjIwMDAwMDAwMDAwMDAxN30se1wiZ2FtbWFcIjoxfV19XTtcblx0XHRcdFx0dmFyIHBhcGVyID0gW3tcImZlYXR1cmVUeXBlXCI6XCJhZG1pbmlzdHJhdGl2ZVwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvZmZcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwibGFuZHNjYXBlXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn0se1wiaHVlXCI6XCIjMDA2NmZmXCJ9LHtcInNhdHVyYXRpb25cIjo3NH0se1wibGlnaHRuZXNzXCI6MTAwfV19LHtcImZlYXR1cmVUeXBlXCI6XCJwb2lcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcInNpbXBsaWZpZWRcIn1dfSx7XCJmZWF0dXJlVHlwZVwiOlwicm9hZC5oaWdod2F5XCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifSx7XCJ3ZWlnaHRcIjowLjZ9LHtcInNhdHVyYXRpb25cIjotODV9LHtcImxpZ2h0bmVzc1wiOjYxfV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmhpZ2h3YXlcIixcImVsZW1lbnRUeXBlXCI6XCJnZW9tZXRyeVwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJvblwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmFydGVyaWFsXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9mZlwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJyb2FkLmxvY2FsXCIsXCJlbGVtZW50VHlwZVwiOlwiYWxsXCIsXCJzdHlsZXJzXCI6W3tcInZpc2liaWxpdHlcIjpcIm9uXCJ9XX0se1wiZmVhdHVyZVR5cGVcIjpcInRyYW5zaXRcIixcImVsZW1lbnRUeXBlXCI6XCJhbGxcIixcInN0eWxlcnNcIjpbe1widmlzaWJpbGl0eVwiOlwic2ltcGxpZmllZFwifV19LHtcImZlYXR1cmVUeXBlXCI6XCJ3YXRlclwiLFwiZWxlbWVudFR5cGVcIjpcImFsbFwiLFwic3R5bGVyc1wiOlt7XCJ2aXNpYmlsaXR5XCI6XCJzaW1wbGlmaWVkXCJ9LHtcImNvbG9yXCI6XCIjNWY5NGZmXCJ9LHtcImxpZ2h0bmVzc1wiOjI2fSx7XCJnYW1tYVwiOjUuODZ9XX1dO1xuXG5cdFx0XHRcdHZhciBwaWNrZWRTdHlsZSA9ICRnb29nbGVNYXAuZGF0YSgnc3R5bGUnKTsgICBcblxuXHRcdFx0XHR2YXIgbXlPcHRpb25zID0ge1xuXHRcdFx0XHRcdHpvb206IDE0LFxuXHRcdFx0XHRcdGNlbnRlcjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh5b3VyTGF0aXR1ZGUseW91ckxvbmdpdHVkZSksXG5cdFx0XHRcdFx0bWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCxcblx0XHRcdFx0XHRtYXBUeXBlQ29udHJvbDogZmFsc2UsXG5cdFx0XHRcdFx0cGFuQ29udHJvbDogZmFsc2UsXG5cdFx0XHRcdFx0em9vbUNvbnRyb2w6IHRydWUsXG5cdFx0XHRcdFx0c2NhbGVDb250cm9sOiBmYWxzZSxcblx0XHRcdFx0XHRzdHJlZXRWaWV3Q29udHJvbDogZmFsc2UsXG5cdFx0XHRcdFx0c2Nyb2xsd2hlZWw6IGZhbHNlLFxuXHRcdFx0XHRcdHN0eWxlczogZXZhbChwaWNrZWRTdHlsZSlcblx0XHRcdFx0fTtcblxuXHRcdFx0XHR2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ29vZ2xlLW1hcCcpLCBteU9wdGlvbnMpO1xuXHRcdFx0XHR2YXIgaW1hZ2UgPSBwaWNrZWRTdHlsZSA9PSAnZGFyaycgPyAnYXNzZXRzL2ltZy9sb2NhdGlvbi1waW4tbGlnaHQucG5nJyA6ICdhc3NldHMvaW1nL2xvY2F0aW9uLXBpbi5wbmcnO1xuXHRcdFx0XHR2YXIgbXlMYXRMbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHlvdXJMYXRpdHVkZSx5b3VyTG9uZ2l0dWRlKTtcblx0XHRcdFx0dmFyIG15TG9jYXRpb24gPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcblx0XHRcdFx0XHRwb3NpdGlvbjogbXlMYXRMbmcsXG5cdFx0XHRcdFx0bWFwOiBtYXAsXG5cdFx0XHRcdFx0aWNvbjogaW1hZ2Vcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblxuXG5cdFx0fVxuXHR9LFxuXHRDb21wb25lbnQ6IHtcblx0XHRpbml0OiBmdW5jdGlvbigpIHsgIFxuXG5cdFx0XHR0aGlzLmFqYXhNb2RhbCgpOyBcblx0XHRcdHRoaXMuY2Fyb3VzZWwoKTsgXG5cdFx0XHR0aGlzLmZvcm1zKCk7XG5cdFx0XHR0aGlzLm1vZGFsKCk7XG5cdFx0XHR0aGlzLnRhYnMoKTsgXG5cblx0XHRcdCQoJy5jb250YWN0LXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciAkc2VsZiA9ICQodGhpcyk7XG5cdFx0XHRcdCRzZWxmLnBhcmVudCgnLmNvbnRhY3QtYm94JykudG9nZ2xlQ2xhc3MoJ25vdC12aXNpYmxlJyk7XG5cdFx0XHRcdCRzZWxmLnNpYmxpbmdzKCcuY29udGFjdC1ib3gtY29udGVudCcpLnN0b3AoKS5mYWRlVG9nZ2xlKDUwMCk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcqW2RhdGEtdG9nZ2xlPVwibW9iaWxlLW5hdlwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHQkYm9keS50b2dnbGVDbGFzcygnbW9iaWxlLW5hdi1vcGVuJyk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkKCcjaGVhZGVyLXRvZ2dsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCRoZWFkZXIudG9nZ2xlQ2xhc3MoJ3VuY29sbGFwc2VkJyk7XG5cdFx0XHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0U3VrY2VzLkNvbXBvbmVudC50YWJzKCk7IFxuXHRcdFx0XHRcdCQoJy5tYXNvbnJ5JywnI2NvbnRlbnQnKS5tYXNvbnJ5KCdsYXlvdXQnKTtcblx0XHRcdFx0XHRXYXlwb2ludC5yZWZyZXNoQWxsKCk7IFxuXHRcdFx0XHR9LDUwMCk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTsgXG5cdFx0XHR9KTtcblxuXHRcdH0sXG5cdFx0YWpheE1vZGFsOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0JGJvZHkuYXBwZW5kKCc8ZGl2IGlkPVwiYWpheC10bXBcIj48L2Rpdj4nKTtcblxuXHRcdFx0dmFyIHRvTG9hZDtcblx0XHRcdHZhciBvZmZzZXRUb3A7XG5cblx0XHRcdHZhciAkYWpheExvYWRlciA9ICQoJyNhamF4LWxvYWRlcicpO1xuXHRcdFx0dmFyICRhamF4TW9kYWwgPSAkKCcjYWpheC1tb2RhbCcpO1xuXHRcdFx0dmFyICRhamF4VG1wID0gJCgnI2FqYXgtdG1wJyk7XG5cblx0XHRcdGZ1bmN0aW9uIGxvYWRDb250ZW50KCkge+OAgFxuXG5cdFx0XHRcdCRhamF4VG1wLmxvYWQodG9Mb2FkICsgJyAjY29udGVudCcsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0JGFqYXhNb2RhbC5zaG93KDApLmFkZENsYXNzKCdsb2FkaW5nLXN0YXJ0ZWQnKTtcblx0XHRcdFx0XHQkYWpheExvYWRlci5mYWRlSW4oMjAwKS5jc3MoJ2Rpc3BsYXknLCdpbmxpbmUtYmxvY2snKTtcblxuXHRcdFx0XHRcdHZhciAkc2VsZiA9ICQodGhpcyk7XG5cblx0XHRcdFx0XHQkc2VsZi53YWl0Rm9ySW1hZ2VzKHtcblx0XHRcdFx0XHRcdGZpbmlzaGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0JGFqYXhNb2RhbC5odG1sKCRhamF4VG1wLmh0bWwoKSk7XG5cblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRcdCQoJ2h0bWwnKS5hZGRDbGFzcygnbG9ja2VkLXNjcm9sbGluZycpO1xuXHRcdFx0XHRcdFx0XHRcdCRhamF4TW9kYWwuYWRkQ2xhc3MoJ2xvYWRpbmctZmluaXNoZWQnKS5jaGlsZHJlbignI2NvbnRlbnQnKTtcblx0XHRcdFx0XHRcdFx0XHQkYm9keS5hZGRDbGFzcygnYWpheC1tb2RhbC1sb2FkZWQnKTtcblx0XHRcdFx0XHRcdFx0XHQkYWpheExvYWRlci5mYWRlT3V0KDQwMCk7XG5cdFx0XHRcdFx0XHRcdFx0JGFqYXhUbXAuaHRtbCgnJyk7XG5cdFx0XHRcdFx0XHRcdH0sMTIwMCk7XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0d2FpdEZvckFsbDogdHJ1ZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx044CAICB9XG5cblx0XHRcdGZ1bmN0aW9uIGNsb3NlRGV0YWlscygpIHtcblx0XHRcdFx0JCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdsb2NrZWQtc2Nyb2xsaW5nJyk7XG5cdFx0XHRcdCQoZG9jdW1lbnQpLnNjcm9sbFRvcChvZmZzZXRUb3ApO1xuXHRcdFx0XHQkYWpheE1vZGFsLmZhZGVPdXQoMjAwLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdsb2FkaW5nLXN0YXJ0ZWQgbG9hZGluZy1maW5pc2hlZCcpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0JGJvZHkucmVtb3ZlQ2xhc3MoJ2FqYXgtbW9kYWwtbG9hZGVkJyk7XG5cdFx0XHR9XG5cblx0XHRcdCRib2R5LmRlbGVnYXRlKCcqW2RhdGEtdG9nZ2xlPVwiYWpheC1tb2RhbFwiXScsJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG9mZnNldFRvcCA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xuXHRcdFx0XHR0b0xvYWQgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKTvjgIBcblx0XHRcdFx0bG9hZENvbnRlbnQoKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlOyBcblx0XHRcdH0pO1xuXG5cdFx0XHQkYm9keS5kZWxlZ2F0ZSgnKltkYXRhLWRpc21pc3M9XCJhamF4LW1vZGFsXCJdJywnY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRjbG9zZURldGFpbHMoKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHR9LFxuXHRcdGNhcm91c2VsOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0JCgnLmNhcm91c2VsJykuZWFjaChmdW5jdGlvbigpe1xuXG5cdFx0XHRcdHZhciBpdGVtcywgc2luZ2xlSXRlbSwgYXV0b1BsYXksIHRyYW5zaXRpb24sIGRyYWcsIHN0b3BPbkhvdmVyLCBuYXZpZ2F0aW9uLCBwYWdpbmF0aW9uO1xuXG5cdFx0XHRcdGl0ZW1zID0gJCh0aGlzKS5kYXRhKCdpdGVtcycpO1xuXHRcdFx0XHRzaW5nbGVJdGVtID0gJCh0aGlzKS5kYXRhKCdzaW5nbGUtaXRlbScpO1xuXHRcdFx0XHRhdXRvUGxheSA9ICAkKHRoaXMpLmRhdGEoJ2F1dG9wbGF5Jyk7XG5cdFx0XHRcdHRyYW5zaXRpb24gPSAhJCh0aGlzKS5kYXRhKCd0cmFuc2l0aW9uJykgPyBmYWxzZSA6ICQodGhpcykuZGF0YSgndHJhbnNpdGlvbicpO1xuXHRcdFx0XHRwYWdpbmF0aW9uID0gISQodGhpcykuZGF0YSgncGFnaW5hdGlvbicpID8gZmFsc2UgOiB0cnVlO1xuXHRcdFx0XHRuYXZpZ2F0aW9uID0gISQodGhpcykuZGF0YSgnbmF2aWdhdGlvbicpID8gZmFsc2UgOiB0cnVlO1xuXHRcdFx0XHRkcmFnID0gdHJhbnNpdGlvbj09XCJmYWRlXCIgPyBmYWxzZSA6IHRydWU7XG5cdFx0XHRcdHN0b3BPbkhvdmVyID0gdHJhbnNpdGlvbj09XCJmYWRlXCIgfHwgcGFnaW5hdGlvbj09ZmFsc2UgfHwgbmF2aWdhdGlvbj09ZmFsc2UgPyBmYWxzZSA6IHRydWU7XG5cblx0XHRcdFx0JCh0aGlzKS5vd2xDYXJvdXNlbCh7XG5cdFx0XHRcdFx0aXRlbXM6IGl0ZW1zLFxuXHRcdFx0XHRcdGl0ZW1zRGVza3RvcDogWzExOTksTWF0aC5jZWlsKGl0ZW1zKjAuNildLCBcblx0XHRcdFx0XHRpdGVtc0Rlc2t0b3BTbWFsbDogWzk5MSxNYXRoLmNlaWwoaXRlbXMqMC41KV0sXG5cdFx0XHRcdFx0aXRlbXNUYWJsZXQ6IFs3NjgsTWF0aC5jZWlsKGl0ZW1zKjAuNCldLFxuXHRcdFx0XHRcdGl0ZW1zTW9iaWxlOiBbNDc5LE1hdGguY2VpbChpdGVtcyowLjIpXSxcblx0XHRcdFx0XHRzaW5nbGVJdGVtOiBzaW5nbGVJdGVtLFxuXHRcdFx0XHRcdGF1dG9QbGF5OiBhdXRvUGxheSxcblx0XHRcdFx0XHRwYWdpbmF0aW9uOiBwYWdpbmF0aW9uLFxuXHRcdFx0XHRcdG5hdmlnYXRpb246IG5hdmlnYXRpb24sXG5cdFx0XHRcdFx0bmF2aWdhdGlvblRleHQ6IGZhbHNlLFxuXHRcdFx0XHRcdHNsaWRlU3BlZWQ6IDgwMCxcblx0XHRcdFx0XHRzdG9wT25Ib3Zlcjogc3RvcE9uSG92ZXIsXG5cdFx0XHRcdFx0dHJhbnNpdGlvblN0eWxlOiB0cmFuc2l0aW9uLFxuXHRcdFx0XHRcdG1vdXNlRHJhZzogZHJhZyxcblx0XHRcdFx0XHR0b3VjaERyYWc6IGRyYWcsXG5cdFx0XHRcdFx0YWRkQ2xhc3NBY3RpdmU6IHRydWVcblx0XHRcdFx0fSk7XG5cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Zm9ybXM6IGZ1bmN0aW9uKCl7XG5cblx0XHRcdC8qIE5vdGlmaWNhdGlvbiBCYXIgKi9cblx0XHRcdHZhciAkbm90aWZpY2F0aW9uQmFyID0gJCgnI25vdGlmaWNhdGlvbi1iYXInKSxcblx0XHRcdCRub3RpZmljYXRpb25DbG9zZSA9ICQoJyNub3RpZmljYXRpb24tYmFyJykuZmluZCgnLmNsb3NlLWl0Jyk7XG5cblx0XHRcdHZhciBzaG93Tm90aWZpY2F0aW9uID0gZnVuY3Rpb24odHlwZSxtc2cpIHtcblx0XHRcdFx0JG5vdGlmaWNhdGlvbkJhci5odG1sKCc8ZGl2IGNsYXNzPScrdHlwZSsnPicrbXNnKyc8YSBocmVmPVwiI1wiIGNsYXNzPVwiY2xvc2UtaXRcIj48aSBjbGFzcz1cInRpLWNsb3NlXCI+PC9pPjwvYT48L2Rpdj4nKTtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCRub3RpZmljYXRpb25CYXIuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcblx0XHRcdFx0fSwgNDAwKTtcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCRub3RpZmljYXRpb25CYXIucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcblx0XHRcdFx0fSwgMTAwMDApO1xuXHRcdFx0fTtcblxuXHRcdFx0JGJvZHkuZGVsZWdhdGUoJyNub3RpZmljYXRpb24tYmFyIC5jbG9zZS1pdCcsJ2NsaWNrJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0Y2xvc2VOb3RpZmljYXRpb24oKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSk7XG5cblx0XHRcdHZhciBjbG9zZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkbm90aWZpY2F0aW9uQmFyLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8qIFZhbGlkYXRlIEZvcm0gKi9cblx0XHRcdCQoJy52YWxpZGF0ZS1mb3JtJykuZWFjaChmdW5jdGlvbigpe1xuXHRcdFx0XHQkKHRoaXMpLnZhbGlkYXRlKHtcblx0XHRcdFx0XHR2YWxpZENsYXNzOiAndmFsaWQnLFxuXHRcdFx0XHRcdGVycm9yQ2xhc3M6ICdlcnJvcicsXG5cdFx0XHRcdFx0b25mb2N1c291dDogZnVuY3Rpb24oZWxlbWVudCxldmVudCkge1xuXHRcdFx0XHRcdFx0JChlbGVtZW50KS52YWxpZCgpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ZXJyb3JQbGFjZW1lbnQ6IGZ1bmN0aW9uKGVycm9yLGVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cnVsZXM6IHtcblx0XHRcdFx0XHRcdGVtYWlsOiB7XG5cdFx0XHRcdFx0XHRcdHJlcXVpcmVkICAgIDogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZW1haWwgICAgICAgOiB0cnVlXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cbiAgICAgICAgICAgIC8vIENvbnRhY3QgRm9ybVxuICAgICAgICAgICAgdmFyICRjb250YWN0Rm9ybSAgPSAkKCcjY29udGFjdC1mb3JtJyksXG4gICAgICAgICAgICAkY29udGFjdFBvcHVwID0gJCgnI2NvbnRhY3QtcG9wdXAnKSxcbiAgICAgICAgICAgIG9mZnNldFRvcCA9IDAsXG4gICAgICAgICAgICBjb250YWN0VGltZXIgPSBudWxsO1xuXG4gICAgICAgICAgICAkKCdbZGF0YS10b2dnbGU9XCJjb250YWN0LXBvcHVwXCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIFx0aWYoJGJvZHkuaGFzQ2xhc3MoJ2NvbnRhY3QtcG9wdXAtb3BlbicpKSB7XG4gICAgICAgICAgICBcdFx0Y2xlYXJUaW1lb3V0KGNvbnRhY3RUaW1lcik7XG4gICAgICAgICAgICBcdFx0JGh0bWwucmVtb3ZlQ2xhc3MoJ2xvY2tlZC1zY3JvbGxpbmcnKTtcbiAgICAgICAgICAgIFx0XHQkKGRvY3VtZW50KS5zY3JvbGxUb3Aob2Zmc2V0VG9wKTtcbiAgICAgICAgICAgIFx0XHQkYm9keS50b2dnbGVDbGFzcygnY29udGFjdC1wb3B1cC1vcGVuJyk7XG4gICAgICAgICAgICBcdFx0Y29udGFjdFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgXHRcdFx0JGNvbnRhY3RQb3B1cC5oaWRlKCk7XG4gICAgICAgICAgICBcdFx0fSw5MDApO1xuICAgICAgICAgICAgXHR9IGVsc2Uge1xuICAgICAgICAgICAgXHRcdGNsZWFyVGltZW91dChjb250YWN0VGltZXIpO1xuICAgICAgICAgICAgXHRcdCRjb250YWN0UG9wdXAuc2hvdyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgXHRcdFx0JGJvZHkudG9nZ2xlQ2xhc3MoJ2NvbnRhY3QtcG9wdXAtb3BlbicpO1xuICAgICAgICAgICAgXHRcdH0pO1xuICAgICAgICAgICAgXHRcdG9mZnNldFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgIFx0XHRjb250YWN0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBcdFx0XHQkaHRtbC5hZGRDbGFzcygnbG9ja2VkLXNjcm9sbGluZycpO1xuICAgICAgICAgICAgXHRcdH0sOTAwKTtcbiAgICAgICAgICAgIFx0fVxuICAgICAgICAgICAgXHRyZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTsgXG5cbiAgICAgICAgICAgIGlmKCRjb250YWN0Rm9ybS5sZW5ndGg+MCkge1xuXG4gICAgICAgICAgICBcdHZhciAkY29udGFjdEZvcm1BY3RpdmVTdGVwID0gJGNvbnRhY3RGb3JtLmZpbmQoJy5zdGVwLmFjdGl2ZScpLFxuICAgICAgICAgICAgXHQkY29udGFjdEZvcm1OZXh0U3RlcCA9ICRjb250YWN0Rm9ybUFjdGl2ZVN0ZXAubmV4dCgpLFxuICAgICAgICAgICAgXHQkY29udGFjdEZvcm1QcmV2U3RlcCA9IG51bGwsXG4gICAgICAgICAgICBcdCRjb250YWN0Rm9ybVN0YXR1cyA9ICRjb250YWN0Rm9ybS5maW5kKCcuZm9ybS1zdGF0dXMnKSxcbiAgICAgICAgICAgIFx0JGNvbnRhY3RGb3JtU2VuZGVyID0gJGNvbnRhY3RGb3JtLmZpbmQoJyNzZW5kZXInKTtcblxuICAgICAgICAgICAgXHR2YXIgJHJlY2FwdGNoYSA9ICRjb250YWN0Rm9ybS5maW5kKCcuZy1yZWNhcHRjaGEnKSxcbiAgICAgICAgICAgIFx0cmVjYXB0Y2hhVmFsaWQ7XG5cbiAgICAgICAgICAgIFx0JGNvbnRhY3RGb3JtQWN0aXZlU3RlcC5zaG93KCk7XG4gICAgICAgICAgICBcdCRjb250YWN0Rm9ybU5leHRTdGVwLmFkZENsYXNzKCduZXh0Jyk7XG5cbiAgICAgICAgICAgIFx0JCgnW2RhdGEtdGFyZ2V0PVwiZm9ybS1uZXh0LXN0ZXBcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBcdFx0aWYoJGNvbnRhY3RGb3JtLnZhbGlkKCkpIHtcblxuICAgICAgICAgICAgXHRcdFx0JGNvbnRhY3RGb3JtU2VuZGVyLmh0bWwoJCgnI25hbWUnKS52YWwoKSArICcgKCcgKyAgJCgnI2VtYWlsJykudmFsKCkgKyAnKSYjeDIwMEU7Jyk7XG4gICAgICAgICAgICBcdFx0XHQkY29udGFjdEZvcm1BY3RpdmVTdGVwLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIFx0XHRcdFx0JGNvbnRhY3RGb3JtQWN0aXZlU3RlcC5oaWRlKDAsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIFx0XHRcdFx0XHQkY29udGFjdEZvcm1QcmV2U3RlcCA9ICRjb250YWN0Rm9ybUFjdGl2ZVN0ZXA7XG4gICAgICAgICAgICBcdFx0XHRcdFx0JGNvbnRhY3RGb3JtQWN0aXZlU3RlcCA9ICRjb250YWN0Rm9ybU5leHRTdGVwO1xuICAgICAgICAgICAgXHRcdFx0XHRcdCRjb250YWN0Rm9ybU5leHRTdGVwLnNob3coMCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgXHRcdFx0XHR9KTtcbiAgICAgICAgICAgIFx0XHRcdH0sNTAwKTtcbiAgICAgICAgICAgIFx0XHRcdCRjb250YWN0Rm9ybVN0YXR1cy50ZXh0KCcyLzInKTtcblxuICAgICAgICAgICAgXHRcdH1cblxuICAgICAgICAgICAgXHRcdHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgXHR9KTtcblxuICAgICAgICAgICAgXHQkKCdbZGF0YS10YXJnZXQ9XCJmb3JtLXByZXYtc3RlcFwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIFx0XHQkY29udGFjdEZvcm1BY3RpdmVTdGVwLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBcdFx0XHQkY29udGFjdEZvcm1BY3RpdmVTdGVwLmhpZGUoMCxmdW5jdGlvbigpe1xuICAgICAgICAgICAgXHRcdFx0XHQkY29udGFjdEZvcm1OZXh0U3RlcCA9ICRjb250YWN0Rm9ybUFjdGl2ZVN0ZXA7XG4gICAgICAgICAgICBcdFx0XHRcdCRjb250YWN0Rm9ybUFjdGl2ZVN0ZXAgPSAkY29udGFjdEZvcm1QcmV2U3RlcDtcbiAgICAgICAgICAgIFx0XHRcdFx0JGNvbnRhY3RGb3JtUHJldlN0ZXAuc2hvdygwKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBcdFx0XHR9KTtcbiAgICAgICAgICAgIFx0XHR9LDUwMCk7XG4gICAgICAgICAgICBcdFx0JGNvbnRhY3RGb3JtU3RhdHVzLnRleHQoJzEvMicpO1xuXG4gICAgICAgICAgICBcdFx0cmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICBcdH0pO1xuXG4gICAgICAgICAgICBcdCRjb250YWN0Rm9ybS5zdWJtaXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcdFx0dmFyICRidG4gPSAkKHRoaXMpLmZpbmQoJy5idG4tc3VibWl0Jyk7XG4gICAgICAgICAgICBcdFx0dmFyICRmb3JtID0gJCh0aGlzKTtcbiAgICAgICAgICAgIFx0XHR2YXIgcmVzcG9uc2U7XG5cbiAgICAgICAgICAgIFx0XHRpZigkcmVjYXB0Y2hhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIFx0XHRcdGlmKGdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UoKS5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgXHRcdFx0XHRyZWNhcHRjaGFWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICBcdFx0XHRcdCRyZWNhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XG4gICAgICAgICAgICBcdFx0XHR9IGVsc2Uge1xuICAgICAgICAgICAgXHRcdFx0XHRyZWNhcHRjaGFWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgXHRcdFx0XHQkcmVjYXB0Y2hhLmFkZENsYXNzKCdlcnJvcicpO1xuICAgICAgICAgICAgXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBcdFx0XHRcdFx0JHJlY2FwdGNoYS5yZW1vdmVDbGFzcygnZXJyb3InKTtcbiAgICAgICAgICAgIFx0XHRcdFx0fSwxMDAwKTtcbiAgICAgICAgICAgIFx0XHRcdH1cbiAgICAgICAgICAgIFx0XHR9IGVsc2Uge1xuICAgICAgICAgICAgXHRcdFx0cmVjYXB0Y2hhVmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgXHRcdH1cblxuICAgICAgICAgICAgXHRcdGlmICgkZm9ybS52YWxpZCgpKXtcbiAgICAgICAgICAgIFx0XHRcdCRidG4uYWRkQ2xhc3MoJ2xvYWRpbmcnKTtcbiAgICAgICAgICAgIFx0XHRcdCQuYWpheCh7XG4gICAgICAgICAgICBcdFx0XHRcdHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIFx0XHRcdFx0dXJsOiAgJ2Fzc2V0cy9waHAvY29udGFjdC1mb3JtLnBocCcsXG4gICAgICAgICAgICBcdFx0XHRcdGRhdGE6ICRmb3JtLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgXHRcdFx0XHRlcnJvciAgICAgICA6IGZ1bmN0aW9uKGVycikgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ICRidG4uYWRkQ2xhc3MoJ2Vycm9yJyk7IH0sIDEyMDApOyB9LFxuICAgICAgICAgICAgXHRcdFx0XHRzdWNjZXNzICAgICA6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIFx0XHRcdFx0XHRpZiAoZGF0YSAhPSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSAnZXJyb3InO1xuICAgICAgICAgICAgXHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XHRyZXNwb25zZSA9ICdzdWNjZXNzJztcbiAgICAgICAgICAgIFx0XHRcdFx0XHR9XG4gICAgICAgICAgICBcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgXHRcdFx0XHRcdFx0JGJ0bi5hZGRDbGFzcyhyZXNwb25zZSk7XG4gICAgICAgICAgICBcdFx0XHRcdFx0fSwgNDAwKTtcbiAgICAgICAgICAgIFx0XHRcdFx0fSxcbiAgICAgICAgICAgIFx0XHRcdFx0Y29tcGxldGU6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBcdFx0XHRcdFx0XHQkYnRuLnJlbW92ZUNsYXNzKCdsb2FkaW5nIGVycm9yIHN1Y2Nlc3MnKTtcbiAgICAgICAgICAgIFx0XHRcdFx0XHR9LCAxMDAwMCk7XG4gICAgICAgICAgICBcdFx0XHRcdH1cbiAgICAgICAgICAgIFx0XHRcdH0pO1xuICAgICAgICAgICAgXHRcdFx0cmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgXHRcdH1cbiAgICAgICAgICAgIFx0XHRyZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBcdH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSxcbiAgICAgICAgbW9kYWw6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIFx0JCgnW2RhdGEtdG9nZ2xlPVwidmlkZW8tbW9kYWxcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgXHRcdHZhciBtb2RhbCA9ICQodGhpcykuZGF0YSgndGFyZ2V0JyksXG4gICAgICAgIFx0XHR2aWRlbyA9ICQodGhpcykuZGF0YSgndmlkZW8nKVxuXG4gICAgICAgIFx0XHQkKG1vZGFsICsgJyBpZnJhbWUnKS5hdHRyKCdzcmMnLCB2aWRlbyArICc/YXV0b3BsYXk9MScpO1xuICAgICAgICBcdFx0JChtb2RhbCkubW9kYWwoJ3Nob3cnKTtcblxuICAgICAgICBcdFx0JChtb2RhbCkub24oJ2hpZGRlbi5icy5tb2RhbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgXHRcdFx0JChtb2RhbCArICcgaWZyYW1lJykucmVtb3ZlQXR0cignc3JjJyk7XG4gICAgICAgIFx0XHR9KVxuXG4gICAgICAgIFx0XHRyZXR1cm4gZmFsc2U7XG4gICAgICAgIFx0fSk7XG5cbiAgICAgICAgfSxcbiAgICAgICAgdGFiczogZnVuY3Rpb24oKSB7XG4gICAgICAgIFx0d2luZG93LnNldFRhYnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXHRcdCQoJy50YWJzLXdyYXBwZXInKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIFx0XHRcdHZhciAkc2VsZWN0b3IgPSAkKHRoaXMpLmNoaWxkcmVuKCcuc2VsZWN0b3InKSxcbiAgICAgICAgXHRcdFx0JGVsQWN0aXZlID0gJCh0aGlzKS5maW5kKCcuYWN0aXZlJyksXG4gICAgICAgIFx0XHRcdG5hdk9mZnNldCA9ICQodGhpcykub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgXHRcdFx0dGhpc09mZnNldCA9ICRlbEFjdGl2ZS5vZmZzZXQoKS5sZWZ0LFxuICAgICAgICBcdFx0XHRvZmZzZXQgPSB0aGlzT2Zmc2V0IC0gbmF2T2Zmc2V0LFxuICAgICAgICBcdFx0XHR3aWR0aCA9ICRlbEFjdGl2ZSAub3V0ZXJXaWR0aCgpO1xuICAgICAgICBcdFx0XHQkc2VsZWN0b3IuY3NzKHtcbiAgICAgICAgXHRcdFx0XHQnd2lkdGgnOiB3aWR0aCsncHgnLFxuICAgICAgICBcdFx0XHRcdCdsZWZ0Jzogb2Zmc2V0KydweCdcbiAgICAgICAgXHRcdFx0fSk7XG4gICAgICAgIFx0XHR9KTtcbiAgICAgICAgXHR9XG4gICAgICAgIFx0JCgnLnRhYnMtd3JhcHBlciAubmF2LXRhYnMgbGkgYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIFx0XHR2YXIgJHNlbGVjdG9yID0gJCh0aGlzKS5wYXJlbnRzKCcudGFicy13cmFwcGVyJykuY2hpbGRyZW4oJy5zZWxlY3RvcicpLFxuICAgICAgICBcdFx0bmF2T2Zmc2V0ID0gJCh0aGlzKS5wYXJlbnRzKCcudGFicy13cmFwcGVyJykub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgXHRcdHRoaXNPZmZzZXQgPSAkKHRoaXMpLm9mZnNldCgpLmxlZnQsXG4gICAgICAgIFx0XHRvZmZzZXQgPSB0aGlzT2Zmc2V0IC0gbmF2T2Zmc2V0LFxuICAgICAgICBcdFx0d2lkdGggPSAkKHRoaXMpLm91dGVyV2lkdGgoKTtcblxuICAgICAgICBcdFx0JHNlbGVjdG9yLmNzcyh7XG4gICAgICAgIFx0XHRcdCd3aWR0aCc6IHdpZHRoKydweCcsXG4gICAgICAgIFx0XHRcdCdsZWZ0Jzogb2Zmc2V0KydweCdcbiAgICAgICAgXHRcdH0pO1xuICAgICAgICBcdH0pO1xuICAgICAgICB9LFxuICAgICAgICB0b29sdGlwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgXHQkKFwiW2RhdGEtdG9nZ2xlPSd0b29sdGlwJ11cIikudG9vbHRpcCgpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuXG4kKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCl7XG5cdHNldEhlYWRlcigpO1xufSk7XG5cbiQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtcblx0JGhlYWRlci5yZW1vdmVDbGFzcygndW5jb2xsYXBzZWQnKTtcblx0JGJvZHkucmVtb3ZlQ2xhc3MoJ21vYmlsZS1uYXYtb3BlbicpO1xuXHQkKCcubmF2LXRvZ2dsZScpLmVhY2goZnVuY3Rpb24oKXtcblx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0fSk7XG5cdHNldFRhYnMoKTtcbn0pO1xuXG5cblxufSkoIGpRdWVyeSApO1xudmFyIGFycm93cz17bmF2VGV4dCA6IFtcIjxpIGNsYXNzPSdmYSBmYS1jaGV2cm9uLWxlZnQnPjwvaT5cIixcIjxpIGNsYXNzPSdmYSBmYS1jaGV2cm9uLXJpZ2h0Jz48L2k+XCJdfTtcblxuZnVuY3Rpb24gc2V0Q2Fyb3VzZWwocGFyZW50RWxlbWVudCxvcHRpb25zLGFkZCkge1xuXHR2YXIgb3B0aW9ucz1vcHRpb25zP29wdGlvbnM6e1xuXHRcdGxvb3A6ZmFsc2UsXG5cdFx0bWFyZ2luOjEwLFxuXHRcdG5hdjp0cnVlLFxuXHRcdGF1dG9wbGF5OnRydWUsXG5cdFx0cmVzcG9uc2l2ZUNsYXNzOnRydWUsXG5cdFx0aXRlbXM6MSxcblx0XHRhbmltYXRlT3V0OiAnZmFkZU91dCcsXG5cdFx0YW5pbWF0ZUluOiAnZmFkZUluJyxcblx0XHRvblRyYW5zbGF0ZTpmdW5jdGlvbigpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwibW92aWVuZG9tZVwiKTtcblx0XHR9XG5cdH1cblx0aWYgKGFkZCkge1xuXHRcdG9wdGlvbnM9T2JqZWN0LmFzc2lnbihvcHRpb25zLGFkZCk7XG5cdH1cblx0JChwYXJlbnRFbGVtZW50KS5vd2xDYXJvdXNlbChvcHRpb25zKVxuXG5cdFxufVx0XG4iXSwiZmlsZSI6Imdsb2JhbC5qcyJ9
